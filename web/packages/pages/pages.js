$("#menu-search-form").on("submit",function(event){event.preventDefault();var vals=[],val=$("#menu-search-autocomplete").val();return""==val&&(val=" "),navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(position){var geocoder=new google.maps.Geocoder,latlng={lat:parseFloat(position.coords.latitude),lng:parseFloat(position.coords.longitude)};return vals.push("search-filter[latitude]="+latlng.lat),vals.push("search-filter[longitude]="+latlng.lng),geocoder.geocode({location:latlng},function(results,status){if(status===google.maps.GeocoderStatus.OK&&results.length>0){var result=results[0],location=result.formatted_address;vals.push("search-filter[location]="+location),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")}}),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),!1},function(){return window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),!1}),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),!1):(window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),void(window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")))}),jQuery(function($){$.fn.authchoice=function(options){return options=$.extend({popup:{resizable:"yes",scrollbars:"no",toolbar:"no",menubar:"no",location:"no",directories:"no",status:"yes",width:450,height:380}},options),this.each(function(){var $container=$(this);$container.find("a").on("click",function(e){e.preventDefault();var authChoicePopup=$container.data("authChoicePopup");authChoicePopup&&authChoicePopup.close();var url=this.href,popupOptions=$.extend({},options.popup),localPopupWidth=this.getAttribute("data-popup-width");localPopupWidth&&(popupOptions.width=localPopupWidth);var localPopupHeight=this.getAttribute("data-popup-height");localPopupWidth&&(popupOptions.height=localPopupHeight),popupOptions.left=(window.screen.width-popupOptions.width)/2,popupOptions.top=(window.screen.height-popupOptions.height)/2;var popupFeatureParts=[];for(var propName in popupOptions)popupOptions.hasOwnProperty(propName)&&popupFeatureParts.push(propName+"="+popupOptions[propName]);var popupFeature=popupFeatureParts.join(",");authChoicePopup=window.open(url,"yii_auth_choice",popupFeature),authChoicePopup.focus(),$container.data("authChoicePopup",authChoicePopup)})})}});