var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__slice=[].slice;!function($,window){var ResizableColumns,parseWidth,pointerX,setWidth;return parseWidth=function(node){return parseFloat(node.style.width.replace("%",""))},setWidth=function(node,width){return width=width.toFixed(2),width=width>0?width:0,node.style.width=""+width+"%"},pointerX=function(e){return 0===e.type.indexOf("touch")?(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX:e.pageX},ResizableColumns=function(){function ResizableColumns($table,options){this.pointerdown=__bind(this.pointerdown,this),this.constrainWidth=__bind(this.constrainWidth,this),this.options=$.extend({},this.defaults,options),this.$table=$table,this.setHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),$(window).on("resize.rc",function(_this){return function(){return _this.syncHandleWidths()}}(this)),this.options.start&&this.$table.bind("column:resize:start.rc",this.options.start),this.options.resize&&this.$table.bind("column:resize.rc",this.options.resize),this.options.stop&&this.$table.bind("column:resize:stop.rc",this.options.stop)}return ResizableColumns.prototype.defaults={selector:"tr th:visible",store:window.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:null},ResizableColumns.prototype.triggerEvent=function(type,args,original){var event;return event=$.Event(type),event.originalEvent=$.extend({},original),this.$table.trigger(event,[this].concat(args||[]))},ResizableColumns.prototype.getColumnId=function($el){return this.$table.data("resizable-columns-id")+"-"+$el.data("resizable-column-id")},ResizableColumns.prototype.setHeaders=function(){return this.$tableHeaders=this.$table.find(this.options.selector),this.assignPercentageWidths(),this.createHandles()},ResizableColumns.prototype.destroy=function(){return this.$handleContainer.remove(),this.$table.removeData("resizableColumns"),this.$table.add(window).off(".rc")},ResizableColumns.prototype.assignPercentageWidths=function(){return this.$tableHeaders.each(function(_this){return function(_,el){var $el;return $el=$(el),setWidth($el[0],$el.outerWidth()/_this.$table.width()*100)}}(this))},ResizableColumns.prototype.createHandles=function(){var _ref;return null!=(_ref=this.$handleContainer)&&_ref.remove(),this.$table.before(this.$handleContainer=$("<div class='rc-handle-container' />")),this.$tableHeaders.each(function(_this){return function(i,el){var $handle;if(0!==_this.$tableHeaders.eq(i+1).length&&null==_this.$tableHeaders.eq(i).attr("data-noresize")&&null==_this.$tableHeaders.eq(i+1).attr("data-noresize"))return $handle=$("<div class='rc-handle' />"),$handle.data("th",$(el)),$handle.appendTo(_this.$handleContainer)}}(this)),this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)},ResizableColumns.prototype.syncHandleWidths=function(){return this.$handleContainer.width(this.$table.width()).find(".rc-handle").each(function(_this){return function(_,el){var $el;return $el=$(el),$el.css({left:$el.data("th").outerWidth()+($el.data("th").offset().left-_this.$handleContainer.offset().left),height:_this.options.resizeFromBody?_this.$table.height():_this.$table.find("thead").height()})}}(this))},ResizableColumns.prototype.saveColumnWidths=function(){return this.$tableHeaders.each(function(_this){return function(_,el){var $el;return $el=$(el),null==$el.attr("data-noresize")&&null!=_this.options.store?_this.options.store.set(_this.getColumnId($el),parseWidth($el[0])):void 0}}(this))},ResizableColumns.prototype.restoreColumnWidths=function(){return this.$tableHeaders.each(function(_this){return function(_,el){var $el,width;return $el=$(el),null!=_this.options.store&&(width=_this.options.store.get(_this.getColumnId($el)))?setWidth($el[0],width):void 0}}(this))},ResizableColumns.prototype.totalColumnWidths=function(){var total;return total=0,this.$tableHeaders.each(function(_this){return function(_,el){return total+=parseFloat($(el)[0].style.width.replace("%",""))}}(this)),total},ResizableColumns.prototype.constrainWidth=function(width){return null!=this.options.minWidth&&(width=Math.max(this.options.minWidth,width)),null!=this.options.maxWidth&&(width=Math.min(this.options.maxWidth,width)),width},ResizableColumns.prototype.pointerdown=function(e){var $currentGrip,$leftColumn,$ownerDocument,$rightColumn,newWidths,startPosition,widths;return e.preventDefault(),$ownerDocument=$(e.currentTarget.ownerDocument),startPosition=pointerX(e),$currentGrip=$(e.currentTarget),$leftColumn=$currentGrip.data("th"),$rightColumn=this.$tableHeaders.eq(this.$tableHeaders.index($leftColumn)+1),widths={left:parseWidth($leftColumn[0]),right:parseWidth($rightColumn[0])},newWidths={left:widths.left,right:widths.right},this.$handleContainer.add(this.$table).addClass("rc-table-resizing"),$leftColumn.add($rightColumn).add($currentGrip).addClass("rc-column-resizing"),this.triggerEvent("column:resize:start",[$leftColumn,$rightColumn,newWidths.left,newWidths.right],e),$ownerDocument.on("mousemove.rc touchmove.rc",function(_this){return function(e){var difference;return difference=(pointerX(e)-startPosition)/_this.$table.width()*100,setWidth($leftColumn[0],newWidths.left=_this.constrainWidth(widths.left+difference)),setWidth($rightColumn[0],newWidths.right=_this.constrainWidth(widths.right-difference)),null!=_this.options.syncHandlers&&_this.syncHandleWidths(),_this.triggerEvent("column:resize",[$leftColumn,$rightColumn,newWidths.left,newWidths.right],e)}}(this)),$ownerDocument.one("mouseup touchend",function(_this){return function(){return $ownerDocument.off("mousemove.rc touchmove.rc"),_this.$handleContainer.add(_this.$table).removeClass("rc-table-resizing"),$leftColumn.add($rightColumn).add($currentGrip).removeClass("rc-column-resizing"),_this.syncHandleWidths(),_this.saveColumnWidths(),_this.triggerEvent("column:resize:stop",[$leftColumn,$rightColumn,newWidths.left,newWidths.right],e)}}(this))},ResizableColumns}(),$.fn.extend({resizableColumns:function(){var args,option;return option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],this.each(function(){var $table,data;return $table=$(this),data=$table.data("resizableColumns"),data||$table.data("resizableColumns",data=new ResizableColumns($table,option)),"string"==typeof option?data[option].apply(data,args):void 0})}})}(window.jQuery,window),function($){$.fn.yiiGridView=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?($.error("Method "+method+" does not exist on jQuery.yiiGridView"),!1):methods.init.apply(this,arguments)};var defaults={filterUrl:void 0,filterSelector:void 0},gridData={},gridEvents={beforeFilter:"beforeFilter",afterFilter:"afterFilter"},methods={init:function(options){return this.each(function(){var $e=$(this),settings=$.extend({},defaults,options||{});gridData[$e.attr("id")]={settings:settings};var enterPressed=!1;$(document).off("change.yiiGridView keydown.yiiGridView",settings.filterSelector).on("change.yiiGridView keydown.yiiGridView",settings.filterSelector,function(event){if("keydown"===event.type){if(13!==event.keyCode)return;enterPressed=!0}else if(enterPressed)return void(enterPressed=!1);return methods.applyFilter.apply($e),!1})})},applyFilter:function(){var event,$grid=$(this),settings=gridData[$grid.attr("id")].settings,data={};$.each($(settings.filterSelector).serializeArray(),function(){data[this.name]=this.value}),$.each(yii.getQueryParams(settings.filterUrl),function(name,value){void 0===data[name]&&(data[name]=value)});var pos=settings.filterUrl.indexOf("?"),url=0>pos?settings.filterUrl:settings.filterUrl.substring(0,pos);$grid.find("form.gridview-filter-form").remove();var $form=$('<form action="'+url+'" method="get" class="gridview-filter-form" style="display:none" data-pjax></form>').appendTo($grid);$.each(data,function(name,value){$form.append($('<input type="hidden" name="t" value="" />').attr("name",name).val(value))}),event=$.Event(gridEvents.beforeFilter),$grid.trigger(event),event.result!==!1&&($form.submit(),$grid.trigger(gridEvents.afterFilter))},setSelectionColumn:function(options){var $grid=$(this),id=$(this).attr("id");if(gridData[id].selectionColumn=options.name,options.multiple){var checkAll="#"+id+" input[name='"+options.checkAll+"']",inputs="#"+id+" input[name='"+options.name+"']";$(document).off("click.yiiGridView",checkAll).on("click.yiiGridView",checkAll,function(){$grid.find("input[name='"+options.name+"']:enabled").prop("checked",this.checked)}),$(document).off("click.yiiGridView",inputs+":enabled").on("click.yiiGridView",inputs+":enabled",function(){var all=$grid.find("input[name='"+options.name+"']").length==$grid.find("input[name='"+options.name+"']:checked").length;$grid.find("input[name='"+options.checkAll+"']").prop("checked",all)})}},getSelectedRows:function(){var $grid=$(this),data=gridData[$grid.attr("id")],keys=[];return data.selectionColumn&&$grid.find("input[name='"+data.selectionColumn+"']:checked").each(function(){keys.push($(this).parent().closest("tr").data("key"))}),keys},destroy:function(){return this.each(function(){$(window).unbind(".yiiGridView"),$(this).removeData("yiiGridView")})},data:function(){var id=$(this).attr("id");return gridData[id]}}}(window.jQuery),function($){function fnPjax(selector,container,options){var context=this;return this.on("click.pjax",selector,function(event){var opts=$.extend({history:!0},optionsFor(container,options));opts.container||(opts.container=$(this).attr("data-pjax")||context),handleClick(event,opts)})}function handleClick(event,container,options){options=optionsFor(container,options);var link=event.currentTarget;if(0!=$(link).data("pjax")){if("A"!==link.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(event.which>1||event.metaKey||event.ctrlKey||event.shiftKey||event.altKey||location.protocol!==link.protocol||location.hostname!==link.hostname||link.href.indexOf("#")>-1&&stripHash(link)==stripHash(location)||event.isDefaultPrevented())){var defaults={url:link.href,container:$(link).attr("data-pjax"),target:link},opts=$.extend({},defaults,options),clickEvent=$.Event("pjax:click");$(link).trigger(clickEvent,[opts]),clickEvent.isDefaultPrevented()||(pjax(opts),event.preventDefault(),$(link).trigger("pjax:clicked",[opts]))}}}function handleSubmit(event,container,options){options=optionsFor(container,options);var form=event.currentTarget;if("FORM"!==form.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var defaults={type:form.method.toUpperCase(),url:form.action,container:$(form).attr("data-pjax"),target:form};if("GET"!==defaults.type&&void 0!==window.FormData)defaults.data=new FormData(form),defaults.processData=!1,defaults.contentType=!1;else{if($(form).find(":file").length)return;defaults.data=$(form).serializeArray()}pjax($.extend({},defaults,options)),event.preventDefault()}function pjax(options){function fire(type,args,props){props||(props={}),props.relatedTarget=target;var event=$.Event(type,props);return context.trigger(event,args),!event.isDefaultPrevented()}options=$.extend(!0,{},$.ajaxSettings,pjax.defaults,options),$.isFunction(options.url)&&(options.url=options.url());var target=options.target,hash=parseURL(options.url).hash,context=options.context=findContainerFor(options.container);options.data||(options.data={}),$.isArray(options.data)?options.data.push({name:"_pjax",value:context.selector}):options.data._pjax=context.selector;var timeoutTimer;options.beforeSend=function(xhr,settings){if("GET"!==settings.type&&(settings.timeout=0),xhr.setRequestHeader("X-PJAX","true"),xhr.setRequestHeader("X-PJAX-Container",context.selector),!fire("pjax:beforeSend",[xhr,settings]))return!1;settings.timeout>0&&(timeoutTimer=setTimeout(function(){fire("pjax:timeout",[xhr,options])&&xhr.abort("timeout")},settings.timeout),settings.timeout=0);var url=parseURL(settings.url);url.hash=hash,options.requestUrl=stripInternalParams(url.href)},options.complete=function(xhr,textStatus){timeoutTimer&&clearTimeout(timeoutTimer),fire("pjax:complete",[xhr,textStatus,options]),fire("pjax:end",[xhr,options])},options.error=function(xhr,textStatus,errorThrown){var container=extractContainer("",xhr,options),redirect=xhr.status>=301&&xhr.status<=303,allowed=redirect||fire("pjax:error",[xhr,textStatus,errorThrown,options]);(redirect||"GET"==options.type&&"abort"!==textStatus&&allowed)&&locationReplace(container.url)},options.success=function(data,status,xhr){var previousState=pjax.state,currentVersion="function"==typeof $.pjax.defaults.version?$.pjax.defaults.version():$.pjax.defaults.version,latestVersion=xhr.getResponseHeader("X-PJAX-Version"),container=extractContainer(data,xhr,options),url=parseURL(container.url);if(hash&&(url.hash=hash,container.url=url.href),currentVersion&&latestVersion&&currentVersion!==latestVersion)return void locationReplace(container.url);if(!container.contents)return void locationReplace(container.url);pjax.state={id:options.id||uniqueId(),url:container.url,title:container.title,container:context.selector,fragment:options.fragment,timeout:options.timeout},options.history&&(options.push||options.replace)&&window.history.replaceState(pjax.state,container.title,container.url);try{document.activeElement.blur()}catch(e){}container.title&&(document.title=container.title),fire("pjax:beforeReplace",[container.contents,options],{state:pjax.state,previousState:previousState}),context.html(container.contents);var autofocusEl=context.find("input[autofocus], textarea[autofocus]").last()[0];autofocusEl&&document.activeElement!==autofocusEl&&autofocusEl.focus(),executeScriptTags(container.scripts);var scrollTo=options.scrollTo;if(hash){var name=decodeURIComponent(hash.slice(1)),target=document.getElementById(name)||document.getElementsByName(name)[0];target&&(scrollTo=$(target).offset().top)}"number"==typeof scrollTo&&$(window).scrollTop(scrollTo),fire("pjax:success",[data,status,xhr,options])},pjax.state||(pjax.state={id:uniqueId(),url:window.location.href,title:document.title,container:context.selector,fragment:options.fragment,timeout:options.timeout},window.history.replaceState(pjax.state,document.title)),abortXHR(pjax.xhr),options.url=stripInternalParams(options.url),pjax.options=options;var xhr=pjax.xhr=$.ajax(options);return xhr.readyState>0&&(options.history&&options.push&&!options.replace&&(cachePush(pjax.state.id,cloneContents(context)),window.history.pushState(null,"",options.requestUrl)),fire("pjax:start",[xhr,options]),fire("pjax:send",[xhr,options])),pjax.xhr}function pjaxReload(container,options){var defaults={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return pjax($.extend(defaults,optionsFor(container,options)))}function locationReplace(url){pjax.options.history&&(window.history.replaceState(null,"",pjax.state.url),window.location.replace(url))}function onPjaxPopstate(event){initialPop||abortXHR(pjax.xhr);var previousState=pjax.state,state=event.state;if(state&&state.container){if(initialPop&&initialURL==state.url)return;var direction,containerSelector=state.container;if(previousState){if(previousState.id===state.id)return;direction=previousState.id<state.id?"forward":"back","back"==direction&&(containerSelector=previousState.container)}var container=$(containerSelector);if(container.length){var contents=cacheMapping[state.id];previousState&&cachePop(direction,previousState.id,cloneContents(container));var popstateEvent=$.Event("pjax:popstate",{state:state,direction:direction});container.trigger(popstateEvent);var options={id:state.id,url:state.url,container:container,push:!1,fragment:state.fragment,timeout:state.timeout,scrollTo:!1};if(contents){container.trigger("pjax:start",[null,options]),pjax.state=state,state.title&&(document.title=state.title);var beforeReplaceEvent=$.Event("pjax:beforeReplace",{state:state,previousState:previousState});container.trigger(beforeReplaceEvent,[contents,options]),container.html(contents),container.trigger("pjax:end",[null,options])}else pjax(options);container[0].offsetHeight}else locationReplace(location.href)}initialPop=!1}function fallbackPjax(options){var url=$.isFunction(options.url)?options.url():options.url,method=options.type?options.type.toUpperCase():"GET",form=$("<form>",{method:"GET"===method?"GET":"POST",action:url,style:"display:none"});"GET"!==method&&"POST"!==method&&form.append($("<input>",{type:"hidden",name:"_method",value:method.toLowerCase()}));var data=options.data;if("string"==typeof data)$.each(data.split("&"),function(index,value){var pair=value.split("=");form.append($("<input>",{type:"hidden",name:pair[0],value:pair[1]}))});else if($.isArray(data))$.each(data,function(index,value){form.append($("<input>",{type:"hidden",name:value.name,value:value.value}))});else if("object"==typeof data){var key;for(key in data)form.append($("<input>",{type:"hidden",name:key,value:data[key]}))}$(document.body).append(form),form.submit()}function abortXHR(xhr){xhr&&xhr.readyState<4&&(xhr.onreadystatechange=$.noop,xhr.abort())}function uniqueId(){return(new Date).getTime()}function cloneContents(container){var cloned=container.clone();return cloned.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),cloned.contents()}function stripParam(url,name){return url.replace(new RegExp("[?&]"+name+"=[^&#]*"),"").replace(/[?&]($|#)/,"").replace(/[?&]/,"?")}function stripInternalParams(url){return url=stripParam(url,"_pjax"),url=stripParam(url,"_")}function parseURL(url){var a=document.createElement("a");return a.href=url,a}function stripHash(location){return location.href.replace(/#.*/,"")}function optionsFor(container,options){return container&&options?options.container=container:options=$.isPlainObject(container)?container:{container:container},options.container&&(options.container=findContainerFor(options.container)),options}function findContainerFor(container){if(container=$(container),container.length){if(""!==container.selector&&container.context===document)return container;if(container.attr("id"))return $("#"+container.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+container.selector}function findAll(elems,selector){return elems.filter(selector).add(elems.find(selector))}function parseHTML(html){return $.parseHTML(html,document,!0)}function extractContainer(data,xhr,options){var obj={},fullDocument=/<html/i.test(data),serverUrl=xhr.getResponseHeader("X-PJAX-URL");if(obj.url=serverUrl?stripInternalParams(serverUrl):options.requestUrl,fullDocument)var $head=$(parseHTML(data.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),$body=$(parseHTML(data.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var $head=$body=$(parseHTML(data));if(0===$body.length)return obj;if(obj.title=findAll($head,"title").last().text(),options.fragment){if("body"===options.fragment)var $fragment=$body;else var $fragment=findAll($body,options.fragment).first();$fragment.length&&(obj.contents="body"===options.fragment?$fragment:$fragment.contents(),obj.title||(obj.title=$fragment.attr("title")||$fragment.data("title")))}else fullDocument||(obj.contents=$body);return obj.contents&&(obj.contents=obj.contents.not(function(){return $(this).is("title")}),obj.contents.find("title").remove(),obj.scripts=findAll(obj.contents,"script[src]").remove(),obj.contents=obj.contents.not(obj.scripts)),obj.title&&(obj.title=$.trim(obj.title)),obj}function executeScriptTags(scripts){if(scripts){var existingScripts=$("script[src]");scripts.each(function(){var src=this.src,matchedScripts=existingScripts.filter(function(){return this.src===src});if(!matchedScripts.length){var script=document.createElement("script"),type=$(this).attr("type");type&&(script.type=type),script.src=$(this).attr("src"),document.head.appendChild(script)}})}}function cachePush(id,value){pjax.options.cache&&(cacheMapping[id]=value,cacheBackStack.push(id),trimCacheStack(cacheForwardStack,0),trimCacheStack(cacheBackStack,pjax.defaults.maxCacheLength))}function cachePop(direction,id,value){if(pjax.options.cache){var pushStack,popStack;cacheMapping[id]=value,"forward"===direction?(pushStack=cacheBackStack,popStack=cacheForwardStack):(pushStack=cacheForwardStack,popStack=cacheBackStack),pushStack.push(id),(id=popStack.pop())&&delete cacheMapping[id],trimCacheStack(pushStack,pjax.defaults.maxCacheLength)}}function trimCacheStack(stack,length){for(;stack.length>length;)delete cacheMapping[stack.shift()]}function findVersion(){return $("meta").filter(function(){var name=$(this).attr("http-equiv");return name&&"X-PJAX-VERSION"===name.toUpperCase()}).attr("content")}function enable(){$.fn.pjax=fnPjax,$.pjax=pjax,$.pjax.enable=$.noop,$.pjax.disable=disable,$.pjax.click=handleClick,$.pjax.submit=handleSubmit,$.pjax.reload=pjaxReload,$.pjax.defaults={history:!0,cache:!0,timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:findVersion},$(window).on("popstate.pjax",onPjaxPopstate)}function disable(){$.fn.pjax=function(){return this},$.pjax=fallbackPjax,$.pjax.enable=enable,$.pjax.disable=$.noop,$.pjax.click=$.noop,$.pjax.submit=$.noop,$.pjax.reload=function(){window.location.reload()},$(window).off("popstate.pjax",onPjaxPopstate)}var initialPop=!0,initialURL=window.location.href,initialState=window.history.state;initialState&&initialState.container&&(pjax.state=initialState),"state"in window.history&&(initialPop=!1);var cacheMapping={},cacheForwardStack=[],cacheBackStack=[];$.inArray("state",$.event.props)<0&&$.event.props.push("state"),$.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),$.support.pjax?enable():disable()}(jQuery),$("#menu-search-form").on("submit",function(event){event.preventDefault();var vals=[],val=$("#menu-search-autocomplete").val();""==val&&(val=" "),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){var geocoder=new google.maps.Geocoder,latlng={lat:parseFloat(position.coords.latitude),lng:parseFloat(position.coords.longitude)};vals.push("search-filter[latitude]="+latlng.lat),vals.push("search-filter[longitude]="+latlng.lng),geocoder.geocode({location:latlng},function(results,status){if(status===google.maps.GeocoderStatus.OK&&results.length>0){var result=results[0],location=result.formatted_address;vals.push("search-filter[location]="+location),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")}})}):window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function Notify(element,content,options){var content={content:{message:"object"==typeof content?content.message:content,title:content.title?content.title:"",icon:content.icon?content.icon:"",url:content.url?content.url:"#",target:content.target?content.target:"-"}};options=$.extend(!0,{},content,options),this.settings=$.extend(!0,{},defaults,options),this._defaults=defaults,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var defaults={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var str=arguments[0],i=1;i<arguments.length;i++)str=str.replace(RegExp("\\{"+(i-1)+"\\}","gm"),arguments[i]);return str},$.extend(Notify.prototype,{init:function(){var self=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(command,update){var commands={};"string"==typeof command?commands[command]=update:commands=command;for(var command in commands)switch(command){case"type":this.$ele.removeClass("alert-"+self.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+self.settings.type),self.settings.type=commands[command],this.$ele.addClass("alert-"+commands[command]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+commands[command]);break;case"icon":var $icon=this.$ele.find('[data-notify="icon"]');"class"==self.settings.icon_type.toLowerCase()?$icon.removeClass(self.settings.content.icon).addClass(commands[command]):($icon.is("img")||$icon.find("img"),$icon.attr("src",commands[command]));break;case"progress":var newDelay=self.settings.delay-self.settings.delay*(commands[command]/100);this.$ele.data("notify-delay",newDelay),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",commands[command]).css("width",commands[command]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",commands[command]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",commands[command]);break;default:this.$ele.find('[data-notify="'+command+'"]').html(commands[command])}var posX=this.$ele.outerHeight()+parseInt(self.settings.spacing)+parseInt(self.settings.offset.y);self.reposition(posX)},close:function(){self.close()}}},buildNotify:function(){var content=this.settings.content;this.$ele=$(String.format(this.settings.template,this.settings.type,content.title,content.message,content.url,content.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1}),this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},placement:function(){var self=this,offsetAmt=this.settings.offset.y,css={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},hasAnimation=!1,settings=this.settings;switch($('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return offsetAmt=Math.max(offsetAmt,parseInt($(this).css(settings.placement.from))+parseInt($(this).outerHeight())+parseInt(settings.spacing))}),1==this.settings.newest_on_top&&(offsetAmt=this.settings.offset.y),css[this.settings.placement.from]=offsetAmt+"px",this.settings.placement.align){case"left":case"right":css[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":css.left=0,css.right=0}this.$ele.css(css).addClass(this.settings.animate.enter),$.each(Array("webkit","moz","o","ms",""),function(index,prefix){self.$ele[0].style[prefix+"AnimationIterationCount"]=1}),$(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(offsetAmt=parseInt(offsetAmt)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(offsetAmt)),$.isFunction(self.settings.onShow)&&self.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(event){hasAnimation=!0}).one(this.animations.end,function(event){$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)}),setTimeout(function(){hasAnimation||$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)},600)},bind:function(){var self=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){self.close()}),this.$ele.mouseover(function(e){$(this).data("data-hover","true")}).mouseout(function(e){$(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){self.$ele.data("notify-delay",self.settings.delay);var timer=setInterval(function(){var delay=parseInt(self.$ele.data("notify-delay"))-self.settings.timer;if("false"===self.$ele.data("data-hover")&&"pause"==self.settings.mouse_over||"pause"!=self.settings.mouse_over){var percent=(self.settings.delay-delay)/self.settings.delay*100;self.$ele.data("notify-delay",delay),self.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",percent).css("width",percent+"%")}delay<=-self.settings.timer&&(clearInterval(timer),self.close())},self.settings.timer)}},close:function(){var self=this,posX=parseInt(this.$ele.css(this.settings.placement.from)),hasAnimation=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),self.reposition(posX),$.isFunction(self.settings.onClose)&&self.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(event){hasAnimation=!0}).one(this.animations.end,function(event){$(this).remove(),$.isFunction(self.settings.onClosed)&&self.settings.onClosed.call(this)}),setTimeout(function(){hasAnimation||(self.$ele.remove(),self.settings.onClosed&&self.settings.onClosed(self.$ele))},600)},reposition:function(posX){var self=this,notifies='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',$elements=this.$ele.nextAll(notifies);1==this.settings.newest_on_top&&($elements=this.$ele.prevAll(notifies)),$elements.each(function(){$(this).css(self.settings.placement.from,posX),posX=parseInt(posX)+parseInt(self.settings.spacing)+$(this).outerHeight()})}}),$.notify=function(content,options){var plugin=new Notify(this,content,options);return plugin.notify},$.notifyDefaults=function(options){return defaults=$.extend(!0,{},defaults,options)},$.notifyClose=function(command){"undefined"==typeof command||"all"==command?$("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):$('[data-notify-position="'+command+'"]').find('[data-notify="dismiss"]').trigger("click")}});