!function($){function isInputEventSupported(eventName){var el=document.createElement("input"),evName="on"+eventName,isSupported=evName in el;return isSupported||(el.setAttribute(evName,"return;"),isSupported="function"==typeof el[evName]),el=null,isSupported}function isInputTypeSupported(inputType){var isSupported="text"==inputType||"tel"==inputType||"password"==inputType;if(!isSupported){var el=document.createElement("input");el.setAttribute("type",inputType),isSupported="text"===el.type,el=null}return isSupported}function resolveAlias(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];return aliasDefinition?(aliasDefinition.alias&&resolveAlias(aliasDefinition.alias,void 0,opts),$.extend(!0,opts,aliasDefinition),$.extend(!0,opts,options),!0):!1}function generateMaskSet(opts,nocache){function analyseMask(mask){function maskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[],this.isGroup=isGroup||!1,this.isOptional=isOptional||!1,this.isQuantifier=isQuantifier||!1,this.isAlternator=isAlternator||!1,this.quantifier={min:1,max:1}}function insertTestDefinition(mtoken,element,position){var maskdef=opts.definitions[element],newBlockMarker=0==mtoken.matches.length;if(position=void 0!=position?position:mtoken.matches.length,maskdef&&!escaped){maskdef.placeholder=$.isFunction(maskdef.placeholder)?maskdef.placeholder.call(this,opts):maskdef.placeholder;for(var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0,i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?"string"==typeof validator?new RegExp(validator):new function(){this.test=validator}:new RegExp("."),cardinality:cardinality?cardinality:1,optionality:mtoken.isOptional,newBlockMarker:newBlockMarker,casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element})}mtoken.matches.splice(position++,0,{fn:maskdef.validator?"string"==typeof maskdef.validator?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator}:new RegExp("."),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:newBlockMarker,casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element})}else mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:newBlockMarker,casing:null,def:element,placeholder:void 0,mask:element}),escaped=!1}for(var match,m,openingToken,currentOpeningToken,alternator,lastMatch,tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,escaped=!1,currentToken=new maskToken,openenings=[],maskTokens=[];match=tokenizer.exec(mask);)switch(m=match[0],m.charAt(0)){case opts.optionalmarker.end:case opts.groupmarker.end:if(openingToken=openenings.pop(),openenings.length>0){if(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(openingToken),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else currentToken.matches.push(openingToken);break;case opts.optionalmarker.start:openenings.push(new maskToken(!1,!0));break;case opts.groupmarker.start:openenings.push(new maskToken(!0));break;case opts.quantifiermarker.start:var quantifier=new maskToken(!1,!1,!0);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1==mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if(("*"==mq1||"+"==mq1)&&(mq0="*"==mq1?0:1),quantifier.quantifier={min:mq0,max:mq1},openenings.length>0){var matches=openenings[openenings.length-1].matches;if(match=matches.pop(),!match.isGroup){var groupToken=new maskToken(!0);groupToken.matches.push(match),match=groupToken}matches.push(match),matches.push(quantifier)}else{if(match=currentToken.matches.pop(),!match.isGroup){var groupToken=new maskToken(!0);groupToken.matches.push(match),match=groupToken}currentToken.matches.push(match),currentToken.matches.push(quantifier)}break;case opts.escapeChar:escaped=!0;break;case opts.alternatormarker:openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],lastMatch=currentOpeningToken.matches.pop()):lastMatch=currentToken.matches.pop(),lastMatch.isAlternator?openenings.push(lastMatch):(alternator=new maskToken(!1,!1,!1,!0),alternator.matches.push(lastMatch),openenings.push(alternator));break;default:if(openenings.length>0){if(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.length>0&&!currentOpeningToken.isAlternator&&(lastMatch=currentOpeningToken.matches[currentOpeningToken.matches.length-1],lastMatch.isGroup&&(lastMatch.isGroup=!1,insertTestDefinition(lastMatch,opts.groupmarker.start,0),insertTestDefinition(lastMatch,opts.groupmarker.end))),insertTestDefinition(currentOpeningToken,m),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else currentToken.matches.length>0&&(lastMatch=currentToken.matches[currentToken.matches.length-1],lastMatch.isGroup&&(lastMatch.isGroup=!1,insertTestDefinition(lastMatch,opts.groupmarker.start,0),insertTestDefinition(lastMatch,opts.groupmarker.end))),insertTestDefinition(currentToken,m)}return currentToken.matches.length>0&&(lastMatch=currentToken.matches[currentToken.matches.length-1],lastMatch.isGroup&&(lastMatch.isGroup=!1,insertTestDefinition(lastMatch,opts.groupmarker.start,0),insertTestDefinition(lastMatch,opts.groupmarker.end)),maskTokens.push(currentToken)),maskTokens}function generateMask(mask,metadata){if(void 0==mask||""==mask)return void 0;if(1==mask.length&&0==opts.greedy&&0!=opts.repeat&&(opts.placeholder=""),opts.repeat>0||"*"==opts.repeat||"+"==opts.repeat){var repeatStart="*"==opts.repeat?0:"+"==opts.repeat?1:opts.repeat;mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+","+opts.repeat+opts.quantifiermarker.end}var masksetDefinition;return void 0==$.inputmask.masksCache[mask]||nocache===!0?(masksetDefinition={mask:mask,maskToken:analyseMask(mask),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:metadata},nocache!==!0&&($.inputmask.masksCache[mask]=masksetDefinition)):masksetDefinition=$.extend(!0,{},$.inputmask.masksCache[mask]),masksetDefinition}function preProcessMask(mask){if(mask=mask.toString(),opts.numericInput){mask=mask.split("").reverse();for(var ndx=0;ndx<mask.length;ndx++)mask[ndx]==opts.optionalmarker.start?mask[ndx]=opts.optionalmarker.end:mask[ndx]==opts.optionalmarker.end?mask[ndx]=opts.optionalmarker.start:mask[ndx]==opts.groupmarker.start?mask[ndx]=opts.groupmarker.end:mask[ndx]==opts.groupmarker.end&&(mask[ndx]=opts.groupmarker.start);mask=mask.join("")}return mask}var ms=void 0;if($.isFunction(opts.mask)&&(opts.mask=opts.mask.call(this,opts)),$.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=void 0==opts.keepStatic?!0:opts.keepStatic;var altMask="(";return $.each(opts.mask,function(ndx,msk){altMask.length>1&&(altMask+=")|("),altMask+=preProcessMask(void 0==msk.mask||$.isFunction(msk.mask)?msk:msk.mask)}),altMask+=")",generateMask(altMask,opts.mask)}opts.mask=opts.mask.pop()}return opts.mask&&(ms=void 0==opts.mask.mask||$.isFunction(opts.mask.mask)?generateMask(preProcessMask(opts.mask),opts.mask):generateMask(preProcessMask(opts.mask.mask),opts.mask)),ms}function maskScope(actionObj,maskset,opts){function getMaskTemplate(baseOnInput,minimalPos,includeInput){minimalPos=minimalPos||0;var ndxIntlzr,test,testPos,maskTemplate=[],pos=0;do{if(baseOnInput===!0&&getMaskSet().validPositions[pos]){var validPos=getMaskSet().validPositions[pos];test=validPos.match,ndxIntlzr=validPos.locator.slice(),maskTemplate.push(includeInput===!0?validPos.input:getPlaceholder(pos,test))}else testPos=getTestTemplate(pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice(),maskTemplate.push(getPlaceholder(pos,test));pos++}while((void 0==maxLength||maxLength>pos-1)&&null!=test.fn||null==test.fn&&""!=test.def||minimalPos>=pos);return maskTemplate.pop(),maskTemplate}function getMaskSet(){return maskset}function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=void 0,maskset.tests={},soft!==!0&&(maskset._buffer=void 0,maskset.validPositions={},maskset.p=0)}function getLastValidPosition(closestTo,strict){var maskset=getMaskSet(),lastValidPosition=-1,valids=maskset.validPositions;void 0==closestTo&&(closestTo=-1);var before=lastValidPosition,after=lastValidPosition;for(var posNdx in valids){var psNdx=parseInt(posNdx);valids[psNdx]&&(strict||null!=valids[psNdx].match.fn)&&(closestTo>=psNdx&&(before=psNdx),psNdx>=closestTo&&(after=psNdx))}return lastValidPosition=-1!=before&&closestTo-before>1||closestTo>after?before:after}function setValidPosition(pos,validTest,fromSetValid){if(opts.insertMode&&void 0!=getMaskSet().validPositions[pos]&&void 0==fromSetValid){var i,positionsClone=$.extend(!0,{},getMaskSet().validPositions),lvp=getLastValidPosition();for(i=pos;lvp>=i;i++)delete getMaskSet().validPositions[i];getMaskSet().validPositions[pos]=validTest;var j,valid=!0,vps=getMaskSet().validPositions;for(i=j=pos;lvp>=i;i++){var t=positionsClone[i];if(void 0!=t)for(var posMatch=j,prevPosMatch=-1;posMatch<getMaskLength()&&(null==t.match.fn&&vps[i]&&(vps[i].match.optionalQuantifier===!0||vps[i].match.optionality===!0)||null!=t.match.fn);){if(null==t.match.fn||!opts.keepStatic&&vps[i]&&(void 0!=vps[i+1]&&getTests(i+1,vps[i].locator.slice(),i).length>1||void 0!=vps[i].alternation)?posMatch++:posMatch=seekNext(j),positionCanMatchDefinition(posMatch,t.match.def)){valid=isValid(posMatch,t.input,!0,!0)!==!1,j=posMatch;break}if(valid=null==t.match.fn,prevPosMatch==posMatch)break;prevPosMatch=posMatch}if(!valid)break}if(!valid)return getMaskSet().validPositions=$.extend(!0,{},positionsClone),!1}else getMaskSet().validPositions[pos]=validTest;return!0}function stripValidPositions(start,end,nocheck,strict){var i,startPos=start;for(getMaskSet().p=start,void 0!=getMaskSet().validPositions[start]&&getMaskSet().validPositions[start].input==opts.radixPoint&&(end++,startPos++),i=startPos;end>i;i++)void 0!=getMaskSet().validPositions[i]&&(nocheck===!0||0!=opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts))&&delete getMaskSet().validPositions[i];for(resetMaskSet(!0),i=startPos+1;i<=getLastValidPosition();){for(;void 0!=getMaskSet().validPositions[startPos];)startPos++;var s=getMaskSet().validPositions[startPos];startPos>i&&(i=startPos+1);var t=getMaskSet().validPositions[i];void 0!=t&&void 0==s?(positionCanMatchDefinition(startPos,t.match.def)&&isValid(startPos,t.input,!0)!==!1&&(delete getMaskSet().validPositions[i],i++),startPos++):i++}var lvp=getLastValidPosition(),ml=getMaskLength();for(lvp>=start&&void 0!=getMaskSet().validPositions[lvp]&&getMaskSet().validPositions[lvp].input==opts.radixPoint&&delete getMaskSet().validPositions[lvp],i=lvp+1;ml>=i;i++)getMaskSet().validPositions[i]&&delete getMaskSet().validPositions[i];resetMaskSet(!0)}function getTestTemplate(pos,ndxIntlzr,tstPs){var testPos=getMaskSet().validPositions[pos];if(void 0==testPos)for(var testPositions=getTests(pos,ndxIntlzr,tstPs),lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=void 0!=lvTest.alternation?lvTest.locator[lvTest.alternation].toString().split(","):[],ndx=0;ndx<testPositions.length&&(testPos=testPositions[ndx],!(testPos.match&&(opts.greedy&&testPos.match.optionalQuantifier!==!0||(testPos.match.optionality===!1||testPos.match.newBlockMarker===!1)&&testPos.match.optionalQuantifier!==!0)&&(void 0==lvTest.alternation||lvTest.alternation!=testPos.alternation||void 0!=testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAltArr))));ndx++);return testPos}function getTest(pos){return getMaskSet().validPositions[pos]?getMaskSet().validPositions[pos].match:getTests(pos)[0].match}function positionCanMatchDefinition(pos,def){for(var valid=!1,tests=getTests(pos),tndx=0;tndx<tests.length;tndx++)if(tests[tndx].match&&tests[tndx].match.def==def){valid=!0;break}return valid}function getTests(pos,ndxIntlzr,tstPs,cacheable){function ResolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){if(testPos>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask),!0;if(testPos==pos&&void 0==match.matches)return matches.push({match:match,locator:loopNdx.reverse()}),!0;if(void 0!=match.matches){if(match.isGroup&&quantifierRecurse!==!0){if(match=handleMatch(maskToken.matches[tndx+1],loopNdx))return!0}else if(match.isOptional){var optionalToken=match;if(match=ResolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse)){var latestMatch=matches[matches.length-1].match,isFirstMatch=0==$.inArray(latestMatch,optionalToken.matches);if(!isFirstMatch)return!0;insertStop=!0,testPos=pos}}else if(match.isAlternator){var maltMatches,alternateToken=match,malternateMatches=[],currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(-1==altIndex||"string"==typeof altIndex){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[];"string"==typeof altIndex&&(altIndexArr=altIndex.split(","));for(var amndx=0;amndx<alternateToken.matches.length;amndx++){if(matches=[],match=handleMatch(alternateToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match,match!==!0&&void 0!=match&&altIndexArr[altIndexArr.length-1]<alternateToken.matches.length){var ntndx=maskToken.matches.indexOf(match)+1;maskToken.matches.length>ntndx&&(match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse),match&&(altIndexArr.push(ntndx.toString()),$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1})))}maltMatches=matches.slice(),testPos=currentPos,matches=[];for(var i=0;i<ndxInitializerClone.length;i++)ndxInitializer[i]=ndxInitializerClone[i];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1];altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(altMatch.match.mask==altMatch2.match.mask&&("string"!=typeof altIndex||-1!=$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr))){maltMatches.splice(ndx1,1),ndx1--,altMatch2.locator[altMatch.alternation]=altMatch2.locator[altMatch.alternation]+","+altMatch.locator[altMatch.alternation],altMatch2.alternation=altMatch.alternation;break}}}malternateMatches=malternateMatches.concat(maltMatches)}"string"==typeof altIndex&&(malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var mamatch,alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(",");lmnt.locator[alternation]=void 0,lmnt.alternation=void 0;for(var alndx=0;alndx<altLocArr.length;alndx++)mamatch=-1!=$.inArray(altLocArr[alndx],altIndexArr),mamatch&&(void 0!=lmnt.locator[alternation]?(lmnt.locator[alternation]+=",",lmnt.locator[alternation]+=altLocArr[alndx]):lmnt.locator[alternation]=parseInt(altLocArr[alndx]),lmnt.alternation=alternation);if(void 0!=lmnt.locator[alternation])return lmnt}})),matches=currentMatches.concat(malternateMatches),testPos=pos,insertStop=matches.length>0}else match=alternateToken.matches[altIndex]?handleMatch(alternateToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse):!1;if(match)return!0}else if(match.isQuantifier&&quantifierRecurse!==!0)for(var qt=match,qndx=ndxInitializer.length>0&&quantifierRecurse!==!0?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&pos>=testPos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];if(match=handleMatch(tokenGroup,[qndx].concat(loopNdx),!0)){var latestMatch=matches[matches.length-1].match;latestMatch.optionalQuantifier=qndx>qt.quantifier.min-1;var isFirstMatch=0==$.inArray(latestMatch,tokenGroup.matches);if(isFirstMatch){if(qndx>qt.quantifier.min-1){insertStop=!0,testPos=pos;break}return!0}return!0}}else if(match=ResolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse))return!0}else testPos++}for(var tndx=ndxInitializer.length>0?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++)if(maskToken.matches[tndx].isQuantifier!==!0){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos==pos)return match;if(testPos>pos)break}}var maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr||[0],matches=[],insertStop=!1;if(cacheable===!0&&getMaskSet().tests[pos])return getMaskSet().tests[pos];if(void 0==ndxIntlzr){for(var test,previousPos=pos-1;void 0==(test=getMaskSet().validPositions[previousPos])&&previousPos>-1&&(!getMaskSet().tests[previousPos]||void 0==(test=getMaskSet().tests[previousPos][0]));)previousPos--;void 0!=test&&previousPos>-1&&(testPos=previousPos,ndxInitializer=test.locator.slice())}for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=ResolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if(match&&testPos==pos||testPos>pos)break}return(0==matches.length||insertStop)&&matches.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),getMaskSet().tests[pos]=$.extend(!0,[],matches),getMaskSet().tests[pos]}function getBufferTemplate(){return void 0==getMaskSet()._buffer&&(getMaskSet()._buffer=getMaskTemplate(!1,1)),getMaskSet()._buffer}function getBuffer(){return void 0==getMaskSet().buffer&&(getMaskSet().buffer=getMaskTemplate(!0,getLastValidPosition(),!0)),getMaskSet().buffer}function refreshFromBuffer(start,end,buffer){if(buffer=buffer||getBuffer().slice(),start===!0)resetMaskSet(),start=0,end=buffer.length;else for(var i=start;end>i;i++)delete getMaskSet().validPositions[i],delete getMaskSet().tests[i];for(var i=start;end>i;i++)buffer[i]!=opts.skipOptionalPartCharacter&&isValid(i,buffer[i],!0,!0)}function casing(elem,test){switch(test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase()}return elem}function checkAlternationMatch(altArr1,altArr2){for(var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1,alndx=0;alndx<altArr1.length;alndx++)if(-1!=$.inArray(altArr1[alndx],altArrC)){isMatch=!0;break}return isMatch}function isValid(pos,c,strict,fromSetValid){function _isValid(position,c,strict,fromSetValid){var rslt=!1;return $.each(getTests(position),function(ndx,tst){for(var test=tst.match,loopend=c?1:0,chrs="",i=(getBuffer(),test.cardinality);i>loopend;i--)chrs+=getBufferElement(position-(i-1));if(c&&(chrs+=c),rslt=null!=test.fn?test.fn.test(chrs,getMaskSet(),position,strict,opts):c!=test.def&&c!=opts.skipOptionalPartCharacter||""==test.def?!1:{c:test.def,pos:position},rslt!==!1){var elem=void 0!=rslt.c?rslt.c:c;elem=elem==opts.skipOptionalPartCharacter&&null===test.fn?test.def:elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(void 0!=rslt.remove&&($.isArray(rslt.remove)||(rslt.remove=[rslt.remove]),$.each(rslt.remove.sort(function(a,b){return b-a}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,!0)})),void 0!=rslt.insert&&($.isArray(rslt.insert)||(rslt.insert=[rslt.insert]),$.each(rslt.insert.sort(function(a,b){return a-b}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,!0)})),rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;if(strict=!0,refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,possibleModifiedBuffer),void 0==rslt.pos&&void 0==rslt.c)return rslt.pos=getLastValidPosition(),!1;if(validatedPos=void 0!=rslt.pos?rslt.pos:position,validatedPos!=position)return rslt=$.extend(rslt,isValid(validatedPos,elem,!0)),!1}else if(rslt!==!0&&void 0!=rslt.pos&&rslt.pos!=position&&(validatedPos=rslt.pos,refreshFromBuffer(position,validatedPos),validatedPos!=position))return rslt=$.extend(rslt,isValid(validatedPos,elem,!0)),!1;return 1!=rslt&&void 0==rslt.pos&&void 0==rslt.c?!1:(ndx>0&&resetMaskSet(!0),setValidPosition(validatedPos,$.extend({},tst,{input:casing(elem,test)}),fromSetValid)||(rslt=!1),!1)}}),rslt}function alternate(pos,c,strict,fromSetValid){for(var lastAlt,alternation,isValidRslt,altPos,validPsClone=$.extend(!0,{},getMaskSet().validPositions),lAlt=getLastValidPosition();lAlt>=0&&(altPos=getMaskSet().validPositions[lAlt],!altPos||void 0==altPos.alternation||(lastAlt=lAlt,alternation=getMaskSet().validPositions[lastAlt].alternation,getTestTemplate(lastAlt).locator[altPos.alternation]==altPos.locator[altPos.alternation]));lAlt--);if(void 0!=alternation)for(var decisionPos in getMaskSet().validPositions)if(altPos=getMaskSet().validPositions[decisionPos],parseInt(decisionPos)>parseInt(lastAlt)&&void 0!=altPos.alternation){var altNdxs=getMaskSet().validPositions[lastAlt].locator[alternation].toString().split(","),decisionTaker=altPos.locator[alternation]||altNdxs[0];decisionTaker.length>0&&(decisionTaker=decisionTaker.split(",")[0]);for(var mndx=0;mndx<altNdxs.length;mndx++)if(decisionTaker<altNdxs[mndx]){for(var possibilityPos,possibilities,dp=decisionPos-1;dp>=0;dp--)if(possibilityPos=getMaskSet().validPositions[dp],void 0!=possibilityPos){possibilities=possibilityPos.locator[alternation],possibilityPos.locator[alternation]=parseInt(altNdxs[mndx]);break}if(decisionTaker!=possibilityPos.locator[alternation]){for(var validInputs=[],i=decisionPos;i<getLastValidPosition()+1;i++){var validPos=getMaskSet().validPositions[i];validPos&&null!=validPos.match.fn&&validInputs.push(validPos.input),delete getMaskSet().validPositions[i],delete getMaskSet().tests[i]}for(resetMaskSet(!0),opts.keepStatic=!opts.keepStatic,isValidRslt=!0;validInputs.length>0;){var input=validInputs.shift();if(input!=opts.skipOptionalPartCharacter&&!(isValidRslt=isValid(getLastValidPosition()+1,input,!1,!0)))break}if(possibilityPos.alternation=alternation,possibilityPos.locator[alternation]=possibilities,isValidRslt){var targetLvp=getLastValidPosition(pos)+1;isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid)}if(opts.keepStatic=!opts.keepStatic,isValidRslt)return isValidRslt;resetMaskSet(),getMaskSet().validPositions=$.extend(!0,{},validPsClone)}}break}return!1}function trackbackAlternations(originalPos,newPos){for(var vp=getMaskSet().validPositions[newPos],targetLocator=vp.locator,tll=targetLocator.length,ps=originalPos;newPos>ps;ps++)if(!isMask(ps)){var tests=getTests(ps),bestMatch=tests[0],equality=-1;$.each(tests,function(ndx,tst){for(var i=0;tll>i;i++)tst.locator[i]&&checkAlternationMatch(tst.locator[i].toString().split(","),targetLocator[i].toString().split(","))&&i>equality&&(equality=i,bestMatch=tst)}),setValidPosition(ps,$.extend({},bestMatch,{input:bestMatch.match.def}),!0)}}strict=strict===!0;for(var buffer=getBuffer(),pndx=pos-1;pndx>-1&&!getMaskSet().validPositions[pndx];pndx--);for(pndx++;pos>pndx;pndx++)void 0==getMaskSet().validPositions[pndx]&&((!isMask(pndx)||buffer[pndx]!=getPlaceholder(pndx))&&getTests(pndx).length>1||buffer[pndx]==opts.radixPoint||"0"==buffer[pndx]&&$.inArray(opts.radixPoint,buffer)<pndx)&&_isValid(pndx,buffer[pndx],!0);var maskPos=pos,result=!1,positionsClone=$.extend(!0,{},getMaskSet().validPositions);if(maskPos<getMaskLength()&&(result=_isValid(maskPos,c,strict,fromSetValid),(!strict||fromSetValid)&&result===!1)){var currentPosValid=getMaskSet().validPositions[maskPos];if(!currentPosValid||null!=currentPosValid.match.fn||currentPosValid.match.def!=c&&c!=opts.skipOptionalPartCharacter){if((opts.insertMode||void 0==getMaskSet().validPositions[seekNext(maskPos)])&&!isMask(maskPos))for(var nPos=maskPos+1,snPos=seekNext(maskPos);snPos>=nPos;nPos++)if(result=_isValid(nPos,c,strict,fromSetValid),result!==!1){trackbackAlternations(maskPos,nPos),maskPos=nPos;break}}else result={caret:seekNext(maskPos)}}if(result===!1&&opts.keepStatic&&isComplete(buffer)&&(result=alternate(pos,c,strict,fromSetValid)),result===!0&&(result={pos:maskPos}),$.isFunction(opts.postValidation)&&0!=result&&!strict){resetMaskSet(!0);var postValidResult=opts.postValidation(getBuffer(),opts);if(!postValidResult)return resetMaskSet(!0),getMaskSet().validPositions=$.extend(!0,{},positionsClone),!1}return result}function isMask(pos){var test=getTest(pos);if(null!=test.fn)return test.fn;if(!opts.keepStatic&&void 0==getMaskSet().validPositions[pos]){for(var tests=getTests(pos),staticAlternations=!0,i=0;i<tests.length;i++)if(""!=tests[i].match.def&&(void 0==tests[i].alternation||tests[i].locator[tests[i].alternation].length>1)){staticAlternations=!1;break}return staticAlternations}return!1}function getMaskLength(){var maskLength;maxLength=$el.prop("maxLength"),-1==maxLength&&(maxLength=void 0);var pos,lvp=getLastValidPosition(),testPos=getMaskSet().validPositions[lvp],ndxIntlzr=void 0!=testPos?testPos.locator.slice():void 0;for(pos=lvp+1;void 0==testPos||null!=testPos.match.fn||null==testPos.match.fn&&""!=testPos.match.def;pos++)testPos=getTestTemplate(pos,ndxIntlzr,pos-1),ndxIntlzr=testPos.locator.slice();var lastTest=getTest(pos-1);return maskLength=""!=lastTest.def?pos:pos-1,void 0==maxLength||maxLength>maskLength?maskLength:maxLength}function seekNext(pos){var maskL=getMaskLength();if(pos>=maskL)return maskL;for(var position=pos;++position<maskL&&!isMask(position)&&(opts.nojumps!==!0||opts.nojumpsThreshold>position););return position}function seekPrevious(pos){var position=pos;if(0>=position)return 0;for(;--position>0&&!isMask(position););return position}function getBufferElement(position){return void 0==getMaskSet().validPositions[position]?getPlaceholder(position):getMaskSet().validPositions[position].input}function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite.call(input,event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,result.buffer),resetMaskSet(!0),buffer=getBuffer()}caretPos=result.caret||caretPos}}input._valueSet(buffer.join("")),void 0!=caretPos&&caret(input,caretPos),triggerInputEvent===!0&&(skipInputEvent=!0,$(input).trigger("input"))}function getPlaceholder(pos,test){if(test=test||getTest(pos),void 0!=test.placeholder)return test.placeholder;if(null==test.fn){if(!opts.keepStatic&&void 0==getMaskSet().validPositions[pos]){for(var tests=getTests(pos),staticAlternations=!0,i=0;i<tests.length;i++)if(""!=tests[i].match.def&&(null!==tests[i].match.fn||void 0==tests[i].alternation||tests[i].locator[tests[i].alternation].length>1)){staticAlternations=!1;break}if(staticAlternations)return opts.placeholder.charAt(pos%opts.placeholder.length)}return test.def}return opts.placeholder.charAt(pos%opts.placeholder.length)}function checkVal(input,writeOut,strict,nptvl){function isTemplateMatch(){var isMatch=!1,charCodeNdx=getBufferTemplate().slice(initialNdx,seekNext(initialNdx)).join("").indexOf(charCodes);if(-1!=charCodeNdx&&!isMask(initialNdx)){isMatch=!0;for(var bufferTemplateArr=getBufferTemplate().slice(initialNdx,initialNdx+charCodeNdx),i=0;i<bufferTemplateArr.length;i++)if(" "!=bufferTemplateArr[i]){isMatch=!1;break}}return isMatch}var inputValue=void 0!=nptvl?nptvl.slice():input._valueGet().split(""),charCodes="",initialNdx=0;if(resetMaskSet(),getMaskSet().p=seekNext(-1),writeOut&&input._valueSet(""),!strict){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+escapeRegex(staticInput),"g"));matches&&matches.length>0&&(inputValue.splice(0,matches.length*staticInput.length),initialNdx=seekNext(initialNdx))}$.each(inputValue,function(ndx,charCode){var keypress=$.Event("keypress");keypress.which=charCode.charCodeAt(0),charCodes+=charCode;var lvp=getLastValidPosition(void 0,!0),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():void 0,lvp);if(!isTemplateMatch()||strict){var pos=strict?ndx:null==nextTest.match.fn&&nextTest.match.optionality&&lvp+1<getMaskSet().p?lvp+1:getMaskSet().p;keypressEvent.call(input,keypress,!0,!1,strict,pos),initialNdx=pos+1,charCodes=""}else keypressEvent.call(input,keypress,!0,!1,!0,lvp+1)}),writeOut&&writeBuffer(input,getBuffer(),$(input).is(":focus")?seekNext(getLastValidPosition(0)):void 0,$.Event("checkval"))}function escapeRegex(str){return $.inputmask.escapeRegex(str)}function unmaskedvalue($input){if($input.data("_inputmask")&&!$input.hasClass("hasDatepicker")){var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps)vps[pndx].match&&null!=vps[pndx].match.fn&&umValue.push(vps[pndx].input);var unmaskedValue=(isRTL?umValue.reverse():umValue).join(""),bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");return $.isFunction(opts.onUnMask)&&(unmaskedValue=opts.onUnMask.call($input,bufferValue,unmaskedValue,opts)||unmaskedValue),unmaskedValue}return $input[0]._valueGet()}function TranslatePosition(pos){if(isRTL&&"number"==typeof pos&&(!opts.greedy||""!=opts.placeholder)){var bffrLght=getBuffer().length;pos=bffrLght-pos}return pos}function caret(input,begin,end){var range,npt=input.jquery&&input.length>0?input[0]:input;if("number"!=typeof begin)return npt.setSelectionRange?(begin=npt.selectionStart,end=npt.selectionEnd):window.getSelection?(range=window.getSelection().getRangeAt(0),(range.commonAncestorContainer.parentNode==npt||range.commonAncestorContainer==npt)&&(begin=range.startOffset,end=range.endOffset)):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length),{begin:TranslatePosition(begin),end:TranslatePosition(end)};if(begin=TranslatePosition(begin),end=TranslatePosition(end),end="number"==typeof end?end:begin,$(npt).is(":visible")){var scrollCalc=$(npt).css("font-size").replace("px","")*end;if(npt.scrollLeft=scrollCalc>npt.scrollWidth?scrollCalc:0,androidchrome||0!=opts.insertMode||begin!=end||end++,npt.setSelectionRange)npt.selectionStart=begin,npt.selectionEnd=end;else if(window.getSelection){if(range=document.createRange(),void 0==npt.firstChild){var textNode=document.createTextNode("");npt.appendChild(textNode)}range.setStart(npt.firstChild,begin<npt._valueGet().length?begin:npt._valueGet().length),range.setEnd(npt.firstChild,end<npt._valueGet().length?end:npt._valueGet().length),range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else npt.createTextRange&&(range=npt.createTextRange(),range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())}}function determineLastRequiredPosition(returnDefinition){var pos,testPos,buffer=getBuffer(),bl=buffer.length,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=void 0!=lvTest?lvTest.locator.slice():void 0;for(pos=lvp+1;pos<buffer.length;pos++)testPos=getTestTemplate(pos,ndxIntlzr,pos-1),ndxIntlzr=testPos.locator.slice(),positions[pos]=$.extend(!0,{},testPos);var lvTestAlt=lvTest&&void 0!=lvTest.alternation?lvTest.locator[lvTest.alternation]:void 0;for(pos=bl-1;pos>lvp&&(testPos=positions[pos],(testPos.match.optionality||testPos.match.optionalQuantifier||lvTestAlt&&(lvTestAlt!=positions[pos].locator[lvTest.alternation]&&null!=testPos.match.fn||null==testPos.match.fn&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.split(","))&&""!=getTests(pos)[0].def))&&buffer[pos]==getPlaceholder(pos,testPos.match));pos--)bl--;
return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:void 0}:bl}function clearOptionalTail(buffer){for(var rl=determineLastRequiredPosition(),lmib=buffer.length-1;lmib>rl&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),buffer}function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete.call($el,buffer,opts);if("*"==opts.repeat)return void 0;var complete=!1,lrp=determineLastRequiredPosition(!0),aml=seekPrevious(lrp.l);if(getLastValidPosition(),void 0==lrp.def||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;aml>=i;i++){var test=getTestTemplate(i).match;if(null!=test.fn&&void 0==getMaskSet().validPositions[i]&&test.optionality!==!0&&test.optionalQuantifier!==!0||null==test.fn&&buffer[i]!=getPlaceholder(i,test)){complete=!1;break}}}return complete}function isSelection(begin,end){return isRTL?begin-end>1||begin-end==1&&opts.insertMode:end-begin>1||end-begin==1&&opts.insertMode}function installEventRuler(npt){var events=$._data(npt).events,inComposition=!1;$.each(events,function(eventType,eventHandlers){$.each(eventHandlers,function(ndx,eventHandler){if("inputmask"==eventHandler.namespace&&"setvalue"!=eventHandler.type){var handler=eventHandler.handler;eventHandler.handler=function(e){if(!(this.disabled||this.readOnly&&!("keydown"==e.type&&e.ctrlKey&&67==e.keyCode||e.keyCode==$.inputmask.keyCode.TAB))){switch(e.type){case"input":if(skipInputEvent===!0||inComposition===!0)return skipInputEvent=!1,e.preventDefault();break;case"keydown":skipKeyPressEvent=!1,inComposition=!1;break;case"keypress":if(skipKeyPressEvent===!0)return e.preventDefault();skipKeyPressEvent=!0;break;case"compositionstart":inComposition=!0;break;case"compositionupdate":skipInputEvent=!0;break;case"compositionend":inComposition=!1}return handler.apply(this,arguments)}e.preventDefault()}}})})}function patchValueProperty(npt){function PatchValhook(type){if(void 0==$.valHooks[type]||1!=$.valHooks[type].inputmaskpatch){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){return elem.value=value,elem};$.valHooks[type]={get:function(elem){var $elem=$(elem);if($elem.data("_inputmask")){if($elem.data("_inputmask").opts.autoUnmask)return $elem.inputmask("unmaskedvalue");var result=valhookGet(elem),inputData=$elem.data("_inputmask"),maskset=inputData.maskset,bufferTemplate=maskset._buffer;return bufferTemplate=bufferTemplate?bufferTemplate.join(""):"",result!=bufferTemplate?result:""}return valhookGet(elem)},set:function(elem,value){var result,$elem=$(elem),inputData=$elem.data("_inputmask");return result=valhookSet(elem,value),inputData&&$elem.triggerHandler("setvalue.inputmask"),result},inputmaskpatch:!0}}}function getter(){var $self=$(this),inputData=$(this).data("_inputmask");return inputData?inputData.opts.autoUnmask?$self.inputmask("unmaskedvalue"):valueGet.call(this)!=getBufferTemplate().join("")?valueGet.call(this):"":valueGet.call(this)}function setter(value){var inputData=$(this).data("_inputmask");valueSet.call(this,value),inputData&&$(this).triggerHandler("setvalue.inputmask")}function InstallNativeValueSetFallback(npt){$(npt).bind("mouseenter.inputmask",function(event){var $input=$(this),input=this,value=input._valueGet();""!=value&&value!=getBuffer().join("")&&$input.triggerHandler("setvalue.inputmask")});var events=$._data(npt).events,handlers=events.mouseover;if(handlers){for(var ourHandler=handlers[handlers.length-1],i=handlers.length-1;i>0;i--)handlers[i]=handlers[i-1];handlers[0]=ourHandler}}var valueGet,valueSet;if(!npt._valueGet){var valueProperty;Object.getOwnPropertyDescriptor&&void 0==npt.value?(valueGet=function(){return this.textContent},valueSet=function(value){this.textContent=value},Object.defineProperty(npt,"value",{get:getter,set:setter})):((valueProperty=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(npt,"value"))&&valueProperty.configurable,document.__lookupGetter__&&npt.__lookupGetter__("value")?(valueGet=npt.__lookupGetter__("value"),valueSet=npt.__lookupSetter__("value"),npt.__defineGetter__("value",getter),npt.__defineSetter__("value",setter)):(valueGet=function(){return npt.value},valueSet=function(value){npt.value=value},PatchValhook(npt.type),InstallNativeValueSetFallback(npt))),npt._valueGet=function(overruleRTL){return isRTL&&overruleRTL!==!0?valueGet.call(this).split("").reverse().join(""):valueGet.call(this)},npt._valueSet=function(value){valueSet.call(this,isRTL?value.split("").reverse().join(""):value)}}}function handleRemove(input,k,pos,strict){function generalize(){if(opts.keepStatic){resetMaskSet(!0);var lastAlt,validInputs=[],positionsClone=$.extend(!0,{},getMaskSet().validPositions);for(lastAlt=getLastValidPosition();lastAlt>=0;lastAlt--){var validPos=getMaskSet().validPositions[lastAlt];if(validPos){if(void 0!=validPos.alternation&&validPos.locator[validPos.alternation]==getTestTemplate(lastAlt).locator[validPos.alternation])break;null!=validPos.match.fn&&validInputs.push(validPos.input),delete getMaskSet().validPositions[lastAlt]}}if(lastAlt>0)for(;validInputs.length>0;){getMaskSet().p=seekNext(getLastValidPosition());var keypress=$.Event("keypress");keypress.which=validInputs.pop().charCodeAt(0),keypressEvent.call(input,keypress,!0,!1,!1,getMaskSet().p)}else getMaskSet().validPositions=$.extend(!0,{},positionsClone)}}if((opts.numericInput||isRTL)&&(k==$.inputmask.keyCode.BACKSPACE?k=$.inputmask.keyCode.DELETE:k==$.inputmask.keyCode.DELETE&&(k=$.inputmask.keyCode.BACKSPACE),isRTL)){var pend=pos.end;pos.end=pos.begin,pos.begin=pend}if(k==$.inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||0==opts.insertMode)?pos.begin=seekPrevious(pos.begin):k==$.inputmask.keyCode.DELETE&&pos.begin==pos.end&&(pos.end=isMask(pos.end)?pos.end+1:seekNext(pos.end)+1),stripValidPositions(pos.begin,pos.end,!1,strict),strict!==!0){generalize();var lvp=getLastValidPosition(pos.begin);lvp<pos.begin?(-1==lvp&&resetMaskSet(),getMaskSet().p=seekNext(lvp)):getMaskSet().p=pos.begin}}function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);k==$.inputmask.keyCode.BACKSPACE||k==$.inputmask.keyCode.DELETE||iphone&&127==k||e.ctrlKey&&88==k&&!isInputEventSupported("cut")?(e.preventDefault(),88==k&&(undoValue=getBuffer().join("")),handleRemove(input,k,pos),writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!=getBuffer().join("")),input._valueGet()==getBufferTemplate().join("")?$input.trigger("cleared"):isComplete(getBuffer())===!0&&$input.trigger("complete"),opts.showTooltip&&$input.prop("title",getMaskSet().mask)):k==$.inputmask.keyCode.END||k==$.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var caretPos=seekNext(getLastValidPosition());opts.insertMode||caretPos!=getMaskLength()||e.shiftKey||caretPos--,caret(input,e.shiftKey?pos.begin:caretPos,caretPos)},0):k==$.inputmask.keyCode.HOME&&!e.shiftKey||k==$.inputmask.keyCode.PAGE_UP?caret(input,0,e.shiftKey?pos.begin:0):(opts.undoOnEscape&&k==$.inputmask.keyCode.ESCAPE||90==k&&e.ctrlKey)&&e.altKey!==!0?(checkVal(input,!0,!1,undoValue.split("")),$input.click()):k!=$.inputmask.keyCode.INSERT||e.shiftKey||e.ctrlKey?0!=opts.insertMode||e.shiftKey||(k==$.inputmask.keyCode.RIGHT?setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0):k==$.inputmask.keyCode.LEFT&&setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1)},0)):(opts.insertMode=!opts.insertMode,caret(input,opts.insertMode||pos.begin!=getMaskLength()?pos.begin:pos.begin-1)),opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts),ignorable=-1!=$.inArray(k,opts.ignorables)}function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(!(checkval===!0||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))return!0;if(k){46==k&&0==e.shiftKey&&","==opts.radixPoint&&(k=44);var forwardPosition,pos=checkval?{begin:ndx,end:ndx}:caret(input),c=String.fromCharCode(k),isSlctn=isSelection(pos.begin,pos.end);isSlctn&&(getMaskSet().undoPositions=$.extend(!0,{},getMaskSet().validPositions),handleRemove(input,$.inputmask.keyCode.DELETE,pos,!0),pos.begin=getMaskSet().p,opts.insertMode||(opts.insertMode=!opts.insertMode,setValidPosition(pos.begin,strict),opts.insertMode=!opts.insertMode),isSlctn=!opts.multi),getMaskSet().writeOutBuffer=!0;var p=isRTL&&!isSlctn?pos.end:pos.begin,valResult=isValid(p,c,strict);if(valResult!==!1){if(valResult!==!0&&(p=void 0!=valResult.pos?valResult.pos:p,c=void 0!=valResult.c?valResult.c:c),resetMaskSet(!0),void 0!=valResult.caret)forwardPosition=valResult.caret;else{var vps=getMaskSet().validPositions;forwardPosition=!opts.keepStatic&&(void 0!=vps[p+1]&&getTests(p+1,vps[p].locator.slice(),p).length>1||void 0!=vps[p].alternation)?p+1:seekNext(p)}getMaskSet().p=forwardPosition}if(writeOut!==!1){var self=this;if(setTimeout(function(){opts.onKeyValidation.call(self,valResult,opts)},0),getMaskSet().writeOutBuffer&&valResult!==!1){var buffer=getBuffer();writeBuffer(input,buffer,checkval?void 0:opts.numericInput?seekPrevious(forwardPosition):forwardPosition,e,checkval!==!0),checkval!==!0&&setTimeout(function(){isComplete(buffer)===!0&&$input.trigger("complete")},0)}else isSlctn&&(getMaskSet().buffer=void 0,getMaskSet().validPositions=getMaskSet().undoPositions)}else isSlctn&&(getMaskSet().buffer=void 0,getMaskSet().validPositions=getMaskSet().undoPositions);if(opts.showTooltip&&$input.prop("title",getMaskSet().mask),checkval&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite.call(this,e,getBuffer(),forwardPosition,opts);if(result&&result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,result.buffer),resetMaskSet(!0),result.caret&&(getMaskSet().p=result.caret)}}e.preventDefault()}}function pasteEvent(e){var input=this,$input=$(input),inputValue=input._valueGet(!0),caretPos=caret(input);if("propertychange"==e.type&&input._valueGet().length<=getMaskLength())return!0;if("paste"==e.type){var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);valueBeforeCaret==getBufferTemplate().slice(0,caretPos.begin).join("")&&(valueBeforeCaret=""),valueAfterCaret==getBufferTemplate().slice(caretPos.end).join("")&&(valueAfterCaret=""),window.clipboardData&&window.clipboardData.getData?inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(inputValue=valueBeforeCaret+e.originalEvent.clipboardData.getData("text/plain")+valueAfterCaret)}var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){if(pasteValue=opts.onBeforePaste.call(input,inputValue,opts),pasteValue===!1)return e.preventDefault(),!1;pasteValue||(pasteValue=inputValue)}return checkVal(input,!0,!1,isRTL?pasteValue.split("").reverse():pasteValue.split("")),$input.click(),isComplete(getBuffer())===!0&&$input.trigger("complete"),!1}function inputFallBackEvent(e){var input=this;checkVal(input,!0,!1),isComplete(getBuffer())===!0&&$(input).trigger("complete"),e.preventDefault()}function compositionStartEvent(e){var input=this;undoValue=getBuffer().join(""),(""==compositionData||0!=e.originalEvent.data.indexOf(compositionData))&&(compositionCaretPos=caret(input))}function compositionUpdateEvent(e){var input=this,caretPos=compositionCaretPos||caret(input);0==e.originalEvent.data.indexOf(compositionData)&&(resetMaskSet(),caretPos={begin:0,end:0});var newData=e.originalEvent.data;caret(input,caretPos.begin,caretPos.end);for(var i=0;i<newData.length;i++){var keypress=$.Event("keypress");keypress.which=newData.charCodeAt(i),skipKeyPressEvent=!1,ignorable=!1,keypressEvent.call(input,keypress)}setTimeout(function(){var forwardPosition=getMaskSet().p;writeBuffer(input,getBuffer(),opts.numericInput?seekPrevious(forwardPosition):forwardPosition)},0),compositionData=e.originalEvent.data}function compositionEndEvent(e){}function mask(el){if($el=$(el),$el.data("_inputmask",{maskset:maskset,opts:opts,isRTL:!1}),opts.showTooltip&&$el.prop("title",getMaskSet().mask),("rtl"==el.dir||opts.rightAlign)&&$el.css("text-align","right"),"rtl"==el.dir||opts.numericInput){el.dir="ltr",$el.removeAttr("dir");var inputData=$el.data("_inputmask");inputData.isRTL=!0,$el.data("_inputmask",inputData),isRTL=!0}$el.unbind(".inputmask"),($el.is(":input")&&isInputTypeSupported($el.attr("type"))||el.isContentEditable)&&($el.closest("form").bind("submit",function(e){undoValue!=getBuffer().join("")&&$el.change(),$el[0]._valueGet&&$el[0]._valueGet()==getBufferTemplate().join("")&&$el[0]._valueSet(""),opts.removeMaskOnSubmit&&$el.inputmask("remove")}).bind("reset",function(){setTimeout(function(){$el.triggerHandler("setvalue.inputmask")},0)}),$el.bind("mouseenter.inputmask",function(){var $input=$(this),input=this;!$input.is(":focus")&&opts.showMaskOnHover&&input._valueGet()!=getBuffer().join("")&&writeBuffer(input,getBuffer())}).bind("blur.inputmask",function(e){var $input=$(this),input=this;if($input.data("_inputmask")){var nptValue=input._valueGet(),buffer=getBuffer().slice();firstClick=!0,undoValue!=buffer.join("")&&setTimeout(function(){$input.change(),undoValue=buffer.join("")},0),""!=nptValue&&(opts.clearMaskOnLostFocus&&(nptValue==getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer)),isComplete(buffer)===!1&&($input.trigger("incomplete"),opts.clearIncomplete&&(resetMaskSet(),buffer=opts.clearMaskOnLostFocus?[]:getBufferTemplate().slice())),writeBuffer(input,buffer,void 0,e))}}).bind("focus.inputmask",function(e){var input=($(this),this),nptValue=input._valueGet();opts.showMaskOnFocus&&(!opts.showMaskOnHover||opts.showMaskOnHover&&""==nptValue)&&input._valueGet()!=getBuffer().join("")&&writeBuffer(input,getBuffer(),seekNext(getLastValidPosition())),undoValue=getBuffer().join("")}).bind("mouseleave.inputmask",function(){var $input=$(this),input=this;if(opts.clearMaskOnLostFocus){var buffer=getBuffer().slice(),nptValue=input._valueGet();$input.is(":focus")||nptValue==$input.attr("placeholder")||""==nptValue||(nptValue==getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer),writeBuffer(input,buffer))}}).bind("click.inputmask",function(){var $input=$(this),input=this;if($input.is(":focus")){var selectedCaret=caret(input);if(selectedCaret.begin==selectedCaret.end)if(opts.radixFocus&&""!=opts.radixPoint&&-1!=$.inArray(opts.radixPoint,getBuffer())&&(firstClick||getBuffer().join("")==getBufferTemplate().join("")))caret(input,$.inArray(opts.radixPoint,getBuffer())),firstClick=!1;else{var clickPosition=TranslatePosition(selectedCaret.begin),lastPosition=seekNext(getLastValidPosition(clickPosition));lastPosition>clickPosition?caret(input,isMask(clickPosition)?clickPosition:seekNext(clickPosition)):caret(input,lastPosition)}}}).bind("dblclick.inputmask",function(){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()))},0)}).bind(PasteEventType+".inputmask dragdrop.inputmask drop.inputmask",pasteEvent).bind("cut.inputmask",function(e){skipInputEvent=!0;var input=this,$input=$(input),pos=caret(input);handleRemove(input,$.inputmask.keyCode.DELETE,pos),writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!=getBuffer().join("")),input._valueGet()==getBufferTemplate().join("")&&$input.trigger("cleared"),opts.showTooltip&&$input.prop("title",getMaskSet().mask)}).bind("complete.inputmask",opts.oncomplete).bind("incomplete.inputmask",opts.onincomplete).bind("cleared.inputmask",opts.oncleared),$el.bind("keydown.inputmask",keydownEvent).bind("keypress.inputmask",keypressEvent),androidfirefox||$el.bind("compositionstart.inputmask",compositionStartEvent).bind("compositionupdate.inputmask",compositionUpdateEvent).bind("compositionend.inputmask",compositionEndEvent),"paste"===PasteEventType&&$el.bind("input.inputmask",inputFallBackEvent)),$el.bind("setvalue.inputmask",function(){var input=this,value=input._valueGet();input._valueSet($.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(input,value,opts)||value:value),checkVal(input,!0,!1),undoValue=getBuffer().join(""),(opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input._valueGet()==getBufferTemplate().join("")&&input._valueSet("")}),patchValueProperty(el);var initialValue=$.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(el,el._valueGet(),opts)||el._valueGet():el._valueGet();checkVal(el,!0,!1,initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join("");var activeElement;try{activeElement=document.activeElement}catch(e){}isComplete(buffer)===!1&&opts.clearIncomplete&&resetMaskSet(),opts.clearMaskOnLostFocus&&(buffer.join("")==getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer)),writeBuffer(el,buffer),activeElement===el&&caret(el,seekNext(getLastValidPosition())),installEventRuler(el)}var undoValue,compositionCaretPos,compositionData,$el,maxLength,isRTL=!1,skipKeyPressEvent=!1,skipInputEvent=!1,ignorable=!1,firstClick=!0;if(void 0!=actionObj)switch(actionObj.action){case"isComplete":return $el=$(actionObj.el),maskset=$el.data("_inputmask").maskset,opts=$el.data("_inputmask").opts,isComplete(actionObj.buffer);case"unmaskedvalue":return $el=actionObj.$input,maskset=$el.data("_inputmask").maskset,opts=$el.data("_inputmask").opts,isRTL=actionObj.$input.data("_inputmask").isRTL,unmaskedvalue(actionObj.$input);case"mask":undoValue=getBuffer().join(""),mask(actionObj.el);break;case"format":$el=$({}),$el.data("_inputmask",{maskset:maskset,opts:opts,isRTL:opts.numericInput}),opts.numericInput&&(isRTL=!0);var valueBuffer=($.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call($el,actionObj.value,opts)||actionObj.value:actionObj.value).split("");return checkVal($el,!1,!1,isRTL?valueBuffer.reverse():valueBuffer),$.isFunction(opts.onBeforeWrite)&&opts.onBeforeWrite.call(this,void 0,getBuffer(),0,opts),actionObj.metadata?{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:$el.inputmask("getmetadata")}:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":$el=$({}),$el.data("_inputmask",{maskset:maskset,opts:opts,isRTL:opts.numericInput}),opts.numericInput&&(isRTL=!0);var valueBuffer=actionObj.value.split("");checkVal($el,!1,!0,isRTL?valueBuffer.reverse():valueBuffer);for(var buffer=getBuffer(),rl=determineLastRequiredPosition(),lmib=buffer.length-1;lmib>rl&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),isComplete(buffer)&&actionObj.value==buffer.join("");case"getemptymask":return $el=$(actionObj.el),maskset=$el.data("_inputmask").maskset,opts=$el.data("_inputmask").opts,getBufferTemplate();case"remove":var el=actionObj.el;$el=$(el),maskset=$el.data("_inputmask").maskset,opts=$el.data("_inputmask").opts,el._valueSet(unmaskedvalue($el)),$el.unbind(".inputmask"),$el.removeData("_inputmask");var valueProperty;Object.getOwnPropertyDescriptor&&(valueProperty=Object.getOwnPropertyDescriptor(el,"value")),valueProperty&&valueProperty.get?el._valueGet&&Object.defineProperty(el,"value",{get:el._valueGet,set:el._valueSet}):document.__lookupGetter__&&el.__lookupGetter__("value")&&el._valueGet&&(el.__defineGetter__("value",el._valueGet),el.__defineSetter__("value",el._valueSet));try{delete el._valueGet,delete el._valueSet}catch(e){el._valueGet=void 0,el._valueSet=void 0}break;case"getmetadata":if($el=$(actionObj.el),maskset=$el.data("_inputmask").maskset,opts=$el.data("_inputmask").opts,$.isArray(maskset.metadata)){for(var alternation,lvp=getLastValidPosition(),firstAlt=lvp;firstAlt>=0;firstAlt--)if(getMaskSet().validPositions[firstAlt]&&void 0!=getMaskSet().validPositions[firstAlt].alternation){alternation=getMaskSet().validPositions[firstAlt].alternation;break}return void 0!=alternation?maskset.metadata[getMaskSet().validPositions[lvp].locator[alternation]]:maskset.metadata[0]}return maskset.metadata}}if(void 0===$.fn.inputmask){var ua=navigator.userAgent,iphone=null!==ua.match(new RegExp("iphone","i")),androidchrome=(null!==ua.match(new RegExp("android.*safari.*","i")),null!==ua.match(new RegExp("android.*chrome.*","i"))),androidfirefox=null!==ua.match(new RegExp("android.*firefox.*","i")),PasteEventType=(/Kindle/i.test(ua)||/Silk/i.test(ua)||/KFTT/i.test(ua)||/KFOT/i.test(ua)||/KFJWA/i.test(ua)||/KFJWI/i.test(ua)||/KFSOWI/i.test(ua)||/KFTHWA/i.test(ua)||/KFTHWI/i.test(ua)||/KFAPWA/i.test(ua)||/KFAPWI/i.test(ua),isInputEventSupported("paste")?"paste":isInputEventSupported("input")?"input":"propertychange");$.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:$.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:$.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1")},format:function(value,options,metadata){var opts=$.extend(!0,{},$.inputmask.defaults,options);return resolveAlias(opts.alias,options,opts),maskScope({action:"format",value:value,metadata:metadata},generateMaskSet(opts,options&&void 0!==options.definitions),opts)},isValid:function(value,options){var opts=$.extend(!0,{},$.inputmask.defaults,options);return resolveAlias(opts.alias,options,opts),maskScope({action:"isValid",value:value},generateMaskSet(opts,options&&void 0!==options.definitions),opts)}},$.fn.inputmask=function(fn,options){function importAttributeOptions(npt,opts,importedOptionsContainer){var $npt=$(npt);$npt.data("inputmask-alias")&&resolveAlias($npt.data("inputmask-alias"),$.extend(!0,{},opts),opts);for(var option in opts){var optionData=$npt.data("inputmask-"+option.toLowerCase());void 0!=optionData&&(optionData="boolean"==typeof optionData?optionData:optionData.toString(),"mask"==option&&0==optionData.indexOf("[")?(opts[option]=optionData.replace(/[\s[\]]/g,"").split("','"),opts[option][0]=opts[option][0].replace("'",""),opts[option][opts[option].length-1]=opts[option][opts[option].length-1].replace("'","")):opts[option]=optionData,importedOptionsContainer&&(importedOptionsContainer[option]=opts[option]))}return opts}var maskset,opts=$.extend(!0,{},$.inputmask.defaults,options);if("string"==typeof fn)switch(fn){case"mask":return resolveAlias(opts.alias,options,opts),this.each(function(){return importAttributeOptions(this,opts),maskset=generateMaskSet(opts,options&&void 0!==options.definitions),void 0==maskset?this:void maskScope({action:"mask",el:this},maskset,opts)});case"unmaskedvalue":var $input=$(this);return $input.data("_inputmask")?maskScope({action:"unmaskedvalue",$input:$input}):$input.val();case"remove":return this.each(function(){var $input=$(this);$input.data("_inputmask")&&maskScope({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?maskScope({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?maskScope({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?maskScope({action:"getmetadata",el:this}):void 0;default:return resolveAlias(opts.alias,options,opts),resolveAlias(fn,options,opts)||(opts.mask=fn),this.each(function(){return importAttributeOptions(this,opts),maskset=generateMaskSet(opts,options&&void 0!==options.definitions),void 0==maskset?this:void maskScope({action:"mask",el:this},maskset,opts)})}else{if("object"==typeof fn)return opts=$.extend(!0,{},$.inputmask.defaults,fn),resolveAlias(opts.alias,fn,opts),this.each(function(){return importAttributeOptions(this,opts),maskset=generateMaskSet(opts,fn&&void 0!==fn.definitions),void 0==maskset?this:void maskScope({action:"mask",el:this},maskset,opts)});if(void 0==fn)return this.each(function(){var attrOptions=$(this).attr("data-inputmask");if(attrOptions&&""!=attrOptions)try{attrOptions=attrOptions.replace(new RegExp("'","g"),'"');var dataoptions=$.parseJSON("{"+attrOptions+"}");$.extend(!0,dataoptions,options),opts=$.extend(!0,{},$.inputmask.defaults,dataoptions),opts=importAttributeOptions(this,opts),resolveAlias(opts.alias,dataoptions,opts),opts.alias=void 0,$(this).inputmask("mask",opts)}catch(ex){}if($(this).attr("data-inputmask-mask")||$(this).attr("data-inputmask-alias")){opts=$.extend(!0,{},$.inputmask.defaults,{});var dataOptions={};opts=importAttributeOptions(this,opts,dataOptions),resolveAlias(opts.alias,dataOptions,opts),opts.alias=void 0,$(this).inputmask("mask",opts)}})}}}return $.fn.inputmask}(jQuery),function($){return $.extend($.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),$.extend($.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(separator){var escapedSeparator=$.inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+escapedSeparator+"[01])")},val2:function(separator){var escapedSeparator=$.inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9])"+escapedSeparator+"(0[1-9]|1[012]))|(30"+escapedSeparator+"(0[13-9]|1[012]))|(31"+escapedSeparator+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(chrs,minyear,maxyear){if(isNaN(chrs))return!1;var enteredyear=parseInt(chrs.concat(minyear.toString().slice(chrs.length))),enteredyear2=parseInt(chrs.concat(maxyear.toString().slice(chrs.length)));return(isNaN(enteredyear)?!1:enteredyear>=minyear&&maxyear>=enteredyear)||(isNaN(enteredyear2)?!1:enteredyear2>=minyear&&maxyear>=enteredyear2)},determinebaseyear:function(minyear,maxyear,hint){var currentyear=(new Date).getFullYear();if(minyear>currentyear)return minyear;if(currentyear>maxyear){for(var maxYearPrefix=maxyear.toString().slice(0,2),maxYearPostfix=maxyear.toString().slice(2,4);maxYearPrefix+hint>maxyear;)maxYearPrefix--;var maxxYear=maxYearPrefix+maxYearPostfix;return minyear>maxxYear?minyear:maxxYear}return currentyear},onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode==$.inputmask.keyCode.RIGHT){var today=new Date;$input.val(today.getDate().toString()+(today.getMonth()+1).toString()+today.getFullYear().toString()),$input.triggerHandler("setvalue.inputmask")}},getFrontValue:function(mask,buffer,opts){for(var start=0,length=0,i=0;i<mask.length&&"2"!=mask.charAt(i);i++){var definition=opts.definitions[mask.charAt(i)];definition?(start+=length,length=definition.cardinality):length++}return buffer.join("").substr(start,length)},definitions:{1:{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.val1.test(chrs);return strict||isValid||chrs.charAt(1)!=opts.separator&&-1=="-./".indexOf(chrs.charAt(1))||!(isValid=opts.regex.val1.test("0"+chrs.charAt(0)))?isValid:(maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)})},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var pchrs=chrs;isNaN(maskset.buffer[pos+1])||(pchrs+=maskset.buffer[pos+1]);var isValid=1==pchrs.length?opts.regex.val1pre.test(pchrs):opts.regex.val1.test(pchrs);if(!strict&&!isValid){if(isValid=opts.regex.val1.test(chrs+"0"))return maskset.buffer[pos]=chrs,maskset.buffer[++pos]="0",{pos:pos,c:"0"};if(isValid=opts.regex.val1.test("0"+chrs))return maskset.buffer[pos]="0",pos++,{pos:pos}}return isValid},cardinality:1}]},2:{validator:function(chrs,maskset,pos,strict,opts){var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!=frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=opts.regex.val2(opts.separator).test(frontValue+chrs);if(!strict&&!isValid&&(chrs.charAt(1)==opts.separator||-1!="-./".indexOf(chrs.charAt(1)))&&(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs.charAt(0))))return maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)};if(opts.mask.indexOf("2")==opts.mask.length-1&&isValid){var dayMonthValue=maskset.buffer.join("").substr(4,4)+chrs;if(dayMonthValue!=opts.leapday)return!0;var year=parseInt(maskset.buffer.join("").substr(0,4),10);return year%4===0?year%100===0?year%400===0?!0:!1:!0:!1}return isValid},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){isNaN(maskset.buffer[pos+1])||(chrs+=maskset.buffer[pos+1]);var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!=frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=1==chrs.length?opts.regex.val2pre(opts.separator).test(frontValue+chrs):opts.regex.val2(opts.separator).test(frontValue+chrs);return strict||isValid||!(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos})},cardinality:1}]},y:{validator:function(chrs,maskset,pos,strict,opts){if(opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear)){var dayMonthValue=maskset.buffer.join("").substr(0,6);if(dayMonthValue!=opts.leapday)return!0;var year=parseInt(chrs,10);return year%4===0?year%100===0?year%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,1);if(isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,2),isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos}}return isValid},cardinality:1},{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);
if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2);if(isValid=opts.isInYearRange(chrs[0]+yearPrefix[1]+chrs[1],opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2),opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear)){var dayMonthValue=maskset.buffer.join("").substr(0,6);if(dayMonthValue!=opts.leapday)isValid=!0;else{var year=parseInt(chrs,10);isValid=year%4===0?year%100===0?year%400===0?!0:!1:!0:!1}}else isValid=!1;if(isValid)return maskset.buffer[pos-1]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),maskset.buffer[pos++]=chrs.charAt(0),{refreshFromBuffer:{start:pos-3,end:pos},pos:pos}}return isValid},cardinality:2},{validator:function(chrs,maskset,pos,strict,opts){return opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(separator){var escapedSeparator=$.inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])")},val2:function(separator){var escapedSeparator=$.inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode==$.inputmask.keyCode.RIGHT){var today=new Date;$input.val((today.getMonth()+1).toString()+today.getDate().toString()+today.getFullYear().toString()),$input.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode==$.inputmask.keyCode.RIGHT){var today=new Date;$input.val(today.getFullYear().toString()+(today.getMonth()+1).toString()+today.getDate().toString()),$input.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(chrs,maskset,pos,strict,opts){if("24"==opts.hourFormat&&24==parseInt(chrs,10))return maskset.buffer[pos-1]="0",maskset.buffer[pos]="0",{refreshFromBuffer:{start:pos-1,end:pos},c:"0"};var isValid=opts.regex.hrs.test(chrs);if(!strict&&!isValid&&(chrs.charAt(1)==opts.timeseparator||-1!="-.:".indexOf(chrs.charAt(1)))&&(isValid=opts.regex.hrs.test("0"+chrs.charAt(0))))return maskset.buffer[pos-1]="0",maskset.buffer[pos]=chrs.charAt(0),pos++,{refreshFromBuffer:{start:pos-2,end:pos},pos:pos,c:opts.timeseparator};if(isValid&&"24"!==opts.hourFormat&&opts.regex.hrs24.test(chrs)){var tmp=parseInt(chrs,10);return 24==tmp?(maskset.buffer[pos+5]="a",maskset.buffer[pos+6]="m"):(maskset.buffer[pos+5]="p",maskset.buffer[pos+6]="m"),tmp-=12,10>tmp?(maskset.buffer[pos]=tmp.toString(),maskset.buffer[pos-1]="0"):(maskset.buffer[pos]=tmp.toString().charAt(1),maskset.buffer[pos-1]=tmp.toString().charAt(0)),{refreshFromBuffer:{start:pos-1,end:pos+6},c:maskset.buffer[pos]}}return isValid},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.hrspre.test(chrs);return strict||isValid||!(isValid=opts.regex.hrs.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.mspre.test(chrs);return strict||isValid||!(isValid=opts.regex.ms.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos})},cardinality:1}]},t:{validator:function(chrs,maskset,pos,strict,opts){return opts.regex.ampm.test(chrs+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),$.fn.inputmask}(jQuery),function($){return $.extend($.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),$.extend($.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(chrs,maskset,pos,strict,opts){return!0},cardinality:8,prevalidator:function(){for(var result=[],prefixLimit=8,i=0;prefixLimit>i;i++)result[i]=function(){var j=i;return{validator:function(chrs,maskset,pos,strict,opts){if(opts.regex["urlpre"+(j+1)]){var k,tmp=chrs;j+1-chrs.length>0&&(tmp=maskset.buffer.join("").substring(0,j+1-chrs.length)+""+tmp);var isValid=opts.regex["urlpre"+(j+1)].test(tmp);if(!strict&&!isValid){for(pos-=j,k=0;k<opts.defaultPrefix.length;k++)maskset.buffer[pos]=opts.defaultPrefix[k],pos++;for(k=0;k<tmp.length-1;k++)maskset.buffer[pos]=tmp[k],pos++;return{pos:pos}}return isValid}return!1},cardinality:j}}();return result}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(chrs,maskset,pos,strict,opts){return pos-1>-1&&"."!=maskset.buffer[pos-1]?(chrs=maskset.buffer[pos-1]+chrs,chrs=pos-2>-1&&"."!=maskset.buffer[pos-2]?maskset.buffer[pos-2]+chrs:"0"+chrs):chrs="00"+chrs,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(pastedValue,opts){return pastedValue=pastedValue.toLowerCase(),pastedValue.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),$.fn.inputmask}(jQuery),function($){return $.extend($.inputmask.defaults.aliases,{numeric:{mask:function(opts){function autoEscape(txt){for(var escapedTxt="",i=0;i<txt.length;i++)escapedTxt+=opts.definitions[txt[i]]?"\\"+txt[i]:txt[i];return escapedTxt}if(0!==opts.repeat&&isNaN(opts.integerDigits)&&(opts.integerDigits=opts.repeat),opts.repeat=0,opts.groupSeparator==opts.radixPoint&&("."==opts.radixPoint?opts.groupSeparator=",":","==opts.radixPoint?opts.groupSeparator=".":opts.groupSeparator="")," "===opts.groupSeparator&&(opts.skipOptionalPartCharacter=void 0),opts.autoGroup=opts.autoGroup&&""!=opts.groupSeparator,opts.autoGroup&&("string"==typeof opts.groupSize&&isFinite(opts.groupSize)&&(opts.groupSize=parseInt(opts.groupSize)),isFinite(opts.integerDigits))){var seps=Math.floor(opts.integerDigits/opts.groupSize),mod=opts.integerDigits%opts.groupSize;opts.integerDigits=parseInt(opts.integerDigits)+(0==mod?seps-1:seps)}opts.placeholder.length>1&&(opts.placeholder=opts.placeholder.charAt(0)),opts.radixFocus=opts.radixFocus&&"0"==opts.placeholder,opts.definitions[";"]=opts.definitions["~"];var mask=autoEscape(opts.prefix);return mask+="[+]",mask+="~{1,"+opts.integerDigits+"}",void 0!=opts.digits&&(isNaN(opts.digits)||parseInt(opts.digits)>0)&&(mask+=opts.digitsOptional?"["+(opts.decimalProtect?":":opts.radixPoint)+";{"+opts.digits+"}]":(opts.decimalProtect?":":opts.radixPoint)+";{"+opts.digits+"}"),""!=opts.negationSymbol.back&&(mask+="[-]"),mask+=autoEscape(opts.suffix),opts.greedy=!1,mask},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(buffer,pos,reformatOnly,opts){var suffixStripped=!1;buffer.length>=opts.suffix.length&&buffer.join("").indexOf(opts.suffix)==buffer.length-opts.suffix.length&&(buffer.length=buffer.length-opts.suffix.length,suffixStripped=!0),pos=pos>=buffer.length?buffer.length-1:pos<opts.prefix.length?opts.prefix.length:pos;var needsRefresh=!1,charAtPos=buffer[pos];if(""==opts.groupSeparator||-1!=$.inArray(opts.radixPoint,buffer)&&pos>=$.inArray(opts.radixPoint,buffer)||new RegExp("["+$.inputmask.escapeRegex(opts.negationSymbol.front)+"+]").test(charAtPos)){if(suffixStripped)for(var i=0,l=opts.suffix.length;l>i;i++)buffer.push(opts.suffix.charAt(i));return{pos:pos}}var cbuf=buffer.slice();charAtPos==opts.groupSeparator&&(cbuf.splice(pos--,1),charAtPos=cbuf[pos]),reformatOnly?cbuf[pos]="?":cbuf.splice(pos,0,"?");var bufVal=cbuf.join(""),bufValOrigin=bufVal;if(bufVal.length>0&&opts.autoGroup||reformatOnly&&-1!=bufVal.indexOf(opts.groupSeparator)){var escapedGroupSeparator=$.inputmask.escapeRegex(opts.groupSeparator);needsRefresh=0==bufVal.indexOf(opts.groupSeparator),bufVal=bufVal.replace(new RegExp(escapedGroupSeparator,"g"),"");var radixSplit=bufVal.split(opts.radixPoint);if(bufVal=""==opts.radixPoint?bufVal:radixSplit[0],bufVal!=opts.prefix+"?0"&&bufVal.length>=opts.groupSize+opts.prefix.length)for(var reg=new RegExp("([-+]?[\\d?]+)([\\d?]{"+opts.groupSize+"})");reg.test(bufVal);)bufVal=bufVal.replace(reg,"$1"+opts.groupSeparator+"$2"),bufVal=bufVal.replace(opts.groupSeparator+opts.groupSeparator,opts.groupSeparator);""!=opts.radixPoint&&radixSplit.length>1&&(bufVal+=opts.radixPoint+radixSplit[1])}needsRefresh=bufValOrigin!=bufVal,buffer.length=bufVal.length;for(var i=0,l=bufVal.length;l>i;i++)buffer[i]=bufVal.charAt(i);var newPos=$.inArray("?",buffer);if(reformatOnly?buffer[newPos]=charAtPos:buffer.splice(newPos,1),!needsRefresh&&suffixStripped)for(var i=0,l=opts.suffix.length;l>i;i++)buffer.push(opts.suffix.charAt(i));return{pos:newPos,refreshFromBuffer:needsRefresh,buffer:buffer}},onBeforeWrite:function(e,buffer,caretPos,opts){if(e&&"blur"==e.type){var maskedValue=buffer.join(""),processValue=maskedValue.replace(opts.prefix,"");if(processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace($.inputmask.escapeRegex(opts.radixPoint),".")),isFinite(processValue)&&isFinite(opts.min)&&parseFloat(processValue)<parseFloat(opts.min))return $.extend(!0,{refreshFromBuffer:!0,buffer:(opts.prefix+opts.min).split("")},opts.postFormat((opts.prefix+opts.min).split(""),0,!0,opts));var tmpBufSplit=""!=opts.radixPoint?buffer.join("").split(opts.radixPoint):[buffer.join("")],matchRslt=tmpBufSplit[0].match(opts.regex.integerPart(opts)),matchRsltDigits=2==tmpBufSplit.length?tmpBufSplit[1].match(opts.regex.integerNPart(opts)):void 0;!matchRslt||matchRslt[0]!=opts.negationSymbol.front+"0"&&matchRslt[0]!=opts.negationSymbol.front&&"+"!=matchRslt[0]||void 0!=matchRsltDigits&&!matchRsltDigits[0].match(/^0+$/)||buffer.splice(matchRslt.index,1);var radixPosition=$.inArray(opts.radixPoint,buffer);if(-1!=radixPosition&&isFinite(opts.digits)&&!opts.digitsOptional){for(var i=1;i<=opts.digits;i++)(void 0==buffer[radixPosition+i]||buffer[radixPosition+i]==opts.placeholder.charAt(0))&&(buffer[radixPosition+i]="0");return{refreshFromBuffer:!0,buffer:buffer}}}if(opts.autoGroup){var rslt=opts.postFormat(buffer,caretPos-1,!0,opts);return rslt.caret=caretPos<=opts.prefix.length?rslt.pos:rslt.pos+1,rslt}},regex:{integerPart:function(opts){return new RegExp("["+$.inputmask.escapeRegex(opts.negationSymbol.front)+"+]?\\d+")},integerNPart:function(opts){return new RegExp("[\\d"+$.inputmask.escapeRegex(opts.groupSeparator)+"]+")}},signHandler:function(chrs,maskset,pos,strict,opts){if(!strict&&opts.allowMinus&&"-"===chrs||opts.allowPlus&&"+"===chrs){var matchRslt=maskset.buffer.join("").match(opts.regex.integerPart(opts));if(matchRslt&&matchRslt[0].length>0)return maskset.buffer[matchRslt.index]==("-"===chrs?"+":opts.negationSymbol.front)?"-"==chrs?""!=opts.negationSymbol.back?{pos:matchRslt.index,c:opts.negationSymbol.front,remove:matchRslt.index,caret:pos,insert:{pos:maskset.buffer.length-opts.suffix.length-1,c:opts.negationSymbol.back}}:{pos:matchRslt.index,c:opts.negationSymbol.front,remove:matchRslt.index,caret:pos}:""!=opts.negationSymbol.back?{pos:matchRslt.index,c:"+",remove:[matchRslt.index,maskset.buffer.length-opts.suffix.length-1],caret:pos}:{pos:matchRslt.index,c:"+",remove:matchRslt.index,caret:pos}:maskset.buffer[matchRslt.index]==("-"===chrs?opts.negationSymbol.front:"+")?"-"==chrs&&""!=opts.negationSymbol.back?{remove:[matchRslt.index,maskset.buffer.length-opts.suffix.length-1],caret:pos-1}:{remove:matchRslt.index,caret:pos-1}:"-"==chrs?""!=opts.negationSymbol.back?{pos:matchRslt.index,c:opts.negationSymbol.front,caret:pos+1,insert:{pos:maskset.buffer.length-opts.suffix.length,c:opts.negationSymbol.back}}:{pos:matchRslt.index,c:opts.negationSymbol.front,caret:pos+1}:{pos:matchRslt.index,c:chrs,caret:pos+1}}return!1},radixHandler:function(chrs,maskset,pos,strict,opts){if(!strict&&chrs===opts.radixPoint&&opts.digits>0){var radixPos=$.inArray(opts.radixPoint,maskset.buffer),integerValue=maskset.buffer.join("").match(opts.regex.integerPart(opts));if(-1!=radixPos&&maskset.validPositions[radixPos])return maskset.validPositions[radixPos-1]?{caret:radixPos+1}:{pos:integerValue.index,c:integerValue[0],caret:radixPos+1};if(!integerValue||"0"==integerValue[0]&&integerValue.index+1!=pos)return maskset.buffer[integerValue?integerValue.index:pos]="0",{pos:(integerValue?integerValue.index:pos)+1}}return!1},leadingZeroHandler:function(chrs,maskset,pos,strict,opts){var matchRslt=maskset.buffer.join("").match(opts.regex.integerNPart(opts)),radixPosition=$.inArray(opts.radixPoint,maskset.buffer);if(matchRslt&&!strict&&(-1==radixPosition||radixPosition>=pos))if(0==matchRslt[0].indexOf("0")){pos<opts.prefix.length&&(pos=matchRslt.index);var _radixPosition=$.inArray(opts.radixPoint,maskset._buffer),digitsMatch=maskset._buffer&&maskset.buffer.slice(radixPosition).join("")==maskset._buffer.slice(_radixPosition).join("")||0==parseInt(maskset.buffer.slice(radixPosition+1).join("")),integerMatch=maskset._buffer&&maskset.buffer.slice(matchRslt.index,radixPosition).join("")==maskset._buffer.slice(opts.prefix.length,_radixPosition).join("")||"0"==maskset.buffer.slice(matchRslt.index,radixPosition).join("");if(-1==radixPosition||digitsMatch&&integerMatch)return maskset.buffer.splice(matchRslt.index,1),pos=pos>matchRslt.index?pos-1:matchRslt.index,{pos:pos,remove:matchRslt.index};if(matchRslt.index+1==pos||"0"==chrs)return maskset.buffer.splice(matchRslt.index,1),pos=matchRslt.index,{pos:pos,remove:matchRslt.index}}else if("0"===chrs&&pos<=matchRslt.index&&matchRslt[0]!=opts.groupSeparator)return!1;return!0},postValidation:function(buffer,opts){var isValid=!0,maskedValue=buffer.join(""),processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace($.inputmask.escapeRegex(opts.radixPoint),".")),processValue=processValue.replace(new RegExp("^"+$.inputmask.escapeRegex(opts.negationSymbol.front)),"-"),processValue=processValue.replace(new RegExp($.inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),isFinite(processValue)&&isFinite(opts.max)&&(isValid=parseFloat(processValue)<=parseFloat(opts.max)),isValid},definitions:{"~":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);if(!isValid&&(isValid=opts.radixHandler(chrs,maskset,pos,strict,opts),!isValid&&(isValid=strict?new RegExp("[0-9"+$.inputmask.escapeRegex(opts.groupSeparator)+"]").test(chrs):new RegExp("[0-9]").test(chrs),isValid===!0&&(isValid=opts.leadingZeroHandler(chrs,maskset,pos,strict,opts),isValid===!0)))){var radixPosition=$.inArray(opts.radixPoint,maskset.buffer);isValid=opts.digitsOptional===!1&&pos>radixPosition&&!strict?{pos:pos,remove:pos}:{pos:pos}}return isValid},cardinality:1,prevalidator:null},"+":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);return!isValid&&(strict&&opts.allowMinus&&chrs===opts.negationSymbol.front||opts.allowMinus&&"-"==chrs||opts.allowPlus&&"+"==chrs)&&(isValid="-"==chrs?""!=opts.negationSymbol.back?{pos:pos,c:"-"===chrs?opts.negationSymbol.front:"+",caret:pos+1,insert:{pos:maskset.buffer.length,c:opts.negationSymbol.back}}:{pos:pos,c:"-"===chrs?opts.negationSymbol.front:"+",caret:pos+1}:!0),isValid},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);return!isValid&&strict&&opts.allowMinus&&chrs===opts.negationSymbol.back&&(isValid=!0),isValid},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.signHandler(chrs,maskset,pos,strict,opts);if(!isValid){var radix="["+$.inputmask.escapeRegex(opts.radixPoint)+"]";isValid=new RegExp(radix).test(chrs),isValid&&maskset.validPositions[pos]&&maskset.validPositions[pos].match.placeholder==opts.radixPoint&&(isValid={caret:pos+1})}return isValid},cardinality:1,prevalidator:null,placeholder:function(opts){return opts.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(maskedValue,unmaskedValue,opts){var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""),opts.unmaskAsNumber?(processValue=processValue.replace($.inputmask.escapeRegex.call(this,opts.radixPoint),"."),Number(processValue)):processValue},isComplete:function(buffer,opts){var maskedValue=buffer.join(""),bufClone=buffer.slice();if(opts.postFormat(bufClone,0,!0,opts),bufClone.join("")!=maskedValue)return!1;var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace($.inputmask.escapeRegex(opts.radixPoint),".")),isFinite(processValue)},onBeforeMask:function(initialValue,opts){if(""!=opts.radixPoint&&isFinite(initialValue))initialValue=initialValue.toString().replace(".",opts.radixPoint);else{var kommaMatches=initialValue.match(/,/g),dotMatches=initialValue.match(/\./g);dotMatches&&kommaMatches?dotMatches.length>kommaMatches.length?(initialValue=initialValue.replace(/\./g,""),initialValue=initialValue.replace(",",opts.radixPoint)):kommaMatches.length>dotMatches.length?(initialValue=initialValue.replace(/,/g,""),initialValue=initialValue.replace(".",opts.radixPoint)):initialValue=initialValue.indexOf(".")<initialValue.indexOf(",")?initialValue.replace(/\./g,""):initialValue=initialValue.replace(/,/g,""):initialValue=initialValue.replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),"")}return 0==opts.digits&&(-1!=initialValue.indexOf(".")?initialValue=initialValue.substring(0,initialValue.indexOf(".")):-1!=initialValue.indexOf(",")&&(initialValue=initialValue.substring(0,initialValue.indexOf(",")))),initialValue},canClearPosition:function(maskset,position,lvp,strict,opts){var positionInput=maskset.validPositions[position].input,canClear=positionInput!=opts.radixPoint&&isFinite(positionInput)||position==lvp||positionInput==opts.groupSeparator||positionInput==opts.negationSymbol.front||positionInput==opts.negationSymbol.back;if(canClear&&isFinite(positionInput)){var matchRslt;if(!strict&&maskset.buffer){matchRslt=maskset.buffer.join("").substr(0,position).match(opts.regex.integerNPart(opts));var pos=position+1,isNull=null==matchRslt||0==parseInt(matchRslt[0].replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""));if(isNull)for(;maskset.validPositions[pos]&&(maskset.validPositions[pos].input==opts.groupSeparator||"0"==maskset.validPositions[pos].input);)delete maskset.validPositions[pos],pos++}var buffer=[];for(var vp in maskset.validPositions)buffer.push(maskset.validPositions[vp].input);matchRslt=buffer.join("").match(opts.regex.integerNPart(opts));var radixPosition=$.inArray(opts.radixPoint,maskset.buffer);if(matchRslt&&(-1==radixPosition||radixPosition>=position))if(0==matchRslt[0].indexOf("0"))canClear=matchRslt.index!=position||-1==radixPosition;else{var intPart=parseInt(matchRslt[0].replace(new RegExp($.inputmask.escapeRegex(opts.groupSeparator),"g"),""));-1!=radixPosition&&10>intPart&&"0"==opts.placeholder.charAt(0)&&(maskset.validPositions[position].input="0",maskset.p=opts.prefix.length+1,canClear=!1)}}return canClear}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),$.fn.inputmask}(jQuery),function($){return $.extend($.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(opts){opts.definitions["#"]=opts.definitions[9];var maskList=[];return $.ajax({url:opts.url,async:!1,dataType:"json",success:function(response){maskList=response},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+" - "+opts.url)}}),maskList=maskList.sort(function(a,b){return(a.mask||a)<(b.mask||b)?-1:1})},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(value,opts){var processedValue=value.replace(/^0/g,"");return(processedValue.indexOf(opts.countrycode)>1||-1==processedValue.indexOf(opts.countrycode))&&(processedValue="+"+opts.countrycode+processedValue),processedValue}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),$.fn.inputmask}(jQuery),function($){return $.extend($.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(buffer,opts){return new RegExp(opts.regex).test(buffer.join(""))},definitions:{r:{validator:function(chrs,maskset,pos,strict,opts){function regexToken(isGroup,isQuantifier){this.matches=[],this.isGroup=isGroup||!1,this.isQuantifier=isQuantifier||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function analyseRegex(){var match,m,currentToken=new regexToken,opengroups=[];for(opts.regexTokens=[];match=opts.tokenizer.exec(opts.regex);)switch(m=match[0],m.charAt(0)){case"(":opengroups.push(new regexToken(!0));break;case")":var groupToken=opengroups.pop();opengroups.length>0?opengroups[opengroups.length-1].matches.push(groupToken):currentToken.matches.push(groupToken);break;case"{":case"+":case"*":var quantifierToken=new regexToken(!1,!0);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1==mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if(quantifierToken.quantifier={min:mq0,max:mq1},opengroups.length>0){var matches=opengroups[opengroups.length-1].matches;if(match=matches.pop(),!match.isGroup){var groupToken=new regexToken(!0);groupToken.matches.push(match),match=groupToken}matches.push(match),matches.push(quantifierToken)}else{if(match=currentToken.matches.pop(),!match.isGroup){var groupToken=new regexToken(!0);groupToken.matches.push(match),match=groupToken}currentToken.matches.push(match),currentToken.matches.push(quantifierToken)}break;default:opengroups.length>0?opengroups[opengroups.length-1].matches.push(m):currentToken.matches.push(m)}currentToken.matches.length>0&&opts.regexTokens.push(currentToken)}function validateRegexToken(token,fromGroup){var isvalid=!1;fromGroup&&(regexPart+="(",openGroupCount++);for(var mndx=0;mndx<token.matches.length;mndx++){var matchToken=token.matches[mndx];if(1==matchToken.isGroup)isvalid=validateRegexToken(matchToken,!0);else if(1==matchToken.isQuantifier){var crrntndx=$.inArray(matchToken,token.matches),matchGroup=token.matches[crrntndx-1],regexPartBak=regexPart;if(isNaN(matchToken.quantifier.max)){for(;matchToken.repeaterPart&&matchToken.repeaterPart!=regexPart&&matchToken.repeaterPart.length>regexPart.length&&!(isvalid=validateRegexToken(matchGroup,!0)););isvalid=isvalid||validateRegexToken(matchGroup,!0),isvalid&&(matchToken.repeaterPart=regexPart),regexPart=regexPartBak+matchToken.quantifier.max}else{for(var i=0,qm=matchToken.quantifier.max-1;qm>i&&!(isvalid=validateRegexToken(matchGroup,!0));i++);regexPart=regexPartBak+"{"+matchToken.quantifier.min+","+matchToken.quantifier.max+"}"}}else if(void 0!=matchToken.matches)for(var k=0;k<matchToken.length&&!(isvalid=validateRegexToken(matchToken[k],fromGroup));k++);else{var testExp;if("["==matchToken.charAt(0)){testExp=regexPart,testExp+=matchToken;for(var j=0;openGroupCount>j;j++)testExp+=")";var exp=new RegExp("^("+testExp+")$");isvalid=exp.test(bufferStr)}else for(var l=0,tl=matchToken.length;tl>l;l++)if("\\"!=matchToken.charAt(l)){testExp=regexPart,testExp+=matchToken.substr(0,l+1),testExp=testExp.replace(/\|$/,"");for(var j=0;openGroupCount>j;j++)testExp+=")";var exp=new RegExp("^("+testExp+")$");if(isvalid=exp.test(bufferStr))break}regexPart+=matchToken}if(isvalid)break}return fromGroup&&(regexPart+=")",openGroupCount--),isvalid}null==opts.regexTokens&&analyseRegex();var cbuffer=maskset.buffer.slice(),regexPart="",isValid=!1,openGroupCount=0;cbuffer.splice(pos,0,chrs);for(var bufferStr=cbuffer.join(""),i=0;i<opts.regexTokens.length;i++){var regexToken=opts.regexTokens[i];if(isValid=validateRegexToken(regexToken,regexToken.isGroup))break}return isValid},cardinality:1}}}}),$.fn.inputmask}(jQuery),function($){"use strict";$.fn.fileinputLocales={};var isIE,isEdge,handler,previewCache,getNum,hasFileAPISupport,hasDragDropSupport,hasFileUploadSupport,addCss,STYLE_SETTING,OBJECT_PARAMS,DEFAULT_PREVIEW,defaultFileActionSettings,tMain1,tMain2,tPreview,tIcon,tClose,tCaption,tBtnDefault,tBtnLink,tBtnBrowse,tModal,tProgress,tFooter,tActions,tActionDelete,tActionUpload,tZoom,tGeneric,tHtml,tImage,tText,tVideo,tAudio,tFlash,tObject,tOther,defaultLayoutTemplates,defaultPreviewTemplates,defaultPreviewTypes,defaultPreviewSettings,defaultFileTypeSettings,isEmpty,isArray,isSet,getElement,uniqId,htmlEncode,replaceTags,objUrl,FileInput;isIE=function(ver){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===ver)return new RegExp("msie\\s"+ver,"i").test(navigator.userAgent);var status,div=document.createElement("div");return div.innerHTML="<!--[if IE "+ver+"]> <i></i> <![endif]-->",status=div.getElementsByTagName("i").length,document.body.appendChild(div),div.parentNode.removeChild(div),status},isEdge=function(){return new RegExp("Edge/[0-9]+","i").test(navigator.userAgent)},handler=function($el,event,callback,skipNS){var ev=skipNS?event:event+".fileinput";$el.off(ev).on(ev,callback)},previewCache={data:{},init:function(obj){var content=obj.initialPreview,id=obj.id;content.length>0&&!isArray(content)&&(content=content.split(obj.initialPreviewDelimiter)),previewCache.data[id]={content:content,config:obj.initialPreviewConfig,tags:obj.initialPreviewThumbTags,delimiter:obj.initialPreviewDelimiter,template:obj.previewGenericTemplate,msg:function(n){return obj.getMsgSelected(n)},initId:obj.previewInitId,footer:obj.getLayoutTemplate("footer").replace(/\{progress}/g,obj.renderThumbProgress()),isDelete:obj.initialPreviewShowDelete,caption:obj.initialCaption,actions:function(showUpload,showDelete,disabled,url,key){return obj.renderFileActions(showUpload,showDelete,disabled,url,key)}}},fetch:function(id){return previewCache.data[id].content.filter(function(n){return null!==n})},count:function(id,all){return previewCache.data[id]&&previewCache.data[id].content?all?previewCache.data[id].content.length:previewCache.fetch(id).length:0},get:function(id,i,isDisabled){var out,$tmp,ind="init_"+i,data=previewCache.data[id],config=data.config[i],previewId=data.initId+"-"+ind,frameClass=" file-preview-initial";return isDisabled=void 0===isDisabled?!0:isDisabled,null===data.content[i]?"":(isEmpty(config)||isEmpty(config.frameClass)||(frameClass+=" "+config.frameClass),out=data.template.replace(/\{previewId}/g,previewId).replace(/\{frameClass}/g,frameClass).replace(/\{fileindex}/g,ind).replace(/\{content}/g,data.content[i]).replace(/\{footer}/g,previewCache.footer(id,i,isDisabled)),data.tags.length&&data.tags[i]&&(out=replaceTags(out,data.tags[i])),isEmpty(config)||isEmpty(config.frameAttr)||($tmp=$(document.createElement("div")).html(out),$tmp.find(".file-preview-initial").attr(config.frameAttr),out=$tmp.html(),$tmp.remove()),out)},add:function(id,content,config,tags,append){var index,data=$.extend(!0,{},previewCache.data[id]);return isArray(content)||(content=content.split(data.delimiter)),append?(index=data.content.push(content)-1,data.config[index]=config,data.tags[index]=tags):(index=content.length,data.content=content,data.config=config,data.tags=tags),previewCache.data[id]=data,index},set:function(id,content,config,tags,append){var i,chk,data=$.extend(!0,{},previewCache.data[id]);if(content&&content.length&&(isArray(content)||(content=content.split(data.delimiter)),chk=content.filter(function(n){return null!==n}),chk.length)){if(void 0===data.content&&(data.content=[]),void 0===data.config&&(data.config=[]),void 0===data.tags&&(data.tags=[]),append){for(i=0;i<content.length;i++)content[i]&&data.content.push(content[i]);for(i=0;i<config.length;i++)config[i]&&data.config.push(config[i]);for(i=0;i<tags.length;i++)tags[i]&&data.tags.push(tags[i])}else data.content=content,data.config=config,data.tags=tags;previewCache.data[id]=data}},unset:function(id,index){var chk=previewCache.count(id);if(chk){if(1===chk)return previewCache.data[id].content=[],void(previewCache.data[id].config=[]);previewCache.data[id].content[index]=null,previewCache.data[id].config[index]=null}},out:function(id){var caption,html="",data=previewCache.data[id],len=previewCache.count(id,!0);if(0===len)return{content:"",caption:""};for(var i=0;len>i;i++)html+=previewCache.get(id,i);return caption=data.msg(previewCache.count(id)),{content:html,caption:caption}},footer:function(id,i,isDisabled){var data=previewCache.data[id];if(isDisabled=void 0===isDisabled?!0:isDisabled,
0===data.config.length||isEmpty(data.config[i]))return"";var config=data.config[i],caption=isSet("caption",config)?config.caption:"",width=isSet("width",config)?config.width:"auto",url=isSet("url",config)?config.url:!1,key=isSet("key",config)?config.key:null,disabled=url===!1&&isDisabled,actions=data.isDelete?data.actions(!1,!0,disabled,url,key):"",footer=data.footer.replace(/\{actions}/g,actions);return footer.replace(/\{caption}/g,caption).replace(/\{width}/g,width).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}},getNum=function(num,def){return def=def||0,"number"==typeof num?num:("string"==typeof num&&(num=parseFloat(num)),isNaN(num)?def:num)},hasFileAPISupport=function(){return window.File&&window.FileReader},hasDragDropSupport=function(){var div=document.createElement("div");return!isIE(9)&&!isEdge()&&(void 0!==div.draggable||void 0!==div.ondragstart&&void 0!==div.ondrop)},hasFileUploadSupport=function(){return hasFileAPISupport()&&window.FormData},addCss=function($el,css){$el.removeClass(css).addClass(css)},STYLE_SETTING='style="width:{width};height:{height};"',OBJECT_PARAMS='      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n',DEFAULT_PREVIEW='<div class="file-preview-other">\n   <span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',defaultFileActionSettings={removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."},tMain1='{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',tMain2='{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',tPreview='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',tClose='<div class="close fileinput-remove">&times;</div>\n',tIcon='<span class="glyphicon glyphicon-file kv-caption-icon"></span>',tCaption='<div tabindex="500" class="form-control file-caption {class}">\n   <div class="file-caption-name"></div>\n</div>\n',tBtnDefault='<button type="{type}" tabindex="500" title="{title}" class="{css}"{status}>{icon}{label}</button>',tBtnLink='<a href="{href}" tabindex="500" title="{title}" class="{css}"{status}>{icon}{label}</a>',tBtnBrowse='<div tabindex="500" class="{css}"{status}>{icon}{label}</div>',tModal='<div id="{id}" class="file-preview-detail-modal modal fade" tabindex="-1">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">{heading} <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n           <pre>{body}</pre>\n      </div>\n    </div>\n  </div>\n</div>',tProgress='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     </div>\n</div>',tFooter='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">{caption}</div>\n    {progress} {actions}\n</div>',tActions='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload}{delete}{other}    </div>\n    <div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>\n    <div class="clearfix"></div>\n</div>',tActionDelete='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}"{dataUrl}{dataKey}>{removeIcon}</button>\n',tActionUpload='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">   {uploadIcon}\n</button>\n',tZoom='<button type="button" class="btn btn-default btn-xs btn-block" title="{zoomTitle}: {caption}" onclick="{dialog}">\n   {zoomInd}\n</button>\n',tGeneric='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   {content}\n   {footer}\n</div>\n',tHtml='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n    <object class="file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n       '+DEFAULT_PREVIEW+"\n    </object>\n   {footer}\n</div>",tImage='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <img src="{data}" class="file-preview-image" title="{caption}" alt="{caption}" '+STYLE_SETTING+">\n   {footer}\n</div>\n",tText='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <pre class="file-preview-text" title="{caption}" '+STYLE_SETTING+">{data}</pre>\n   {zoom}\n   {footer}\n</div>",tVideo='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+STYLE_SETTING+'>\n   <video width="{width}" height="{height}" controls>\n       <source src="{data}" type="{type}">\n       '+DEFAULT_PREVIEW+"\n   </video>\n   {footer}\n</div>\n",tAudio='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+STYLE_SETTING+'>\n   <audio controls>\n       <source src="{data}" type="{type}">\n       '+DEFAULT_PREVIEW+"\n   </audio>\n   {footer}\n</div>",tFlash='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+STYLE_SETTING+'>\n   <object class="file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+OBJECT_PARAMS+"       "+DEFAULT_PREVIEW+"\n   </object>\n   {footer}\n</div>\n",tObject='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+STYLE_SETTING+'>\n   <object class="file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n       <param name="movie" value="{caption}" />\n'+OBJECT_PARAMS+"         "+DEFAULT_PREVIEW+"\n   </object>\n   {footer}\n</div>",tOther='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+STYLE_SETTING+'>\n   <div class="file-preview-other-frame">\n   '+DEFAULT_PREVIEW+'\n   </div>\n   <div class="file-preview-other-footer">{footer}</div>\n</div>',defaultLayoutTemplates={main1:tMain1,main2:tMain2,preview:tPreview,close:tClose,zoom:tZoom,icon:tIcon,caption:tCaption,modal:tModal,progress:tProgress,footer:tFooter,actions:tActions,actionDelete:tActionDelete,actionUpload:tActionUpload,btnDefault:tBtnDefault,btnLink:tBtnLink,btnBrowse:tBtnBrowse},defaultPreviewTemplates={generic:tGeneric,html:tHtml,image:tImage,text:tText,video:tVideo,audio:tAudio,flash:tFlash,object:tObject,other:tOther},defaultPreviewTypes=["image","html","text","video","audio","flash","object"],defaultPreviewSettings={image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"160px",height:"136px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},defaultFileTypeSettings={image:function(vType,vName){return void 0!==vType?vType.match("image.*"):vName.match(/\.(gif|png|jpe?g)$/i)},html:function(vType,vName){return void 0!==vType?"text/html"===vType:vName.match(/\.(htm|html)$/i)},text:function(vType,vName){return void 0!==vType&&vType.match("text.*")||vName.match(/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(vType,vName){return void 0!==vType&&vType.match(/\.video\/(ogg|mp4|webm|3gp)$/i)||vName.match(/\.(og?|mp4|webm|3gp)$/i)},audio:function(vType,vName){return void 0!==vType&&vType.match(/\.audio\/(ogg|mp3|wav)$/i)||vName.match(/\.(ogg|mp3|wav)$/i)},flash:function(vType,vName){return void 0!==vType&&"application/x-shockwave-flash"===vType||vName.match(/\.(swf)$/i)},object:function(){return!0},other:function(){return!0}},isEmpty=function(value,trim){return void 0===value||null===value||0===value.length||trim&&""===$.trim(value)},isArray=function(a){return Array.isArray(a)||"[object Array]"===Object.prototype.toString.call(a)},isSet=function(needle,haystack){return"object"==typeof haystack&&needle in haystack},getElement=function(options,param,value){return isEmpty(options)||isEmpty(options[param])?value:$(options[param])},uniqId=function(){return Math.round((new Date).getTime()+100*Math.random())},htmlEncode=function(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags=function(str,tags){var out=str;return tags?($.each(tags,function(key,value){"function"==typeof value&&(value=value()),out=out.split(key).join(value)}),out):out},objUrl=window.URL||window.webkitURL,FileInput=function(element,options){var self=this;self.$element=$(element),self.validate()&&(self.isPreviewable=hasFileAPISupport(),self.isIE9=isIE(9),self.isIE10=isIE(10),self.isPreviewable||self.isIE9?(self.init(options),self.listen()):self.$element.removeClass("file-loading"))},FileInput.prototype={constructor:FileInput,validate:function(){var $exception,self=this;return"file"===self.$element.attr("type")?!0:($exception='<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>',self.$element.after($exception),!1)},init:function(options){var t,self=this,$el=self.$element;$.each(options,function(key,value){switch(key){case"minFileCount":case"maxFileCount":case"maxFileSize":self[key]=getNum(value);break;default:self[key]=value}}),self.fileInputCleared=!1,self.fileBatchCompleted=!0,self.isPreviewable||(self.showPreview=!1),self.uploadFileAttr=isEmpty($el.attr("name"))?"file_data":$el.attr("name"),self.reader=null,self.formdata={},self.clearStack(),self.uploadCount=0,self.uploadStatus={},self.uploadLog=[],self.uploadAsyncCount=0,self.loadedImages=[],self.totalImagesCount=0,self.ajaxRequests=[],self.isError=!1,self.ajaxAborted=!1,self.cancelling=!1,t=self.getLayoutTemplate("progress"),self.progressTemplate=t.replace("{class}",self.progressClass),self.progressCompleteTemplate=t.replace("{class}",self.progressCompleteClass),self.dropZoneEnabled=hasDragDropSupport()&&self.dropZoneEnabled,self.isDisabled=self.$element.attr("disabled")||self.$element.attr("readonly"),self.isUploadable=hasFileUploadSupport()&&!isEmpty(self.uploadUrl),self.slug="function"==typeof options.slugCallback?options.slugCallback:self.slugDefault,self.mainTemplate=self.showCaption?self.getLayoutTemplate("main1"):self.getLayoutTemplate("main2"),self.captionTemplate=self.getLayoutTemplate("caption"),self.previewGenericTemplate=self.getPreviewTemplate("generic"),self.resizeImage&&(self.maxImageWidth||self.maxImageHeight)&&(self.imageCanvas=document.createElement("canvas"),self.imageCanvasContext=self.imageCanvas.getContext("2d")),isEmpty(self.$element.attr("id"))&&self.$element.attr("id",uniqId()),void 0===self.$container?self.$container=self.createContainer():self.refreshContainer(),self.$progress=self.$container.find(".kv-upload-progress"),self.$btnUpload=self.$container.find(".fileinput-upload"),self.$captionContainer=getElement(options,"elCaptionContainer",self.$container.find(".file-caption")),self.$caption=getElement(options,"elCaptionText",self.$container.find(".file-caption-name")),self.$previewContainer=getElement(options,"elPreviewContainer",self.$container.find(".file-preview")),self.$preview=getElement(options,"elPreviewImage",self.$container.find(".file-preview-thumbnails")),self.$previewStatus=getElement(options,"elPreviewStatus",self.$container.find(".file-preview-status")),self.$errorContainer=getElement(options,"elErrorContainer",self.$previewContainer.find(".kv-fileinput-error")),isEmpty(self.msgErrorClass)||addCss(self.$errorContainer,self.msgErrorClass),self.$errorContainer.hide(),self.fileActionSettings=$.extend(defaultFileActionSettings,options.fileActionSettings),self.previewInitId="preview-"+uniqId(),self.id=self.$element.attr("id"),previewCache.init(self),self.initPreview(!0),self.initPreviewDeletes(),self.options=options,self.setFileDropZoneTitle(),self.$element.removeClass("file-loading"),self.$element.attr("disabled")&&self.disable()},parseError:function(jqXHR,errorThrown,fileName){var self=this,errMsg=$.trim(errorThrown+""),dot="."===errMsg.slice(-1)?"":".",text=void 0!==jqXHR.responseJSON&&void 0!==jqXHR.responseJSON.error?jqXHR.responseJSON.error:jqXHR.responseText;return self.cancelling&&self.msgUploadAborted&&(errMsg=self.msgUploadAborted),self.showAjaxErrorDetails&&text?(text=$.trim(text.replace(/\n\s*\n/g,"\n")),text=text.length>0?"<pre>"+text+"</pre>":"",errMsg+=dot+text):errMsg+=dot,self.cancelling=!1,fileName?"<b>"+fileName+": </b>"+errMsg:errMsg},raise:function(event,params){var self=this,e=$.Event(event);if(void 0!==params?self.$element.trigger(e,params):self.$element.trigger(e),e.isDefaultPrevented())return!1;if(!e.result)return e.result;switch(event){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:self.ajaxAborted=e.result}return!0},getLayoutTemplate:function(t){var self=this,template=isSet(t,self.layoutTemplates)?self.layoutTemplates[t]:defaultLayoutTemplates[t];return isEmpty(self.customLayoutTags)?template:replaceTags(template,self.customLayoutTags)},getPreviewTemplate:function(t){var self=this,template=isSet(t,self.previewTemplates)?self.previewTemplates[t]:defaultPreviewTemplates[t];return isEmpty(self.customPreviewTags)?template:replaceTags(template,self.customPreviewTags)},parseFilePreviewIcon:function(content,fname){var ext,self=this,icn=self.previewFileIcon;return fname&&fname.indexOf(".")>-1&&(ext=fname.split(".").pop(),self.previewFileIconSettings&&self.previewFileIconSettings[ext]&&(icn=self.previewFileIconSettings[ext]),self.previewFileExtSettings&&$.each(self.previewFileExtSettings,function(key,func){self.previewFileIconSettings[key]&&func(ext)&&(icn=self.previewFileIconSettings[key])})),content.indexOf("{previewFileIcon}")>-1?content.replace(/\{previewFileIconClass}/g,self.previewFileIconClass).replace(/\{previewFileIcon}/g,icn):content},getOutData:function(jqXHR,responseData,filesData){var self=this;return jqXHR=jqXHR||{},responseData=responseData||{},filesData=filesData||self.filestack.slice(0)||{},{form:self.formdata,files:filesData,filenames:self.filenames,extra:self.getExtraData(),response:responseData,reader:self.reader,jqXHR:jqXHR}},listen:function(){var self=this,$el=self.$element,$cap=self.$captionContainer,$btnFile=self.$btnFile,$form=$el.closest("form"),$cont=self.$container;handler($el,"change",$.proxy(self.change,self)),handler($btnFile,"click",function(){self.raise("filebrowse"),self.isError&&!self.isUploadable&&self.clear(),$cap.focus()}),handler($form,"reset",$.proxy(self.reset,self)),handler($cont.find(".fileinput-remove:not([disabled])"),"click",$.proxy(self.clear,self)),handler($cont.find(".fileinput-cancel"),"click",$.proxy(self.cancel,self)),self.isUploadable&&self.dropZoneEnabled&&self.showPreview&&self.initDragDrop(),self.isUploadable||handler($form,"submit",$.proxy(self.submitForm,self)),handler(self.$container.find(".fileinput-upload"),"click",function(e){var $form,$btn=$(this),isEnabled=!$btn.hasClass("disabled")&&isEmpty($btn.attr("disabled"));return self.isUploadable?(e.preventDefault(),void(isEnabled&&self.upload())):void(isEnabled&&"submit"!==$btn.attr("type")&&($form=$btn.closest("form"),$form.length&&$form.trigger("submit"),e.preventDefault()))})},submitForm:function(){var self=this,$el=self.$element,files=$el.get(0).files;return files&&self.minFileCount>0&&self.getFileCount(files.length)<self.minFileCount?(self.noFilesError({}),!1):!self.abort({})},abort:function(params){var data,self=this;return self.ajaxAborted&&"object"==typeof self.ajaxAborted&&void 0!==self.ajaxAborted.message?(data=$.extend(self.getOutData(),params),data.abortData=self.ajaxAborted.data||{},data.abortMessage=self.ajaxAborted.message,self.cancel(),self.setProgress(100),self.showUploadError(self.ajaxAborted.message,data,"filecustomerror"),!0):!1},noFilesError:function(params){var self=this,label=self.minFileCount>1?self.filePlural:self.fileSingle,msg=self.msgFilesTooLess.replace("{n}",self.minFileCount).replace("{files}",label),$error=self.$errorContainer;self.addError(msg),self.isError=!0,self.updateFileDetails(0),$error.fadeIn(800),self.raise("fileerror",[params]),self.clearFileInput(),addCss(self.$container,"has-error")},setProgress:function(p,$el){var self=this,pct=Math.min(p,100),template=100>pct?self.progressTemplate:self.progressCompleteTemplate;$el=$el||self.$progress,isEmpty(template)||$el.html(template.replace(/\{percent}/g,pct))},lock:function(){var self=this;self.resetErrors(),self.disable(),self.showRemove&&addCss(self.$container.find(".fileinput-remove"),"hide"),self.showCancel&&self.$container.find(".fileinput-cancel").removeClass("hide"),self.raise("filelock",[self.filestack,self.getExtraData()])},unlock:function(reset){var self=this;void 0===reset&&(reset=!0),self.enable(),self.showCancel&&addCss(self.$container.find(".fileinput-cancel"),"hide"),self.showRemove&&self.$container.find(".fileinput-remove").removeClass("hide"),reset&&self.resetFileStack(),self.raise("fileunlock",[self.filestack,self.getExtraData()])},resetFileStack:function(){var self=this,i=0,newstack=[],newnames=[];self.getThumbs().each(function(){var $thumb=$(this),ind=$thumb.attr("data-fileindex"),file=self.filestack[ind];-1!==ind&&(void 0!==file?(newstack[i]=file,newnames[i]=self.getFileName(file),$thumb.attr({id:self.previewInitId+"-"+i,"data-fileindex":i}),i++):$thumb.attr({id:"uploaded-"+uniqId(),"data-fileindex":"-1"}))}),self.filestack=newstack,self.filenames=newnames},destroy:function(){var self=this,$cont=self.$container;$cont.find(".file-drop-zone").off(),self.$element.insertBefore($cont).off(".fileinput").removeData(),$cont.off().remove()},refresh:function(options){var self=this,$el=self.$element;options=options?$.extend(self.options,options):self.options,self.destroy(),$el.fileinput(options),$el.val()&&$el.trigger("change.fileinput")},initDragDrop:function(){var self=this,$zone=self.$container.find(".file-drop-zone"),allEvents="dragenter.fileinput dragover.fileinput drop.fileinput";handler($zone,"dragenter.fileinput dragover.fileinput",function(e){var hasFiles=$.inArray("Files",e.originalEvent.dataTransfer.types)>-1;return e.stopPropagation(),e.preventDefault(),self.isDisabled||!hasFiles?(e.originalEvent.dataTransfer.effectAllowed="none",void(e.originalEvent.dataTransfer.dropEffect="none")):void addCss($(this),"highlighted")},!0),handler($zone,"dragleave",function(e){e.stopPropagation(),e.preventDefault(),self.isDisabled||$(this).removeClass("highlighted")}),handler($zone,"drop",function(e){e.preventDefault(),self.isDisabled||isEmpty(e.originalEvent.dataTransfer.files)||(self.change(e,"dragdrop"),$(this).removeClass("highlighted"))}),handler($(document),allEvents,function(e){e.stopPropagation(),e.preventDefault()},!0)},setFileDropZoneTitle:function(){var self=this,$zone=self.$container.find(".file-drop-zone");$zone.find("."+self.dropZoneTitleClass).remove(),self.isUploadable&&self.showPreview&&0!==$zone.length&&!(self.getFileStack().length>0)&&self.dropZoneEnabled&&(0===$zone.find(".file-preview-frame").length&&isEmpty(self.defaultPreviewContent)&&$zone.prepend('<div class="'+self.dropZoneTitleClass+'">'+self.dropZoneTitle+"</div>"),self.$container.removeClass("file-input-new"),addCss(self.$container,"file-input-ajax-new"))},errorsExist:function(){var $err,self=this;return self.$errorContainer.find("li").length?!0:($err=$(document.createElement("div")).html(self.$errorContainer.html()),$err.find("span.kv-error-close").remove(),$err.find("ul").remove(),$.trim($err.text()).length?!0:!1)},getMsgSelected:function(n){var self=this,strFiles=1===n?self.fileSingle:self.filePlural;return self.msgSelected.replace("{n}",n).replace("{files}",strFiles)},renderThumbProgress:function(){return'<div class="file-thumb-progress hide">'+this.progressTemplate.replace(/\{percent}/g,"0")+"</div>"},renderFileFooter:function(caption,width){var footer,out,self=this,config=self.fileActionSettings,template=self.getLayoutTemplate("footer");return self.isUploadable?(footer=template.replace(/\{actions}/g,self.renderFileActions(!0,!0,!1,!1,!1)),out=footer.replace(/\{caption}/g,caption).replace(/\{width}/g,width).replace(/\{progress}/g,self.renderThumbProgress()).replace(/\{indicator}/g,config.indicatorNew).replace(/\{indicatorTitle}/g,config.indicatorNewTitle)):out=template.replace(/\{actions}/g,"").replace(/\{caption}/g,caption).replace(/\{progress}/g,"").replace(/\{width}/g,width).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,""),out=replaceTags(out,self.previewThumbTags)},renderFileActions:function(showUpload,showDelete,disabled,url,key){if(!showUpload&&!showDelete)return"";var self=this,vUrl=url===!1?"":' data-url="'+url+'"',vKey=key===!1?"":' data-key="'+key+'"',btnDelete=self.getLayoutTemplate("actionDelete"),btnUpload="",template=self.getLayoutTemplate("actions"),otherButtons=self.otherActionButtons.replace(/\{dataKey}/g,vKey),config=self.fileActionSettings,removeClass=disabled?config.removeClass+" disabled":config.removeClass;return btnDelete=btnDelete.replace(/\{removeClass}/g,removeClass).replace(/\{removeIcon}/g,config.removeIcon).replace(/\{removeTitle}/g,config.removeTitle).replace(/\{dataUrl}/g,vUrl).replace(/\{dataKey}/g,vKey),showUpload&&(btnUpload=self.getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,config.uploadClass).replace(/\{uploadIcon}/g,config.uploadIcon).replace(/\{uploadTitle}/g,config.uploadTitle)),template.replace(/\{delete}/g,btnDelete).replace(/\{upload}/g,btnUpload).replace(/\{other}/g,otherButtons)},setThumbStatus:function($thumb,status){var self=this;if(self.showPreview){var icon="indicator"+status,msg=icon+"Title",css="file-preview-"+status.toLowerCase(),$indicator=$thumb.find(".file-upload-indicator"),config=self.fileActionSettings;$thumb.removeClass("file-preview-success file-preview-error file-preview-loading"),"Error"===status&&$thumb.find(".kv-file-upload").attr("disabled",!0),$indicator.html(config[icon]),$indicator.attr("title",config[msg]),$thumb.addClass(css)}},clearPreview:function(){var self=this,$thumbs=self.showUploadedThumbs?self.$preview.find(".file-preview-frame:not(.file-preview-success)"):self.$preview.find(".file-preview-frame");$thumbs.remove(),self.$preview.find(".file-preview-frame").length&&self.showPreview||self.resetUpload(),self.validateDefaultPreview()},initPreview:function(isInit){var out,self=this,cap=self.initialCaption||"";return previewCache.count(self.id)?(out=previewCache.out(self.id),cap=isInit&&self.initialCaption?self.initialCaption:out.caption,self.$preview.html(out.content),self.setCaption(cap),void(isEmpty(out.content)||self.$container.removeClass("file-input-new"))):(self.clearPreview(),void(isInit?self.setCaption(cap):self.initCaption()))},initPreviewDeletes:function(){var self=this,deleteExtraData=self.deleteExtraData||{},resetProgress=function(){var hasFiles=self.isUploadable?previewCache.count(self.id):self.$element.get(0).files.length;0!==self.$preview.find(".kv-file-remove").length||hasFiles||(self.reset(),self.initialCaption="")};self.$preview.find(".kv-file-remove").each(function(){var $el=$(this),vUrl=$el.data("url")||self.deleteUrl,vKey=$el.data("key");if(!isEmpty(vUrl)&&void 0!==vKey){var settings,params,config,extraData,$frame=$el.closest(".file-preview-frame"),cache=previewCache.data[self.id],index=$frame.data("fileindex");index=parseInt(index.replace("init_","")),config=isEmpty(cache.config)&&isEmpty(cache.config[index])?null:cache.config[index],extraData=isEmpty(config)||isEmpty(config.extra)?deleteExtraData:config.extra,"function"==typeof extraData&&(extraData=extraData()),params={id:$el.attr("id"),key:vKey,extra:extraData},settings=$.extend({url:vUrl,type:"POST",dataType:"json",data:$.extend({key:vKey},extraData),beforeSend:function(jqXHR){self.ajaxAborted=!1,self.raise("filepredelete",[vKey,jqXHR,extraData]),self.ajaxAborted?jqXHR.abort():(addCss($frame,"file-uploading"),addCss($el,"disabled"))},success:function(data,textStatus,jqXHR){var n,cap;return isEmpty(data)||isEmpty(data.error)?(previewCache.unset(self.id,index),n=previewCache.count(self.id),cap=n>0?self.getMsgSelected(n):"",self.raise("filedeleted",[vKey,jqXHR,extraData]),self.setCaption(cap),$frame.removeClass("file-uploading").addClass("file-deleted"),void $frame.fadeOut("slow",function(){self.clearObjects($frame),$frame.remove(),resetProgress(),n||0!==self.getFileStack().length||(self.setCaption(""),self.reset())})):(params.jqXHR=jqXHR,params.response=data,self.showError(data.error,params,"filedeleteerror"),$frame.removeClass("file-uploading"),$el.removeClass("disabled"),void resetProgress())},error:function(jqXHR,textStatus,errorThrown){var errMsg=self.parseError(jqXHR,errorThrown);params.jqXHR=jqXHR,params.response={},self.showError(errMsg,params,"filedeleteerror"),$frame.removeClass("file-uploading"),resetProgress()}},self.ajaxDeleteSettings),handler($el,"click",function(){return self.validateMinCount()?void $.ajax(settings):!1})}})},clearObjects:function($el){$el.find("video audio").each(function(){this.pause(),$(this).remove()}),$el.find("img object div").each(function(){$(this).remove()})},clearFileInput:function(){var $srcFrm,$tmpFrm,$tmpEl,self=this,$el=self.$element;isEmpty($el.val())||(self.isIE9||self.isIE10?($srcFrm=$el.closest("form"),$tmpFrm=$(document.createElement("form")),$tmpEl=$(document.createElement("div")),$el.before($tmpEl),$srcFrm.length?$srcFrm.after($tmpFrm):$tmpEl.after($tmpFrm),$tmpFrm.append($el).trigger("reset"),$tmpEl.before($el).remove(),$tmpFrm.remove()):$el.val(""),self.fileInputCleared=!0)},resetUpload:function(){var self=this;self.uploadCache={content:[],config:[],tags:[],append:!0},self.uploadCount=0,self.uploadStatus={},self.uploadLog=[],self.uploadAsyncCount=0,self.loadedImages=[],self.totalImagesCount=0,self.$btnUpload.removeAttr("disabled"),self.setProgress(0),addCss(self.$progress,"hide"),self.resetErrors(!1),self.ajaxAborted=!1,self.ajaxRequests=[],self.resetCanvas()},resetCanvas:function(){var self=this;self.canvas&&self.imageCanvasContext&&self.imageCanvasContext.clearRect(0,0,self.canvas.width,self.canvas.height)},cancel:function(){var i,self=this,xhr=self.ajaxRequests,len=xhr.length;if(len>0)for(i=0;len>i;i+=1)self.cancelling=!0,xhr[i].abort();self.getThumbs().each(function(){var $thumb=$(this),ind=$thumb.attr("data-fileindex");$thumb.removeClass("file-uploading"),void 0!==self.filestack[ind]&&($thumb.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),$thumb.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),self.unlock()})},cleanMemory:function($thumb){var data=$thumb.is("img")?$thumb.attr("src"):$thumb.find("source").attr("src");objUrl.revokeObjectURL(data)},hasInitialPreview:function(){var self=this;return!self.overwriteInitial&&previewCache.count(self.id)},clear:function(){var cap,self=this;self.$btnUpload.removeAttr("disabled"),self.getThumbs().find("video,audio,img").each(function(){self.cleanMemory($(this))}),self.resetUpload(),self.clearStack(),self.clearFileInput(),self.resetErrors(!0),self.raise("fileclear"),self.hasInitialPreview()?(self.showFileIcon(),self.resetPreview(),self.initPreviewDeletes(),self.$container.removeClass("file-input-new")):(self.getThumbs().each(function(){self.clearObjects($(this))}),self.isUploadable&&(previewCache.data[self.id]={}),self.$preview.html(""),cap=!self.overwriteInitial&&self.initialCaption.length>0?self.initialCaption:"",self.setCaption(cap),self.$caption.attr("title",""),addCss(self.$container,"file-input-new"),self.validateDefaultPreview()),0===self.$container.find(".file-preview-frame").length&&(self.initCaption()||self.$captionContainer.find(".kv-caption-icon").hide()),self.hideFileIcon(),self.raise("filecleared"),self.$captionContainer.focus(),self.setFileDropZoneTitle()},resetPreview:function(){var out,cap,self=this;previewCache.count(self.id)?(out=previewCache.out(self.id),self.$preview.html(out.content),cap=self.initialCaption?self.initialCaption:out.caption,self.setCaption(cap)):(self.clearPreview(),self.initCaption())},clearDefaultPreview:function(){var self=this;self.$preview.find(".file-default-preview").remove()},validateDefaultPreview:function(){var self=this;self.showPreview&&!isEmpty(self.defaultPreviewContent)&&(self.$preview.html('<div class="file-default-preview">'+self.defaultPreviewContent+"</div>"),self.$container.removeClass("file-input-new"))},resetPreviewThumbs:function(isAjax){var out,self=this;return isAjax?(self.clearPreview(),void self.clearStack()):void(self.hasInitialPreview()?(out=previewCache.out(self.id),self.$preview.html(out.content),self.setCaption(out.caption),self.initPreviewDeletes()):self.clearPreview())},reset:function(){var self=this;self.resetPreview(),self.$container.find(".fileinput-filename").text(""),self.raise("filereset"),addCss(self.$container,"file-input-new"),(self.$preview.find(".file-preview-frame").length||self.isUploadable&&self.dropZoneEnabled)&&self.$container.removeClass("file-input-new"),self.setFileDropZoneTitle(),self.clearStack(),self.formdata={}},disable:function(){var self=this;self.isDisabled=!0,self.raise("filedisabled"),self.$element.attr("disabled","disabled"),self.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),self.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),self.initDragDrop()},enable:function(){var self=this;self.isDisabled=!1,self.raise("fileenabled"),self.$element.removeAttr("disabled"),self.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),self.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),self.initDragDrop()},getThumbs:function(css){return css=css||"",this.$preview.find(".file-preview-frame:not(.file-preview-initial)"+css)},getExtraData:function(previewId,index){var self=this,data=self.uploadExtraData;return"function"==typeof self.uploadExtraData&&(data=self.uploadExtraData(previewId,index)),data},uploadExtra:function(previewId,index){var self=this,data=self.getExtraData(previewId,index);0!==data.length&&$.each(data,function(key,value){self.formdata.append(key,value)})},setAsyncUploadStatus:function(previewId,pct,total){var self=this,sum=0;self.setProgress(pct,$("#"+previewId).find(".file-thumb-progress")),self.uploadStatus[previewId]=pct,$.each(self.uploadStatus,function(key,value){sum+=value}),self.setProgress(Math.ceil(sum/total));
},initXhr:function(xhrobj,previewId,fileCount){var self=this;return xhrobj.upload&&xhrobj.upload.addEventListener("progress",function(event){var pct=0,position=event.loaded||event.position,total=event.total;event.lengthComputable&&(pct=Math.ceil(position/total*100)),previewId?self.setAsyncUploadStatus(previewId,pct,fileCount):self.setProgress(Math.ceil(pct))},!1),xhrobj},ajaxSubmit:function(fnBefore,fnSuccess,fnComplete,fnError,previewId,index){var settings,self=this;self.raise("filepreajax",[previewId,index]),self.uploadExtra(previewId,index),settings=$.extend({xhr:function(){var xhrobj=$.ajaxSettings.xhr();return self.initXhr(xhrobj,previewId,self.getFileStack().length)},url:self.uploadUrl,type:"POST",dataType:"json",data:self.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:fnBefore,success:fnSuccess,complete:fnComplete,error:fnError},self.ajaxSettings),self.ajaxRequests.push($.ajax(settings))},initUploadSuccess:function(out,$thumb,allFiles){var append,data,index,$newThumb,content,config,tags,i,self=this;self.showPreview&&"object"==typeof out&&!$.isEmptyObject(out)&&void 0!==out.initialPreview&&out.initialPreview.length>0&&(self.hasInitData=!0,content=out.initialPreview||[],config=out.initialPreviewConfig||[],tags=out.initialPreviewThumbTags||[],append=void 0===out.append||out.append?!0:!1,self.overwriteInitial=!1,void 0!==$thumb?allFiles?(i=$thumb.attr("data-fileindex"),self.uploadCache.content[i]=content[0],self.uploadCache.config[i]=config[0],self.uploadCache.tags[i]=tags[0],self.uploadCache.append=append):(index=previewCache.add(self.id,content,config[0],tags[0],append),data=previewCache.get(self.id,index,!1),$newThumb=$(data).hide(),$thumb.after($newThumb).fadeOut("slow",function(){$newThumb.fadeIn("slow").css("display:inline-block"),self.initPreviewDeletes(),self.clearFileInput(),$thumb.remove()})):(previewCache.set(self.id,content,config,tags,append),self.initPreview(),self.initPreviewDeletes()))},initSuccessThumbs:function(){var self=this;self.showPreview&&self.getThumbs(".file-preview-success").each(function(){var $thumb=$(this),$remove=$thumb.find(".kv-file-remove");$remove.removeAttr("disabled"),handler($remove,"click",function(){var out=self.raise("filesuccessremove",[$thumb.attr("id"),$thumb.data("fileindex")]);self.cleanMemory($thumb),out!==!1&&$thumb.fadeOut("slow",function(){$thumb.remove(),self.$preview.find(".file-preview-frame").length||self.reset()})})})},checkAsyncComplete:function(){var previewId,i,self=this;for(i=0;i<self.filestack.length;i++)if(self.filestack[i]&&(previewId=self.previewInitId+"-"+i,-1===$.inArray(previewId,self.uploadLog)))return!1;return self.uploadAsyncCount===self.uploadLog.length},uploadSingle:function(i,files,allFiles){var outData,$thumb,chkComplete,$btnUpload,$btnDelete,fnBefore,fnSuccess,fnComplete,fnError,updateUploadLog,self=this,total=self.getFileStack().length,formdata=new FormData,previewId=self.previewInitId+"-"+i,hasPostData=self.filestack.length>0||!$.isEmptyObject(self.uploadExtraData),params={id:previewId,index:i};self.formdata=formdata,self.showPreview&&($thumb=$("#"+previewId+":not(.file-preview-initial)"),$btnUpload=$thumb.find(".kv-file-upload"),$btnDelete=$thumb.find(".kv-file-remove"),$("#"+previewId).find(".file-thumb-progress").removeClass("hide")),0===total||!hasPostData||$btnUpload&&$btnUpload.hasClass("disabled")||self.abort(params)||(updateUploadLog=function(i,previewId){self.updateStack(i,void 0),self.uploadLog.push(previewId),self.checkAsyncComplete()&&(self.fileBatchCompleted=!0)},chkComplete=function(){self.fileBatchCompleted&&setTimeout(function(){self.showPreview&&(previewCache.set(self.id,self.uploadCache.content,self.uploadCache.config,self.uploadCache.tags,self.uploadCache.append),self.hasInitData&&(self.initPreview(),self.initPreviewDeletes())),self.unlock(),self.clearFileInput(),self.raise("filebatchuploadcomplete",[self.filestack,self.getExtraData()]),self.uploadCount=0,self.uploadStatus={},self.uploadLog=[],self.setProgress(100)},100)},fnBefore=function(jqXHR){outData=self.getOutData(jqXHR),self.fileBatchCompleted=!1,self.showPreview&&($thumb.hasClass("file-preview-success")||(self.setThumbStatus($thumb,"Loading"),addCss($thumb,"file-uploading")),$btnUpload.attr("disabled",!0),$btnDelete.attr("disabled",!0)),allFiles||self.lock(),self.raise("filepreupload",[outData,previewId,i]),params=$.extend(params,outData),self.abort(params)&&(jqXHR.abort(),self.setProgress(100))},fnSuccess=function(data,textStatus,jqXHR){outData=self.getOutData(jqXHR,data),params=$.extend(params,outData),setTimeout(function(){isEmpty(data)||isEmpty(data.error)?(self.showPreview&&(self.setThumbStatus($thumb,"Success"),$btnUpload.hide(),self.initUploadSuccess(data,$thumb,allFiles)),self.raise("fileuploaded",[outData,previewId,i]),allFiles?updateUploadLog(i,previewId):(self.resetFileStack(),self.updateStack(i,void 0))):(self.setThumbStatus($thumb,"Error"),self.showUploadError(data.error,params),allFiles&&updateUploadLog(i,previewId))},100)},fnComplete=function(){setTimeout(function(){self.showPreview&&($btnUpload.removeAttr("disabled"),$btnDelete.removeAttr("disabled"),$thumb.removeClass("file-uploading")),allFiles?chkComplete():self.unlock(!1),self.initSuccessThumbs()},100)},fnError=function(jqXHR,textStatus,errorThrown){var errMsg=self.parseError(jqXHR,errorThrown,allFiles?files[i].name:null);setTimeout(function(){allFiles&&updateUploadLog(i,previewId),self.uploadStatus[previewId]=100,self.setThumbStatus($thumb,"Error"),params=$.extend(params,self.getOutData(jqXHR)),self.showUploadError(errMsg,params)},100)},formdata.append(self.uploadFileAttr,files[i],self.filenames[i]),formdata.append("file_id",i),self.ajaxSubmit(fnBefore,fnSuccess,fnComplete,fnError,previewId,i))},uploadBatch:function(){var setAllUploaded,fnBefore,fnSuccess,fnComplete,fnError,self=this,files=self.filestack,total=files.length,params={},hasPostData=self.filestack.length>0||!$.isEmptyObject(self.uploadExtraData);self.formdata=new FormData,0!==total&&hasPostData&&!self.abort(params)&&(setAllUploaded=function(){$.each(files,function(key){self.updateStack(key,void 0)}),self.clearFileInput()},fnBefore=function(jqXHR){self.lock();var outData=self.getOutData(jqXHR);self.showPreview&&self.getThumbs().each(function(){var $thumb=$(this),$btnUpload=$thumb.find(".kv-file-upload"),$btnDelete=$thumb.find(".kv-file-remove");$thumb.hasClass("file-preview-success")||(self.setThumbStatus($thumb,"Loading"),addCss($thumb,"file-uploading")),$btnUpload.attr("disabled",!0),$btnDelete.attr("disabled",!0)}),self.raise("filebatchpreupload",[outData]),self.abort(outData)&&(jqXHR.abort(),self.setProgress(100))},fnSuccess=function(data,textStatus,jqXHR){var outData=self.getOutData(jqXHR,data),$thumbs=self.getThumbs(),key=0,keys=isEmpty(data)||isEmpty(data.errorkeys)?[]:data.errorkeys;isEmpty(data)||isEmpty(data.error)?(self.raise("filebatchuploadsuccess",[outData]),setAllUploaded(),self.showPreview?($thumbs.each(function(){var $thumb=$(this),$btnUpload=$thumb.find(".kv-file-upload");$thumb.find(".kv-file-upload").hide(),self.setThumbStatus($thumb,"Success"),$thumb.removeClass("file-uploading"),$btnUpload.removeAttr("disabled")}),self.initUploadSuccess(data)):self.reset()):(self.showPreview&&($thumbs.each(function(){var $thumb=$(this),$btnDelete=$thumb.find(".kv-file-remove"),$btnUpload=$thumb.find(".kv-file-upload");return $thumb.removeClass("file-uploading"),$btnUpload.removeAttr("disabled"),$btnDelete.removeAttr("disabled"),0===keys.length?void self.setThumbStatus($thumb,"Error"):(-1!==$.inArray(key,keys)?self.setThumbStatus($thumb,"Error"):($thumb.find(".kv-file-upload").hide(),self.setThumbStatus($thumb,"Success"),self.updateStack(key,void 0)),void key++)}),self.initUploadSuccess(data)),self.showUploadError(data.error,outData,"filebatchuploaderror"))},fnComplete=function(){self.setProgress(100),self.unlock(),self.initSuccessThumbs(),self.clearFileInput(),self.raise("filebatchuploadcomplete",[self.filestack,self.getExtraData()])},fnError=function(jqXHR,textStatus,errorThrown){var outData=self.getOutData(jqXHR),errMsg=self.parseError(jqXHR,errorThrown);self.showUploadError(errMsg,outData,"filebatchuploaderror"),self.uploadFileCount=total-1,self.showPreview&&(self.getThumbs().each(function(){var $thumb=$(this),key=$thumb.attr("data-fileindex");$thumb.removeClass("file-uploading"),void 0!==self.filestack[key]&&self.setThumbStatus($thumb,"Error")}),self.getThumbs().removeClass("file-uploading"),self.getThumbs(" .kv-file-upload").removeAttr("disabled"),self.getThumbs(" .kv-file-delete").removeAttr("disabled"))},$.each(files,function(key,data){isEmpty(files[key])||self.formdata.append(self.uploadFileAttr,data,self.filenames[key])}),self.ajaxSubmit(fnBefore,fnSuccess,fnComplete,fnError))},uploadExtraOnly:function(){var fnBefore,fnSuccess,fnComplete,fnError,self=this,params={};self.formdata=new FormData,self.abort(params)||(fnBefore=function(jqXHR){self.lock();var outData=self.getOutData(jqXHR);self.raise("filebatchpreupload",[outData]),self.setProgress(50),params.data=outData,params.xhr=jqXHR,self.abort(params)&&(jqXHR.abort(),self.setProgress(100))},fnSuccess=function(data,textStatus,jqXHR){var outData=self.getOutData(jqXHR,data);isEmpty(data)||isEmpty(data.error)?(self.raise("filebatchuploadsuccess",[outData]),self.clearFileInput(),self.initUploadSuccess(data)):self.showUploadError(data.error,outData,"filebatchuploaderror")},fnComplete=function(){self.setProgress(100),self.unlock(),self.clearFileInput(),self.raise("filebatchuploadcomplete",[self.filestack,self.getExtraData()])},fnError=function(jqXHR,textStatus,errorThrown){var outData=self.getOutData(jqXHR),errMsg=self.parseError(jqXHR,errorThrown);params.data=outData,self.showUploadError(errMsg,outData,"filebatchuploaderror")},self.ajaxSubmit(fnBefore,fnSuccess,fnComplete,fnError))},upload:function(){var i,outData,len,self=this,totLen=self.getFileStack().length,params={},hasExtraData=!$.isEmptyObject(self.getExtraData());if(self.minFileCount>0&&self.getFileCount(totLen)<self.minFileCount)return void self.noFilesError(params);if(self.isUploadable&&!self.isDisabled&&(0!==totLen||hasExtraData)){if(self.resetUpload(),self.$progress.removeClass("hide"),self.uploadCount=0,self.uploadStatus={},self.uploadLog=[],self.lock(),self.setProgress(2),0===totLen&&hasExtraData)return void self.uploadExtraOnly();if(len=self.filestack.length,self.hasInitData=!1,self.uploadAsync){for(outData=self.getOutData(),self.raise("filebatchpreupload",[outData]),self.fileBatchCompleted=!1,self.uploadCache={content:[],config:[],tags:[],append:!0},self.uploadAsyncCount=self.getFileStack().length,i=0;len>i;i++)self.uploadCache.content[i]=null,self.uploadCache.config[i]=null,self.uploadCache.tags[i]=null;for(i=0;len>i;i++)void 0!==self.filestack[i]&&self.uploadSingle(i,self.filestack,!0)}else self.uploadBatch()}},initFileActions:function(){var self=this;self.showPreview&&(self.$preview.find(".kv-file-remove").each(function(){var hasError,n,cap,status,$el=$(this),$frame=$el.closest(".file-preview-frame"),id=$frame.attr("id"),ind=$frame.attr("data-fileindex");handler($el,"click",function(){return status=self.raise("filepreremove",[id,ind]),status!==!1&&self.validateMinCount()?(hasError=$frame.hasClass("file-preview-error"),self.cleanMemory($frame),void $frame.fadeOut("slow",function(){self.updateStack(ind,void 0),self.clearObjects($frame),$frame.remove(),id&&hasError&&self.$errorContainer.find('li[data-file-id="'+id+'"]').fadeOut("fast",function(){$(this).remove(),self.errorsExist()||self.resetErrors()});var filestack=self.getFileStack(!0),len=filestack.length,chk=previewCache.count(self.id),hasThumb=self.showPreview&&self.$preview.find(".file-preview-frame").length;self.clearFileInput(),0!==len||0!==chk||hasThumb?(n=chk+len,cap=n>1?self.getMsgSelected(n):filestack[0]?self.getFileNames()[0]:"",self.setCaption(cap)):self.reset(),self.raise("fileremoved",[id,ind])})):!1})}),self.$preview.find(".kv-file-upload").each(function(){var $el=$(this);handler($el,"click",function(){var $frame=$el.closest(".file-preview-frame"),ind=$frame.attr("data-fileindex");$frame.hasClass("file-preview-error")||self.uploadSingle(ind,self.filestack,!1)})}))},hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},addError:function(msg){var self=this,$error=self.$errorContainer;msg&&$error.length&&($error.html(self.errorCloseButton+msg),$error.find(".kv-error-close").off("click").on("click",function(){$error.fadeOut("slow")}))},resetErrors:function(fade){var self=this,$error=self.$errorContainer;self.isError=!1,self.$container.removeClass("has-error"),$error.html(""),fade?$error.fadeOut("slow"):$error.hide()},showFolderError:function(folders){var self=this,$error=self.$errorContainer;folders&&(self.addError(self.msgFoldersNotAllowed.replace(/\{n}/g,folders)),$error.fadeIn(800),addCss(self.$container,"has-error"),self.raise("filefoldererror",[folders]))},showUploadError:function(msg,params,event){var self=this,$error=self.$errorContainer,ev=event||"fileuploaderror",e=params&&params.id?'<li data-file-id="'+params.id+'">'+msg+"</li>":"<li>"+msg+"</li>";return 0===$error.find("ul").length?self.addError("<ul>"+e+"</ul>"):$error.find("ul").append(e),$error.fadeIn(800),self.raise(ev,[params]),self.$container.removeClass("file-input-new"),addCss(self.$container,"has-error"),!0},showError:function(msg,params,event){var self=this,$error=self.$errorContainer,ev=event||"fileerror";return params=params||{},params.reader=self.reader,self.addError(msg),$error.fadeIn(800),self.raise(ev,[params]),self.isUploadable||self.clearFileInput(),self.$container.removeClass("file-input-new"),addCss(self.$container,"has-error"),self.$btnUpload.attr("disabled",!0),!0},errorHandler:function(evt,caption){var self=this,err=evt.target.error;err.code===err.NOT_FOUND_ERR?self.showError(self.msgFileNotFound.replace("{name}",caption)):err.code===err.SECURITY_ERR?self.showError(self.msgFileSecured.replace("{name}",caption)):err.code===err.NOT_READABLE_ERR?self.showError(self.msgFileNotReadable.replace("{name}",caption)):err.code===err.ABORT_ERR?self.showError(self.msgFilePreviewAborted.replace("{name}",caption)):self.showError(self.msgFilePreviewError.replace("{name}",caption))},parseFileType:function(file){var isValid,vType,cat,i,self=this;for(i=0;i<defaultPreviewTypes.length;i+=1)if(cat=defaultPreviewTypes[i],isValid=isSet(cat,self.fileTypeSettings)?self.fileTypeSettings[cat]:defaultFileTypeSettings[cat],vType=isValid(file.type,file.name)?cat:"",!isEmpty(vType))return vType;return"other"},previewDefault:function(file,previewId,isDisabled){if(this.showPreview){var self=this,frameClass="",fname=file?file.name:"",data=objUrl.createObjectURL(file),ind=previewId.slice(previewId.lastIndexOf("-")+1),config=self.previewSettings.other||defaultPreviewSettings.other,footer=self.renderFileFooter(file.name,config.width),previewOtherTemplate=self.parseFilePreviewIcon(self.getPreviewTemplate("other"),fname);isDisabled===!0&&(self.isUploadable||(footer+='<div class="file-other-error" title="'+self.fileActionSettings.indicatorErrorTitle+'">'+self.fileActionSettings.indicatorError+"</div>")),self.clearDefaultPreview(),self.$preview.append("\n"+previewOtherTemplate.replace(/\{previewId}/g,previewId).replace(/\{frameClass}/g,frameClass).replace(/\{fileindex}/g,ind).replace(/\{caption}/g,self.slug(file.name)).replace(/\{width}/g,config.width).replace(/\{height}/g,config.height).replace(/\{type}/g,file.type).replace(/\{data}/g,data).replace(/\{footer}/g,footer)),isDisabled===!0&&self.isUploadable&&self.setThumbStatus($("#"+previewId),"Error")}},previewFile:function(i,file,theFile,previewId,data){if(this.showPreview){var content,strText,id,self=this,cat=self.parseFileType(file),fname=file?file.name:"",caption=self.slug(fname),types=self.allowedPreviewTypes,mimes=self.allowedPreviewMimeTypes,tmplt=self.getPreviewTemplate(cat),chkTypes=types&&types.indexOf(cat)>=0,config=isSet(cat,self.previewSettings)?self.previewSettings[cat]:defaultPreviewSettings[cat],chkMimes=mimes&&-1!==mimes.indexOf(file.type),footer=self.renderFileFooter(caption,config.width),modal="",ind=previewId.slice(previewId.lastIndexOf("-")+1);chkTypes||chkMimes?(tmplt=self.parseFilePreviewIcon(tmplt,fname.split(".").pop()),"text"===cat?(strText=htmlEncode(theFile.target.result),id="text-"+uniqId(),content=tmplt.replace(/\{zoom}/g,self.getLayoutTemplate("zoom")),modal=self.getLayoutTemplate("modal").replace("{id}",id).replace(/\{title}/g,caption).replace(/\{body}/g,strText).replace(/\{heading}/g,self.msgZoomModalHeading),content=content.replace(/\{previewId}/g,previewId).replace(/\{caption}/g,caption).replace(/\{width}/g,config.width).replace(/\{height}/g,config.height).replace(/\{frameClass}/g,"").replace(/\{zoomInd}/g,self.zoomIndicator).replace(/\{footer}/g,footer).replace(/\{fileindex}/g,ind).replace(/\{type}/g,file.type).replace(/\{zoomTitle}/g,self.msgZoomTitle).replace(/\{dialog}/g,"$('#"+id+"').modal('show')").replace(/\{data}/g,strText)+modal):content=tmplt.replace(/\{previewId}/g,previewId).replace(/\{caption}/g,caption).replace(/\{frameClass}/g,"").replace(/\{type}/g,file.type).replace(/\{fileindex}/g,ind).replace(/\{width}/g,config.width).replace(/\{height}/g,config.height).replace(/\{footer}/g,footer).replace(/\{data}/g,data),self.clearDefaultPreview(),self.$preview.append("\n"+content),self.validateImage(i,previewId,caption,file.type)):self.previewDefault(file,previewId)}},slugDefault:function(text){return isEmpty(text)?"":text.split(/(\\|\/)/g).pop().replace(/[^\w\u00C0-\u017F\-.\\\/ ]+/g,"")},readFiles:function(files){this.reader=new FileReader;var readFile,self=this,$el=self.$element,$preview=self.$preview,reader=self.reader,$container=self.$previewContainer,$status=self.$previewStatus,msgLoading=self.msgLoading,msgProgress=self.msgProgress,previewInitId=self.previewInitId,numFiles=files.length,settings=self.fileTypeSettings,ctr=self.filestack.length,throwError=function(msg,file,previewId,index){var p1=$.extend(self.getOutData({},{},files),{id:previewId,index:index}),p2={id:previewId,index:index,file:file,files:files};return self.previewDefault(file,previewId,!0),self.isUploadable&&self.pushStack(void 0),setTimeout(readFile(index+1),100),self.initFileActions(),self.isUploadable?self.showUploadError(msg,p1):self.showError(msg,p2)};self.loadedImages=[],self.totalImagesCount=0,$.each(files,function(key,file){var cat="image",func=isSet(cat,self.fileTypeSettings)?self.fileTypeSettings[cat]:defaultFileTypeSettings[cat];func&&func(file.type)&&self.totalImagesCount++}),readFile=function(i){if(isEmpty($el.attr("multiple"))&&(numFiles=1),i>=numFiles)return self.isUploadable&&self.filestack.length>0?self.raise("filebatchselected",[self.getFileStack()]):self.raise("filebatchselected",[files]),$container.removeClass("loading"),void $status.html("");var isText,checkFile,j,msg,typ,chk,node=ctr+i,previewId=previewInitId+"-"+node,file=files[i],caption=self.slug(file.name),fileSize=(file.size||0)/1e3,fileExtExpr="",previewData=objUrl.createObjectURL(file),fileCount=0,fileTypes=self.allowedFileTypes,strTypes=isEmpty(fileTypes)?"":fileTypes.join(", "),fileExt=self.allowedFileExtensions,strExt=isEmpty(fileExt)?"":fileExt.join(", ");if(isEmpty(fileExt)||(fileExtExpr=new RegExp("\\.("+fileExt.join("|")+")$","i")),fileSize=fileSize.toFixed(2),self.maxFileSize>0&&fileSize>self.maxFileSize)return msg=self.msgSizeTooLarge.replace("{name}",caption).replace("{size}",fileSize).replace("{maxSize}",self.maxFileSize),void(self.isError=throwError(msg,file,previewId,i));if(!isEmpty(fileTypes)&&isArray(fileTypes)){for(j=0;j<fileTypes.length;j+=1)typ=fileTypes[j],checkFile=settings[typ],chk=void 0!==checkFile&&checkFile(file.type,caption),fileCount+=isEmpty(chk)?0:chk.length;if(0===fileCount)return msg=self.msgInvalidFileType.replace("{name}",caption).replace("{types}",strTypes),void(self.isError=throwError(msg,file,previewId,i))}return 0!==fileCount||isEmpty(fileExt)||!isArray(fileExt)||isEmpty(fileExtExpr)||(chk=caption.match(fileExtExpr),fileCount+=isEmpty(chk)?0:chk.length,0!==fileCount)?self.showPreview?($preview.length>0&&void 0!==FileReader?($status.html(msgLoading.replace("{index}",i+1).replace("{files}",numFiles)),$container.addClass("loading"),reader.onerror=function(evt){self.errorHandler(evt,caption)},reader.onload=function(theFile){self.previewFile(i,file,theFile,previewId,previewData),self.initFileActions()},reader.onloadend=function(){msg=msgProgress.replace("{index}",i+1).replace("{files}",numFiles).replace("{percent}",50).replace("{name}",caption),setTimeout(function(){$status.html(msg),self.updateFileDetails(numFiles),readFile(i+1)},100),self.raise("fileloaded",[file,previewId,i,reader])},reader.onprogress=function(data){if(data.lengthComputable){var fact=data.loaded/data.total*100,progress=Math.ceil(fact);msg=msgProgress.replace("{index}",i+1).replace("{files}",numFiles).replace("{percent}",progress).replace("{name}",caption),setTimeout(function(){$status.html(msg)},100)}},isText=isSet("text",settings)?settings.text:defaultFileTypeSettings.text,isText(file.type,caption)?reader.readAsText(file,self.textEncoding):reader.readAsArrayBuffer(file)):(self.previewDefault(file,previewId),setTimeout(function(){readFile(i+1),self.updateFileDetails(numFiles)},100),self.raise("fileloaded",[file,previewId,i,reader])),void self.pushStack(file)):(self.pushStack(file),setTimeout(readFile(i+1),100),void self.raise("fileloaded",[file,previewId,i,reader])):(msg=self.msgInvalidFileExtension.replace("{name}",caption).replace("{extensions}",strExt),void(self.isError=throwError(msg,file,previewId,i)))},readFile(0),self.updateFileDetails(numFiles,!1)},updateFileDetails:function(numFiles){var self=this,$el=self.$element,fileStack=self.getFileStack(),name=$el.val()||fileStack.length&&fileStack[0].name||"",label=self.slug(name),n=self.isUploadable?fileStack.length:numFiles,nFiles=previewCache.count(self.id)+n,log=n>1?self.getMsgSelected(nFiles):label;self.isError?(self.$previewContainer.removeClass("loading"),self.$previewStatus.html(""),self.$captionContainer.find(".kv-caption-icon").hide()):self.showFileIcon(),self.setCaption(log,self.isError),self.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&self.raise("fileselect",[numFiles,label]),previewCache.count(self.id)&&self.initPreviewDeletes()},validateMinCount:function(){var self=this,len=self.isUploadable?self.getFileStack().length:self.$element.get(0).files.length;return self.validateInitialCount&&self.minFileCount>0&&self.getFileCount(len-1)<self.minFileCount?(self.noFilesError({}),!1):!0},getFileCount:function(fileCount){var self=this,addCount=0;return self.validateInitialCount&&!self.overwriteInitial&&(addCount=previewCache.count(self.id),fileCount+=addCount),fileCount},change:function(e){var self=this,$el=self.$element;if(!self.isUploadable&&isEmpty($el.val())&&self.fileInputCleared)return void(self.fileInputCleared=!1);self.fileInputCleared=!1;var tfiles,msg,total,f,n,len,isDragDrop=arguments.length>1,files=isDragDrop?e.originalEvent.dataTransfer.files:$el.get(0).files,isSingleUpload=isEmpty($el.attr("multiple")),i=0,folders=0,ctr=self.filestack.length,isAjaxUpload=self.isUploadable,flagSingle=isSingleUpload&&ctr>0,throwError=function(mesg,file,previewId,index){var p1=$.extend(self.getOutData({},{},files),{id:previewId,index:index}),p2={id:previewId,index:index,file:file,files:files};return self.isUploadable?self.showUploadError(mesg,p1):self.showError(mesg,p2)};if(self.reader=null,self.resetUpload(),self.hideFileIcon(),self.isUploadable&&self.$container.find(".file-drop-zone ."+self.dropZoneTitleClass).remove(),isDragDrop)for(tfiles=[];files[i];)f=files[i],f.type||f.size%4096!==0?tfiles.push(f):folders++,i++;else tfiles=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(isEmpty(tfiles)||0===tfiles.length)return isAjaxUpload||self.clear(),self.showFolderError(folders),void self.raise("fileselectnone");if(self.resetErrors(),len=tfiles.length,total=self.isUploadable?self.getFileStack().length+len:len,total=self.getFileCount(total),self.maxFileCount>0&&total>self.maxFileCount){if(!self.autoReplace||len>self.maxFileCount)return n=self.autoReplace&&len>self.maxFileCount?len:total,msg=self.msgFilesTooMany.replace("{m}",self.maxFileCount).replace("{n}",n),self.isError=throwError(msg,null,null,null),self.$captionContainer.find(".kv-caption-icon").hide(),self.setCaption("",!0),void self.$container.removeClass("file-input-new file-input-ajax-new");total>self.maxFileCount&&self.resetPreviewThumbs(isAjaxUpload)}else!isAjaxUpload||flagSingle?(self.resetPreviewThumbs(!1),flagSingle&&self.clearStack()):!isAjaxUpload||0!==ctr||previewCache.count(self.id)&&!self.overwriteInitial||self.resetPreviewThumbs(!0);self.isPreviewable?self.readFiles(tfiles):self.updateFileDetails(1),self.showFolderError(folders)},getFileName:function(file){return file&&file.name?this.slug(file.name):void 0},getFileNames:function(skipNull){var self=this;return self.filenames.filter(function(n){return skipNull?void 0!==n:void 0!==n&&null!==n})},getFileStack:function(skipNull){var self=this;return self.filestack.filter(function(n){return skipNull?void 0!==n:void 0!==n&&null!==n})},clearStack:function(){var self=this;self.filestack=[],self.filenames=[]},updateStack:function(i,file){var self=this;self.filestack[i]=file,self.filenames[i]=self.getFileName(file)},pushStack:function(file){var self=this;self.filestack.push(file),self.filenames.push(self.getFileName(file))},checkDimensions:function(i,chk,$img,$thumb,fname,type,params){var msg,dim,$imgEl,isValid,self=this,tag="Small"===chk?"min":"max",limit=self[tag+"Image"+type];!isEmpty(limit)&&$img.length&&($imgEl=$img[0],dim="Width"===type?$imgEl.naturalWidth||$imgEl.width:$imgEl.naturalHeight||$imgEl.height,isValid="Small"===chk?dim>=limit:limit>=dim,isValid||(msg=self["msgImage"+type+chk].replace("{name}",fname).replace("{size}",limit),self.showUploadError(msg,params),self.setThumbStatus($thumb,"Error"),self.updateStack(i,null)))},validateImage:function(i,previewId,fname,ftype){var params,w1,w2,self=this,$preview=self.$preview,$thumb=$preview.find("#"+previewId),$img=$thumb.find("img");fname=fname||"Untitled",$img.length&&handler($img,"load",function(){w1=$thumb.width(),w2=$preview.width(),w1>w2&&($img.css("width","100%"),$thumb.css("width","97%")),params={ind:i,id:previewId},self.checkDimensions(i,"Small",$img,$thumb,fname,"Width",params),self.checkDimensions(i,"Small",$img,$thumb,fname,"Height",params),self.resizeImage||(self.checkDimensions(i,"Large",$img,$thumb,fname,"Width",params),self.checkDimensions(i,"Large",$img,$thumb,fname,"Height",params)),self.raise("fileimageloaded",[previewId]),self.loadedImages.push({ind:i,img:$img,thumb:$thumb,pid:previewId,typ:ftype}),self.validateAllImages(),objUrl.revokeObjectURL($img.attr("src"))})},validateAllImages:function(){var i,config,$img,$thumb,pid,ind,errFunc,self=this,params={};if(self.loadedImages.length===self.totalImagesCount&&(self.raise("fileimagesloaded"),self.resizeImage)){for(errFunc=self.isUploadable?self.showUploadError:self.showError,i=0;i<self.loadedImages.length;i++)config=self.loadedImages[i],$img=config.img,$thumb=config.thumb,pid=config.pid,ind=config.ind,params={id:pid,index:ind},self.getResizedImage($img[0],config.typ,pid,ind)||(errFunc(self.msgImageResizeError,params,"fileimageresizeerror"),self.setThumbStatus($thumb,"Error"),self.updateStack(ind,void 0));self.raise("fileimagesresized")}},getResizedImage:function(image,type,pid,ind){var chkWidth,chkHeight,self=this,width=image.naturalWidth,height=image.naturalHeight,ratio=1,maxWidth=self.maxImageWidth||width,maxHeight=self.maxImageHeight||height,isValidImage=width&&height,canvas=self.imageCanvas,context=self.imageCanvasContext;if(!isValidImage)return!1;if(width===maxWidth&&height===maxHeight)return!0;type=type||self.resizeDefaultImageType,chkWidth=width>maxWidth,chkHeight=height>maxHeight,ratio="width"===self.resizePreference?chkWidth?maxWidth/width:chkHeight?maxHeight/height:1:chkHeight?maxHeight/height:chkWidth?maxWidth/width:1,self.resetCanvas(),width*=ratio,height*=ratio,canvas.width=width,canvas.height=height;try{return context.drawImage(image,0,0,width,height),canvas.toBlob(function(blob){self.raise("fileimageresized",[pid,ind]),self.filestack[ind]=blob},type,self.resizeQuality),!0}catch(err){return!1}},initCaption:function(){var self=this,cap=self.initialCaption||"";return self.overwriteInitial||isEmpty(cap)?(self.$caption.html(""),!1):(self.setCaption(cap),!0)},setCaption:function(content,isError){var title,out,self=this;if(isError)title=$("<div>"+self.msgValidationError+"</div>").text(),out='<span class="'+self.msgValidationErrorClass+'">'+self.msgValidationErrorIcon+title+"</span>";else{if(isEmpty(content)||0===self.$caption.length)return;title=$("<div>"+content+"</div>").text(),out=self.getLayoutTemplate("icon")+title}self.$caption.html(out),self.$caption.attr("title",title),self.$captionContainer.find(".file-caption-ellipsis").attr("title",title)},initBrowse:function($container){var self=this;self.$btnFile=$container.find(".btn-file"),self.$btnFile.append(self.$element)},createContainer:function(){var self=this,$container=$(document.createElement("div")).attr({"class":"file-input file-input-new"}).html(self.renderMain());return self.$element.before($container),self.initBrowse($container),$container},refreshContainer:function(){var self=this,$container=self.$container;$container.before(self.$element),$container.html(self.renderMain()),self.initBrowse($container)},renderMain:function(){var self=this,dropCss=self.isUploadable&&self.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",close=self.showClose?self.getLayoutTemplate("close"):"",preview=self.showPreview?self.getLayoutTemplate("preview").replace(/\{class}/g,self.previewClass).replace(/\{dropClass}/g,dropCss):"",css=self.isDisabled?self.captionClass+" file-caption-disabled":self.captionClass,caption=self.captionTemplate.replace(/\{class}/g,css+" kv-fileinput-caption");return self.mainTemplate.replace(/\{class}/g,self.mainClass).replace(/\{preview}/g,preview).replace(/\{close}/g,close).replace(/\{caption}/g,caption).replace(/\{upload}/g,self.renderButton("upload")).replace(/\{remove}/g,self.renderButton("remove")).replace(/\{cancel}/g,self.renderButton("cancel")).replace(/\{browse}/g,self.renderButton("browse"))},renderButton:function(type){var self=this,tmplt=self.getLayoutTemplate("btnDefault"),css=self[type+"Class"],title=self[type+"Title"],icon=self[type+"Icon"],label=self[type+"Label"],status=self.isDisabled?" disabled":"",btnType="button";switch(type){case"remove":if(!self.showRemove)return"";break;case"cancel":if(!self.showCancel)return"";css+=" hide";break;case"upload":if(!self.showUpload)return"";self.isUploadable&&!self.isDisabled?tmplt=self.getLayoutTemplate("btnLink").replace("{href}",self.uploadUrl):btnType="submit";break;case"browse":tmplt=self.getLayoutTemplate("btnBrowse");break;default:return""}return css+="browse"===type?" btn-file":" fileinput-"+type+" fileinput-"+type+"-button",tmplt.replace("{type}",btnType).replace("{css}",css).replace("{title}",title).replace("{status}",status).replace("{icon}",icon).replace("{label}",label)}},$.fn.fileinput=function(option){if(hasFileAPISupport()||isIE(9)){var args=Array.apply(null,arguments),retvals=[];switch(args.shift(),this.each(function(){var defaults,$this=$(this),data=$this.data("fileinput"),options="object"==typeof option&&option,lang=options.language||$this.data("language")||"en";data||(defaults=$.extend({},$.fn.fileinput.defaults),"en"===lang||isEmpty($.fn.fileinputLocales[lang])||(defaults=$.extend(defaults,$.fn.fileinputLocales[lang])),data=new FileInput(this,$.extend(defaults,options,$this.data())),$this.data("fileinput",data)),"string"==typeof option&&retvals.push(data[option].apply(data,args));
}),retvals.length){case 0:return this;case 1:return retvals[0];default:return retvals}}},$.fn.fileinput.defaults={language:"en",showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,autoReplace:!1,mainClass:"",previewClass:"",captionClass:"",mainTemplate:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,layoutTemplates:defaultLayoutTemplates,previewTemplates:defaultPreviewTemplates,allowedPreviewTypes:defaultPreviewTypes,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewSettings:defaultPreviewSettings,fileTypeSettings:defaultFileTypeSettings,previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-icon-4x",previewFileIconSettings:{},previewFileExtSettings:{},browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i> ',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",maxFileSize:0,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",previewFileType:"image",zoomIndicator:'<i class="glyphicon glyphicon-zoom-in"></i>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},$.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgZoomTitle:"View details",msgZoomModalHeading:"Detailed Preview",msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgUploadAborted:"The file upload was aborted",msgValidationError:"File Upload Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",dropZoneTitle:"Drag & drop files here &hellip;"},$.extend($.fn.fileinput.defaults,$.fn.fileinputLocales.en),$.fn.fileinput.Constructor=FileInput,$(document).ready(function(){var $input=$("input.file[type=file]");$input.length&&$input.fileinput()})}(window.jQuery),$(document).ready(function(){$(".kv-toggle").click(function(event){return event.preventDefault(),$(this).children(".opened").toggle(),$(this).children(".closed").toggle(),$(this).parent().children("ul").toggle(),$(this).parent().toggleClass("active"),!1})}),$("#menu-search-form").on("submit",function(event){event.preventDefault();var vals=[],val=$("#menu-search-autocomplete").val();""==val&&(val=" "),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){var geocoder=new google.maps.Geocoder,latlng={lat:parseFloat(position.coords.latitude),lng:parseFloat(position.coords.longitude)};vals.push("search-filter[latitude]="+latlng.lat),vals.push("search-filter[longitude]="+latlng.lng),geocoder.geocode({location:latlng},function(results,status){if(status===google.maps.GeocoderStatus.OK&&results.length>0){var result=results[0],location=result.formatted_address;vals.push("search-filter[location]="+location),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")}})}):window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&"),window.location=event.currentTarget.action+"/"+val+"?"+vals.join("&")}),jQuery(function($){$.fn.authchoice=function(options){return options=$.extend({popup:{resizable:"yes",scrollbars:"no",toolbar:"no",menubar:"no",location:"no",directories:"no",status:"yes",width:450,height:380}},options),this.each(function(){var $container=$(this);$container.find("a").on("click",function(e){e.preventDefault();var authChoicePopup=$container.data("authChoicePopup");authChoicePopup&&authChoicePopup.close();var url=this.href,popupOptions=$.extend({},options.popup),localPopupWidth=this.getAttribute("data-popup-width");localPopupWidth&&(popupOptions.width=localPopupWidth);var localPopupHeight=this.getAttribute("data-popup-height");localPopupWidth&&(popupOptions.height=localPopupHeight),popupOptions.left=(window.screen.width-popupOptions.width)/2,popupOptions.top=(window.screen.height-popupOptions.height)/2;var popupFeatureParts=[];for(var propName in popupOptions)popupOptions.hasOwnProperty(propName)&&popupFeatureParts.push(propName+"="+popupOptions[propName]);var popupFeature=popupFeatureParts.join(",");authChoicePopup=window.open(url,"yii_auth_choice",popupFeature),authChoicePopup.focus(),$container.data("authChoicePopup",authChoicePopup)})})}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function(jQuery){var S2=function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var S2=jQuery.fn.select2.amd;var S2;return function(){if(!S2||!S2.requirejs){S2?require=S2:S2={};var requirejs,require,define;!function(undef){function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name&&"."===name.charAt(0))if(baseName){for(baseParts=baseParts.slice(0,baseParts.length-1),name=name.split("/"),lastIndex=name.length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),name=baseParts.concat(name),i=0;i<name.length;i+=1)if(part=name[i],"."===part)name.splice(i,1),i-=1;else if(".."===part){if(1===i&&(".."===name[2]||".."===name[0]))break;i>0&&(name.splice(i-1,2),i-=2)}name=name.join("/")}else 0===name.indexOf("./")&&(name=name.substring(2));if((baseParts||starMap)&&map){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if(mapValue=map[baseParts.slice(0,j).join("/")],mapValue&&(mapValue=mapValue[nameSegment])){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&starMap[nameSegment]&&(foundStarMap=starMap[nameSegment],starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function makeRequire(relName,forceSync){return function(){return req.apply(undef,aps.call(arguments,0).concat([relName,forceSync]))}}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name],defining[name]=!0,main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;makeMap=function(name,relName){var plugin,parts=splitPrefix(name),prefix=parts[0];return name=parts[1],prefix&&(prefix=normalize(prefix,relName),plugin=callDep(prefix)),prefix?name=plugin&&plugin.normalize?plugin.normalize(name,makeNormalize(relName)):normalize(name,relName):(name=normalize(name,relName),parts=splitPrefix(name),prefix=parts[0],name=parts[1],prefix&&(plugin=callDep(prefix))),{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}},handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return"undefined"!=typeof e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}},main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,usingExports,args=[],callbackType=typeof callback;if(relName=relName||name,"undefined"===callbackType||"function"===callbackType){for(deps=!deps.length&&callback.length?["require","exports","module"]:deps,i=0;i<deps.length;i+=1)if(map=makeMap(deps[i],relName),depName=map.f,"require"===depName)args[i]=handlers.require(name);else if("exports"===depName)args[i]=handlers.exports(name),usingExports=!0;else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{}),args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0,name&&(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:ret===undef&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)},requirejs=require=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,callback).f);if(!deps.splice){if(config=deps,config.deps&&req(config.deps,config.callback),!callback)return;callback.splice?(deps=callback,callback=relName,relName=null):deps=undef}return callback=callback||function(){},"function"==typeof relName&&(relName=forceSync,forceSync=alt),forceSync?main(undef,deps,callback,relName):setTimeout(function(){main(undef,deps,callback,relName)},4),req},req.config=function(cfg){return req(cfg)},requirejs._defined=defined,define=function(name,deps,callback){deps.splice||(callback=deps,deps=[]),hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])},define.amd={jQuery:!0}}(),S2.requirejs=requirejs,S2.require=require,S2.define=define}}(),S2.define("almond",function(){}),S2.define("jquery",[],function(){var _$=jQuery||$;return null==_$&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),_$}),S2.define("select2/utils",["jquery"],function($){function getMethods(theClass){var proto=theClass.prototype,methods=[];for(var methodName in proto){var m=proto[methodName];"function"==typeof m&&"constructor"!==methodName&&methods.push(methodName)}return methods}var Utils={};Utils.Extend=function(ChildClass,SuperClass){function BaseConstructor(){this.constructor=ChildClass}var __hasProp={}.hasOwnProperty;for(var key in SuperClass)__hasProp.call(SuperClass,key)&&(ChildClass[key]=SuperClass[key]);return BaseConstructor.prototype=SuperClass.prototype,ChildClass.prototype=new BaseConstructor,ChildClass.__super__=SuperClass.prototype,ChildClass},Utils.Decorate=function(SuperClass,DecoratorClass){function DecoratedClass(){var unshift=Array.prototype.unshift,argCount=DecoratorClass.prototype.constructor.length,calledConstructor=SuperClass.prototype.constructor;argCount>0&&(unshift.call(arguments,SuperClass.prototype.constructor),calledConstructor=DecoratorClass.prototype.constructor),calledConstructor.apply(this,arguments)}function ctr(){this.constructor=DecoratedClass}var decoratedMethods=getMethods(DecoratorClass),superMethods=getMethods(SuperClass);DecoratorClass.displayName=SuperClass.displayName,DecoratedClass.prototype=new ctr;for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod]}for(var calledMethod=(function(methodName){var originalMethod=function(){};methodName in DecoratedClass.prototype&&(originalMethod=DecoratedClass.prototype[methodName]);var decoratedMethod=DecoratorClass.prototype[methodName];return function(){var unshift=Array.prototype.unshift;return unshift.call(arguments,originalMethod),decoratedMethod.apply(this,arguments)}}),d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod)}return DecoratedClass};var Observable=function(){this.listeners={}};return Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{},event in this.listeners?this.listeners[event].push(callback):this.listeners[event]=[callback]},Observable.prototype.trigger=function(event){var slice=Array.prototype.slice;this.listeners=this.listeners||{},event in this.listeners&&this.invoke(this.listeners[event],slice.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;len>i;i++)listeners[i].apply(this,params)},Utils.Observable=Observable,Utils.generateChars=function(length){for(var chars="",i=0;length>i;i++){var randomChar=Math.floor(36*Math.random());chars+=randomChar.toString(36)}return chars},Utils.bind=function(func,context){return function(){func.apply(context,arguments)}},Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-"),dataLevel=data;if(1!==keys.length){for(var k=0;k<keys.length;k++){var key=keys[k];key=key.substring(0,1).toLowerCase()+key.substring(1),key in dataLevel||(dataLevel[key]={}),k==keys.length-1&&(dataLevel[key]=data[originalKey]),dataLevel=dataLevel[key]}delete data[originalKey]}}return data},Utils.hasScroll=function(index,el){var $el=$(el),overflowX=el.style.overflowX,overflowY=el.style.overflowY;return overflowX!==overflowY||"hidden"!==overflowY&&"visible"!==overflowY?"scroll"===overflowX||"scroll"===overflowY?!0:$el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth:!1},Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof markup?markup:String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match]})},Utils.appendMany=function($element,$nodes){if("1.7"===$.fn.jquery.substr(0,3)){var $jqNodes=$();$.map($nodes,function(node){$jqNodes=$jqNodes.add(node)}),$nodes=$jqNodes}$element.append($nodes)},Utils}),S2.define("select2/results",["jquery","./utils"],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element,this.data=dataAdapter,this.options=options,Results.__super__.constructor.call(this)}return Utils.Extend(Results,Utils.Observable),Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&$results.attr("aria-multiselectable","true"),this.$results=$results,$results},Results.prototype.clear=function(){this.$results.empty()},Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var $message=$('<li role="treeitem" class="select2-results__option"></li>'),message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args))),this.$results.append($message)},Results.prototype.append=function(data){this.hideLoading();var $options=[];if(null==data.results||0===data.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d],$option=this.option(item);$options.push($option)}this.$results.append($options)},Results.prototype.position=function($results,$dropdown){var $resultsContainer=$dropdown.find(".select2-results");$resultsContainer.append($results)},Results.prototype.sort=function(data){var sorter=this.options.get("sorter");return sorter(data)},Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=$.map(selected,function(s){return s.id.toString()}),$options=self.$results.find(".select2-results__option[aria-selected]");$options.each(function(){var $option=$(this),item=$.data(this,"data"),id=""+item.id;null!=item.element&&item.element.selected||null==item.element&&$.inArray(id,selectedIds)>-1?$option.attr("aria-selected","true"):$option.attr("aria-selected","false")});var $selected=$options.filter("[aria-selected=true]");$selected.length>0?$selected.first().trigger("mouseenter"):$options.first().trigger("mouseenter")})},Results.prototype.showLoading=function(params){this.hideLoading();var loadingMore=this.options.get("translations").get("searching"),loading={disabled:!0,loading:!0,text:loadingMore(params)},$loading=this.option(loading);$loading.className+=" loading-results",this.$results.prepend($loading)},Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},Results.prototype.option=function(data){var option=document.createElement("li");option.className="select2-results__option";var attrs={role:"treeitem","aria-selected":"false"};data.disabled&&(delete attrs["aria-selected"],attrs["aria-disabled"]="true"),null==data.id&&delete attrs["aria-selected"],null!=data._resultId&&(option.id=data._resultId),data.title&&(option.title=data.title),data.children&&(attrs.role="group",attrs["aria-label"]=data.text,delete attrs["aria-selected"]);for(var attr in attrs){var val=attrs[attr];option.setAttribute(attr,val)}if(data.children){var $option=$(option),label=document.createElement("strong");label.className="select2-results__group";$(label);this.template(data,label);for(var $children=[],c=0;c<data.children.length;c++){var child=data.children[c],$child=this.option(child);$children.push($child)}var $childrenContainer=$("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});$childrenContainer.append($children),$option.append(label),$option.append($childrenContainer)}else this.template(data,option);return $.data(option,"data",data),option},Results.prototype.bind=function(container,$container){var self=this,id=container.id+"-results";this.$results.attr("id",id),container.on("results:all",function(params){self.clear(),self.append(params.data),container.isOpen()&&self.setClasses()}),container.on("results:append",function(params){self.append(params.data),container.isOpen()&&self.setClasses()}),container.on("query",function(params){self.showLoading(params)}),container.on("select",function(){container.isOpen()&&self.setClasses()}),container.on("unselect",function(){container.isOpen()&&self.setClasses()}),container.on("open",function(){self.$results.attr("aria-expanded","true"),self.$results.attr("aria-hidden","false"),self.setClasses(),self.ensureHighlightVisible()}),container.on("close",function(){self.$results.attr("aria-expanded","false"),self.$results.attr("aria-hidden","true"),self.$results.removeAttr("aria-activedescendant")}),container.on("results:toggle",function(){var $highlighted=self.getHighlightedResults();0!==$highlighted.length&&$highlighted.trigger("mouseup")}),container.on("results:select",function(){var $highlighted=self.getHighlightedResults();if(0!==$highlighted.length){var data=$highlighted.data("data");"true"==$highlighted.attr("aria-selected")?self.trigger("close"):self.trigger("select",{data:data})}}),container.on("results:previous",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find("[aria-selected]"),currentIndex=$options.index($highlighted);if(0!==currentIndex){var nextIndex=currentIndex-1;0===$highlighted.length&&(nextIndex=0);var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top,nextTop=$next.offset().top,nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);0===nextIndex?self.$results.scrollTop(0):0>nextTop-currentOffset&&self.$results.scrollTop(nextOffset)}}),container.on("results:next",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find("[aria-selected]"),currentIndex=$options.index($highlighted),nextIndex=currentIndex+1;if(!(nextIndex>=$options.length)){var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top+self.$results.outerHeight(!1),nextBottom=$next.offset().top+$next.outerHeight(!1),nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;0===nextIndex?self.$results.scrollTop(0):nextBottom>currentOffset&&self.$results.scrollTop(nextOffset)}}),container.on("results:focus",function(params){params.element.addClass("select2-results__option--highlighted")}),container.on("results:message",function(params){self.displayMessage(params)}),$.fn.mousewheel&&this.$results.on("mousewheel",function(e){var top=self.$results.scrollTop(),bottom=self.$results.get(0).scrollHeight-self.$results.scrollTop()+e.deltaY,isAtTop=e.deltaY>0&&top-e.deltaY<=0,isAtBottom=e.deltaY<0&&bottom<=self.$results.height();isAtTop?(self.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):isAtBottom&&(self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(evt){var $this=$(this),data=$this.data("data");return"true"===$this.attr("aria-selected")?void(self.options.get("multiple")?self.trigger("unselect",{originalEvent:evt,data:data}):self.trigger("close")):void self.trigger("select",{originalEvent:evt,data:data})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(evt){var data=$(this).data("data");self.getHighlightedResults().removeClass("select2-results__option--highlighted"),self.trigger("results:focus",{data:data,element:$(this)})})},Results.prototype.getHighlightedResults=function(){var $highlighted=this.$results.find(".select2-results__option--highlighted");return $highlighted},Results.prototype.destroy=function(){this.$results.remove()},Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if(0!==$highlighted.length){var $options=this.$results.find("[aria-selected]"),currentIndex=$options.index($highlighted),currentOffset=this.$results.offset().top,nextTop=$highlighted.offset().top,nextOffset=this.$results.scrollTop()+(nextTop-currentOffset),offsetDelta=nextTop-currentOffset;nextOffset-=2*$highlighted.outerHeight(!1),2>=currentIndex?this.$results.scrollTop(0):(offsetDelta>this.$results.outerHeight()||0>offsetDelta)&&this.$results.scrollTop(nextOffset)}},Results.prototype.template=function(result,container){var template=this.options.get("templateResult"),escapeMarkup=this.options.get("escapeMarkup"),content=template(result);null==content?container.style.display="none":"string"==typeof content?container.innerHTML=escapeMarkup(content):$(container).append(content)},Results}),S2.define("select2/keys",[],function(){var KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return KEYS}),S2.define("select2/selection/base",["jquery","../utils","../keys"],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element,this.options=options,BaseSelection.__super__.constructor.call(this)}return Utils.Extend(BaseSelection,Utils.Observable),BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),$selection.attr("title",this.$element.attr("title")),$selection.attr("tabindex",this._tabindex),this.$selection=$selection,$selection},BaseSelection.prototype.bind=function(container,$container){var self=this,resultsId=(container.id+"-container",container.id+"-results");this.container=container,this.$selection.on("focus",function(evt){self.trigger("focus",evt)}),this.$selection.on("blur",function(evt){self.trigger("blur",evt)}),this.$selection.on("keydown",function(evt){self.trigger("keypress",evt),evt.which===KEYS.SPACE&&evt.preventDefault()}),container.on("results:focus",function(params){self.$selection.attr("aria-activedescendant",params.data._resultId)}),container.on("selection:update",function(params){self.update(params.data)}),container.on("open",function(){self.$selection.attr("aria-expanded","true"),self.$selection.attr("aria-owns",resultsId),self._attachCloseHandler(container)}),container.on("close",function(){self.$selection.attr("aria-expanded","false"),self.$selection.removeAttr("aria-activedescendant"),self.$selection.removeAttr("aria-owns"),self.$selection.focus(),self._detachCloseHandler(container)}),container.on("enable",function(){self.$selection.attr("tabindex",self._tabindex)}),container.on("disable",function(){self.$selection.attr("tabindex","-1")})},BaseSelection.prototype._attachCloseHandler=function(container){$(document.body).on("mousedown.select2."+container.id,function(e){var $target=$(e.target),$select=$target.closest(".select2"),$all=$(".select2.select2-container--open");$all.each(function(){var $this=$(this);if(this!=$select[0]){var $element=$this.data("element");$element.select2("close")}})})},BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off("mousedown.select2."+container.id)},BaseSelection.prototype.position=function($selection,$container){var $selectionContainer=$container.find(".selection");$selectionContainer.append($selection)},BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container)},BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.")},BaseSelection}),S2.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(SingleSelection,BaseSelection),SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);return $selection.addClass("select2-selection--single"),$selection.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),$selection},SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id),this.$selection.attr("aria-labelledby",id),this.$selection.on("mousedown",function(evt){1===evt.which&&self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("focus",function(evt){}),this.$selection.on("blur",function(evt){}),container.on("selection:update",function(params){self.update(params.data)})},SingleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},SingleSelection.prototype.display=function(data){var template=this.options.get("templateSelection"),escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data))},SingleSelection.prototype.selectionContainer=function(){return $("<span></span>")},SingleSelection.prototype.update=function(data){if(0===data.length)return void this.clear();var selection=data[0],formatted=this.display(selection),$rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty().append(formatted),$rendered.prop("title",selection.title||selection.text)},SingleSelection}),S2.define("select2/selection/multiple",["jquery","./base","../utils"],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(MultipleSelection,BaseSelection),MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);return $selection.addClass("select2-selection--multiple"),$selection.html('<ul class="select2-selection__rendered"></ul>'),$selection},MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments),this.$selection.on("click",function(evt){self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("click",".select2-selection__choice__remove",function(evt){var $remove=$(this),$selection=$remove.parent(),data=$selection.data("data");self.trigger("unselect",{originalEvent:evt,data:data})})},MultipleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},MultipleSelection.prototype.display=function(data){var template=this.options.get("templateSelection"),escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data))},MultipleSelection.prototype.selectionContainer=function(){var $container=$('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return $container},MultipleSelection.prototype.update=function(data){if(this.clear(),0!==data.length){for(var $selections=[],d=0;d<data.length;d++){var selection=data[d],formatted=this.display(selection),$selection=this.selectionContainer();$selection.append(formatted),$selection.prop("title",selection.title||selection.text),$selection.data("data",selection),$selections.push($selection)}var $rendered=this.$selection.find(".select2-selection__rendered");Utils.appendMany($rendered,$selections)}},MultipleSelection}),S2.define("select2/selection/placeholder",["../utils"],function(Utils){function Placeholder(decorated,$element,options){
this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options)}return Placeholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();return $placeholder.html(this.display(placeholder)),$placeholder.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),$placeholder},Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=1==data.length&&data[0].id!=this.placeholder.id,multipleSelections=data.length>1;if(multipleSelections||singlePlaceholder)return decorated.call(this,data);this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder)},Placeholder}),S2.define("select2/selection/allowClear",["jquery","../keys"],function($,KEYS){function AllowClear(){}return AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(evt){self._handleClear(evt)}),container.on("keypress",function(evt){self._handleKeyboardClear(evt,container)})},AllowClear.prototype._handleClear=function(_,evt){if(!this.options.get("disabled")){var $clear=this.$selection.find(".select2-selection__clear");if(0!==$clear.length){evt.stopPropagation();for(var data=$clear.data("data"),d=0;d<data.length;d++){var unselectData={data:data[d]};if(this.trigger("unselect",unselectData),unselectData.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},AllowClear.prototype._handleKeyboardClear=function(_,evt,container){container.isOpen()||(evt.which==KEYS.DELETE||evt.which==KEYS.BACKSPACE)&&this._handleClear(evt)},AllowClear.prototype.update=function(decorated,data){if(decorated.call(this,data),!(this.$selection.find(".select2-selection__placeholder").length>0||0===data.length)){var $remove=$('<span class="select2-selection__clear">&times;</span>');$remove.data("data",data),this.$selection.find(".select2-selection__rendered").prepend($remove)}},AllowClear}),S2.define("select2/selection/search",["jquery","../utils","../keys"],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options)}return Search.prototype.render=function(decorated){var $search=$('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=$search,this.$search=$search.find("input");var $rendered=decorated.call(this);return $rendered},Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("open",function(){self.$search.attr("tabindex",0),self.$search.focus()}),container.on("close",function(){self.$search.attr("tabindex",-1),self.$search.val(""),self.$search.focus()}),container.on("enable",function(){self.$search.prop("disabled",!1)}),container.on("disable",function(){self.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(evt){self.trigger("focus",evt)}),this.$selection.on("focusout",".select2-search--inline",function(evt){self.trigger("blur",evt)}),this.$selection.on("keydown",".select2-search--inline",function(evt){evt.stopPropagation(),self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented();var key=evt.which;if(key===KEYS.BACKSPACE&&""===self.$search.val()){var $previousChoice=self.$searchContainer.prev(".select2-selection__choice");if($previousChoice.length>0){var item=$previousChoice.data("data");self.searchRemoveChoice(item),evt.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(evt){self.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(evt){self.handleSearch(evt)})},Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text)},Search.prototype.update=function(decorated,data){this.$search.attr("placeholder",""),decorated.call(this,data),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},Search.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item}),this.trigger("open"),this.$search.val(item.text+" ")},Search.prototype.resizeSearch=function(){this.$search.css("width","25px");var width="";if(""!==this.$search.attr("placeholder"))width=this.$selection.find(".select2-selection__rendered").innerWidth();else{var minimumWidth=this.$search.val().length+1;width=.75*minimumWidth+"em"}this.$search.css("width",width)},Search}),S2.define("select2/selection/eventRelay",["jquery"],function($){function EventRelay(){}return EventRelay.prototype.bind=function(decorated,container,$container){var self=this,relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting"],preventableEvents=["opening","closing","selecting","unselecting"];decorated.call(this,container,$container),container.on("*",function(name,params){if(-1!==$.inArray(name,relayEvents)){params=params||{};var evt=$.Event("select2:"+name,{params:params});self.$element.trigger(evt),-1!==$.inArray(name,preventableEvents)&&(params.prevented=evt.isDefaultPrevented())}})},EventRelay}),S2.define("select2/translation",["jquery","require"],function($,require){function Translation(dict){this.dict=dict||{}}return Translation.prototype.all=function(){return this.dict},Translation.prototype.get=function(key){return this.dict[key]},Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict)},Translation._cache={},Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations}return new Translation(Translation._cache[path])},Translation}),S2.define("select2/diacritics",[],function(){var diacritics={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return diacritics}),S2.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this)}return Utils.Extend(BaseAdapter,Utils.Observable),BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.")},BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.")},BaseAdapter.prototype.bind=function(container,$container){},BaseAdapter.prototype.destroy=function(){},BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";return id+=Utils.generateChars(4),id+=null!=data.id?"-"+data.id.toString():"-"+Utils.generateChars(4)},BaseAdapter}),S2.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element,this.options=options,SelectAdapter.__super__.constructor.call(this)}return Utils.Extend(SelectAdapter,BaseAdapter),SelectAdapter.prototype.current=function(callback){var data=[],self=this;this.$element.find(":selected").each(function(){var $option=$(this),option=self.item($option);data.push(option)}),callback(data)},SelectAdapter.prototype.select=function(data){var self=this;if(data.selected=!0,$(data.element).is("option"))return data.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(currentData){var val=[];data=[data],data.push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;-1===$.inArray(id,val)&&val.push(id)}self.$element.val(val),self.$element.trigger("change")});else{var val=data.id;this.$element.val(val),this.$element.trigger("change")}},SelectAdapter.prototype.unselect=function(data){var self=this;if(this.$element.prop("multiple"))return data.selected=!1,$(data.element).is("option")?(data.element.selected=!1,void this.$element.trigger("change")):void this.current(function(currentData){for(var val=[],d=0;d<currentData.length;d++){var id=currentData[d].id;id!==data.id&&-1===$.inArray(id,val)&&val.push(id)}self.$element.val(val),self.$element.trigger("change")})},SelectAdapter.prototype.bind=function(container,$container){var self=this;this.container=container,container.on("select",function(params){self.select(params.data)}),container.on("unselect",function(params){self.unselect(params.data)})},SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){$.removeData(this,"data")})},SelectAdapter.prototype.query=function(params,callback){var data=[],self=this,$options=this.$element.children();$options.each(function(){var $option=$(this);if($option.is("option")||$option.is("optgroup")){var option=self.item($option),matches=self.matches(params,option);null!==matches&&data.push(matches)}}),callback({results:data})},SelectAdapter.prototype.addOptions=function($options){Utils.appendMany(this.$element,$options)},SelectAdapter.prototype.option=function(data){var option;data.children?(option=document.createElement("optgroup"),option.label=data.text):(option=document.createElement("option"),void 0!==option.textContent?option.textContent=data.text:option.innerText=data.text),data.id&&(option.value=data.id),data.disabled&&(option.disabled=!0),data.selected&&(option.selected=!0),data.title&&(option.title=data.title);var $option=$(option),normalizedData=this._normalizeItem(data);return normalizedData.element=option,$.data(option,"data",normalizedData),$option},SelectAdapter.prototype.item=function($option){var data={};if(data=$.data($option[0],"data"),null!=data)return data;if($option.is("option"))data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")};else if($option.is("optgroup")){data={text:$option.prop("label"),children:[],title:$option.prop("title")};for(var $children=$option.children("option"),children=[],c=0;c<$children.length;c++){var $child=$($children[c]),child=this.item($child);children.push(child)}data.children=children}return data=this._normalizeItem(data),data.element=$option[0],$.data($option[0],"data",data),data},SelectAdapter.prototype._normalizeItem=function(item){$.isPlainObject(item)||(item={id:item,text:item}),item=$.extend({},{text:""},item);var defaults={selected:!1,disabled:!1};return null!=item.id&&(item.id=item.id.toString()),null!=item.text&&(item.text=item.text.toString()),null==item._resultId&&item.id&&null!=this.container&&(item._resultId=this.generateResultId(this.container,item)),$.extend({},defaults,item)},SelectAdapter.prototype.matches=function(params,data){var matcher=this.options.get("matcher");return matcher(params,data)},SelectAdapter}),S2.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){var data=options.get("data")||[];ArrayAdapter.__super__.constructor.call(this,$element,options),this.addOptions(this.convertToOptions(data))}return Utils.Extend(ArrayAdapter,SelectAdapter),ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString()});0===$option.length&&($option=this.option(data),this.addOptions($option)),ArrayAdapter.__super__.select.call(this,data)},ArrayAdapter.prototype.convertToOptions=function(data){function onlyItem(item){return function(){return $(this).val()==item.id}}for(var self=this,$existing=this.$element.find("option"),existingIds=$existing.map(function(){return self.item($(this)).id}).get(),$options=[],d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if($.inArray(item.id,existingIds)>=0){var $existingOption=$existing.filter(onlyItem(item)),existingData=this.item($existingOption),$newOption=($.extend(!0,{},existingData,item),this.option(existingData));$existingOption.replaceWith($newOption)}else{var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);Utils.appendMany($option,$children)}$options.push($option)}}return $options},ArrayAdapter}),S2.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),ArrayAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(AjaxAdapter,ArrayAdapter),AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return{q:params.term}},transport:function(params,success,failure){var $request=$.ajax(params);return $request.then(success),$request.fail(failure),$request}};return $.extend({},defaults,options,!0)},AjaxAdapter.prototype.processResults=function(results){return results},AjaxAdapter.prototype.query=function(params,callback){function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);self.options.get("debug")&&window.console&&console.error&&(results&&results.results&&$.isArray(results.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),callback(results)},function(){});self._request=$request}var self=this;null!=this._request&&($.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var options=$.extend({type:"GET"},this.ajaxOptions);"function"==typeof options.url&&(options.url=options.url(params)),"function"==typeof options.data&&(options.data=options.data(params)),this.ajaxOptions.delay&&""!==params.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay)):request()},AjaxAdapter}),S2.define("select2/data/tags",["jquery"],function($){function Tags(decorated,$element,options){var tags=options.get("tags"),createTag=options.get("createTag");if(void 0!==createTag&&(this.createTag=createTag),decorated.call(this,$element,options),$.isArray(tags))for(var t=0;t<tags.length;t++){var tag=tags[t],item=this._normalizeItem(tag),$option=this.option(item);this.$element.append($option)}}return Tags.prototype.query=function(decorated,params,callback){function wrapper(obj,child){for(var data=obj.results,i=0;i<data.length;i++){var option=data[i],checkChildren=null!=option.children&&!wrapper({results:option.children},!0),checkText=option.text===params.term;if(checkText||checkChildren)return child?!1:(obj.data=data,void callback(obj))}if(child)return!0;var tag=self.createTag(params);if(null!=tag){var $option=self.option(tag);$option.attr("data-select2-tag",!0),self.addOptions([$option]),self.insertTag(data,tag)}obj.results=data,callback(obj)}var self=this;return this._removeOldTags(),null==params.term||null!=params.page?void decorated.call(this,params,callback):void decorated.call(this,params,wrapper)},Tags.prototype.createTag=function(decorated,params){var term=$.trim(params.term);return""===term?null:{id:term,text:term}},Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag)},Tags.prototype._removeOldTags=function(_){var $options=(this._lastTag,this.$element.find("option[data-select2-tag]"));$options.each(function(){this.selected||$(this).remove()})},Tags}),S2.define("select2/data/tokenizer",["jquery"],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");void 0!==tokenizer&&(this.tokenizer=tokenizer),decorated.call(this,$element,options)}return Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field")},Tokenizer.prototype.query=function(decorated,params,callback){function select(data){self.select(data)}var self=this;params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,select);tokenData.term!==params.term&&(this.$search.length&&(this.$search.val(tokenData.term),this.$search.focus()),params.term=tokenData.term),decorated.call(this,params,callback)},Tokenizer.prototype.tokenizer=function(_,params,options,callback){for(var separators=options.get("tokenSeparators")||[],term=params.term,i=0,createTag=this.createTag||function(params){return{id:params.term,text:params.term}};i<term.length;){var termChar=term[i];if(-1!==$.inArray(termChar,separators)){var part=term.substr(0,i),partParams=$.extend({},params,{term:part}),data=createTag(partParams);callback(data),term=term.substr(i+1)||"",i=0}else i++}return{term:term}},Tokenizer}),S2.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength"),decorated.call(this,$e,options)}return MinimumInputLength.prototype.query=function(decorated,params,callback){return params.term=params.term||"",params.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}}):void decorated.call(this,params,callback)},MinimumInputLength}),S2.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength"),decorated.call(this,$e,options)}return MaximumInputLength.prototype.query=function(decorated,params,callback){return params.term=params.term||"",this.maximumInputLength>0&&params.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}}):void decorated.call(this,params,callback)},MaximumInputLength}),S2.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength"),decorated.call(this,$e,options)}return MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this.current(function(currentData){var count=null!=currentData?currentData.length:0;return self.maximumSelectionLength>0&&count>=self.maximumSelectionLength?void self.trigger("results:message",{message:"maximumSelected",args:{maximum:self.maximumSelectionLength}}):void decorated.call(self,params,callback)})},MaximumSelectionLength}),S2.define("select2/dropdown",["jquery","./utils"],function($,Utils){function Dropdown($element,options){this.$element=$element,this.options=options,Dropdown.__super__.constructor.call(this)}return Utils.Extend(Dropdown,Utils.Observable),Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown"><span class="select2-results"></span></span>');return $dropdown.attr("dir",this.options.get("dir")),this.$dropdown=$dropdown,$dropdown},Dropdown.prototype.position=function($dropdown,$container){},Dropdown.prototype.destroy=function(){this.$dropdown.remove()},Dropdown}),S2.define("select2/dropdown/search",["jquery","../utils"],function($,Utils){function Search(){}return Search.prototype.render=function(decorated){var $rendered=decorated.call(this),$search=$('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=$search,this.$search=$search.find("input"),$rendered.prepend($search),$rendered},Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),this.$search.on("keydown",function(evt){self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented()}),this.$search.on("input",function(evt){$(this).off("keyup")}),this.$search.on("keyup input",function(evt){self.handleSearch(evt)}),container.on("open",function(){self.$search.attr("tabindex",0),self.$search.focus(),window.setTimeout(function(){self.$search.focus()},0)}),container.on("close",function(){self.$search.attr("tabindex",-1),self.$search.val("")}),container.on("results:all",function(params){if(null==params.query.term||""===params.query.term){var showSearch=self.showSearch(params);showSearch?self.$searchContainer.removeClass("select2-search--hide"):self.$searchContainer.addClass("select2-search--hide")}})},Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.showSearch=function(_,params){return!0},Search}),S2.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options,dataAdapter)}return HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results),decorated.call(this,data)},HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},HidePlaceholder.prototype.removePlaceholder=function(_,data){for(var modifiedData=data.slice(0),d=data.length-1;d>=0;d--){var item=data[d];this.placeholder.id===item.id&&modifiedData.splice(d,1)}return modifiedData},HidePlaceholder}),S2.define("select2/dropdown/infiniteScroll",["jquery"],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={},decorated.call(this,$element,options,dataAdapter),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove(),this.loading=!1,decorated.call(this,data),this.showLoadingMore(data)&&this.$results.append(this.$loadingMore)},InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("query",function(params){self.lastParams=params,self.loading=!0}),container.on("query:append",function(params){self.lastParams=params,self.loading=!0}),this.$results.on("scroll",function(){var isLoadMoreVisible=$.contains(document.documentElement,self.$loadingMore[0]);if(!self.loading&&isLoadMoreVisible){var currentOffset=self.$results.offset().top+self.$results.outerHeight(!1),loadingMoreOffset=self.$loadingMore.offset().top+self.$loadingMore.outerHeight(!1);currentOffset+50>=loadingMoreOffset&&self.loadMore()}})},InfiniteScroll.prototype.loadMore=function(){this.loading=!0;var params=$.extend({},{page:1},this.lastParams);params.page++,this.trigger("query:append",params)},InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more},InfiniteScroll.prototype.createLoadingMore=function(){var $option=$('<li class="option load-more" role="treeitem"></li>'),message=this.options.get("translations").get("loadingMore");return $option.html(message(this.lastParams)),$option},InfiniteScroll}),S2.define("select2/dropdown/attachBody",["jquery","../utils"],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=options.get("dropdownParent")||document.body,decorated.call(this,$element,options)}return AttachBody.prototype.bind=function(decorated,container,$container){var self=this,setupResultsEvents=!1;decorated.call(this,container,$container),container.on("open",function(){self._showDropdown(),self._attachPositioningHandler(container),setupResultsEvents||(setupResultsEvents=!0,container.on("results:all",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("results:append",function(){self._positionDropdown(),self._resizeDropdown()}))}),container.on("close",function(){self._hideDropdown(),self._detachPositioningHandler(container)}),this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation()})},AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class")),$dropdown.removeClass("select2"),$dropdown.addClass("select2-container--open"),$dropdown.css({position:"absolute",top:-999999}),this.$container=$container},AttachBody.prototype.render=function(decorated){var $container=$("<span></span>"),$dropdown=decorated.call(this);return $container.append($dropdown),this.$dropdownContainer=$container,$container},AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach()},AttachBody.prototype._attachPositioningHandler=function(container){var self=this,scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);
$watchers.each(function(){$(this).data("select2-scroll-position",{x:$(this).scrollLeft(),y:$(this).scrollTop()})}),$watchers.on(scrollEvent,function(ev){var position=$(this).data("select2-scroll-position");$(this).scrollTop(position.y)}),$(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self._positionDropdown(),self._resizeDropdown()})},AttachBody.prototype._detachPositioningHandler=function(container){var scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.off(scrollEvent),$(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent)},AttachBody.prototype._positionDropdown=function(){var $window=$(window),isCurrentlyAbove=this.$dropdown.hasClass("select2-dropdown--above"),isCurrentlyBelow=this.$dropdown.hasClass("select2-dropdown--below"),newDirection=null,offset=(this.$container.position(),this.$container.offset());offset.bottom=offset.top+this.$container.outerHeight(!1);var container={height:this.$container.outerHeight(!1)};container.top=offset.top,container.bottom=offset.top+container.height;var dropdown={height:this.$dropdown.outerHeight(!1)},viewport={top:$window.scrollTop(),bottom:$window.scrollTop()+$window.height()},enoughRoomAbove=viewport.top<offset.top-dropdown.height,enoughRoomBelow=viewport.bottom>offset.bottom+dropdown.height,css={left:offset.left,top:container.bottom};isCurrentlyAbove||isCurrentlyBelow||(newDirection="below"),enoughRoomBelow||!enoughRoomAbove||isCurrentlyAbove?!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove&&(newDirection="below"):newDirection="above",("above"==newDirection||isCurrentlyAbove&&"below"!==newDirection)&&(css.top=container.top-dropdown.height),null!=newDirection&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+newDirection),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+newDirection)),this.$dropdownContainer.css(css)},AttachBody.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var css={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(css.minWidth=css.width,css.width="auto"),this.$dropdown.css(css)},AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},AttachBody}),S2.define("select2/dropdown/minimumResultsForSearch",[],function(){function countResults(data){for(var count=0,d=0;d<data.length;d++){var item=data[d];item.children?count+=countResults(item.children):count++}return count}function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),decorated.call(this,$element,options,dataAdapter)}return MinimumResultsForSearch.prototype.showSearch=function(decorated,params){return countResults(params.data.results)<this.minimumResultsForSearch?!1:decorated.call(this,params)},MinimumResultsForSearch}),S2.define("select2/dropdown/selectOnClose",[],function(){function SelectOnClose(){}return SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("close",function(){self._handleSelectOnClose()})},SelectOnClose.prototype._handleSelectOnClose=function(){var $highlightedResults=this.getHighlightedResults();$highlightedResults.length<1||this.trigger("select",{data:$highlightedResults.data("data")})},SelectOnClose}),S2.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}return CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("select",function(evt){self._selectTriggered(evt)}),container.on("unselect",function(evt){self._selectTriggered(evt)})},CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;originalEvent&&originalEvent.ctrlKey||this.trigger("close")},CloseOnSelect}),S2.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(args){var overChars=args.input.length-args.maximum,message="Please delete "+overChars+" character";return 1!=overChars&&(message+="s"),message},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length,message="Please enter "+remainingChars+" or more characters";return message},loadingMore:function(){return"Loading more results…"},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";return 1!=args.maximum&&(message+="s"),message},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),S2.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function($,require,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,EnglishTranslation){function Defaults(){this.reset()}Defaults.prototype.apply=function(options){if(options=$.extend({},this.defaults,options),null==options.dataAdapter){if(null!=options.ajax?options.dataAdapter=AjaxData:null!=options.data?options.dataAdapter=ArrayData:options.dataAdapter=SelectData,options.minimumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength)),options.maximumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength)),options.maximumSelectionLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength)),options.tags&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags)),(null!=options.tokenSeparators||null!=options.tokenizer)&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer)),null!=options.query){var Query=require(options.amdBase+"compat/query");options.dataAdapter=Utils.Decorate(options.dataAdapter,Query)}if(null!=options.initSelection){var InitSelection=require(options.amdBase+"compat/initSelection");options.dataAdapter=Utils.Decorate(options.dataAdapter,InitSelection)}}if(null==options.resultsAdapter&&(options.resultsAdapter=ResultsList,null!=options.ajax&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll)),null!=options.placeholder&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder)),options.selectOnClose&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose))),null==options.dropdownAdapter){if(options.multiple)options.dropdownAdapter=Dropdown;else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown}if(0!==options.minimumResultsForSearch&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch)),options.closeOnSelect&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect)),null!=options.dropdownCssClass||null!=options.dropdownCss||null!=options.adaptDropdownCssClass){var DropdownCSS=require(options.amdBase+"compat/dropdownCss");options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS)}options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody)}if(null==options.selectionAdapter){if(options.multiple?options.selectionAdapter=MultipleSelection:options.selectionAdapter=SingleSelection,null!=options.placeholder&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder)),options.allowClear&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear)),options.multiple&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch)),null!=options.containerCssClass||null!=options.containerCss||null!=options.adaptContainerCssClass){var ContainerCSS=require(options.amdBase+"compat/containerCss");options.selectionAdapter=Utils.Decorate(options.selectionAdapter,ContainerCSS)}options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay)}if("string"==typeof options.language)if(options.language.indexOf("-")>0){var languageParts=options.language.split("-"),baseLanguage=languageParts[0];options.language=[options.language,baseLanguage]}else options.language=[options.language];if($.isArray(options.language)){var languages=new Translation;options.language.push("en");for(var languageNames=options.language,l=0;l<languageNames.length;l++){var name=languageNames[l],language={};try{language=Translation.loadPath(name)}catch(e){try{name=this.defaults.amdLanguageBase+name,language=Translation.loadPath(name)}catch(ex){options.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+name+'" could not be automatically loaded. A fallback will be used instead.');continue}}languages.extend(language)}options.translations=languages}else{var baseTranslation=Translation.loadPath(this.defaults.amdLanguageBase+"en"),customTranslation=new Translation(options.language);customTranslation.extend(baseTranslation),options.translations=customTranslation}return options},Defaults.prototype.reset=function(){function stripDiacritics(text){function match(a){return DIACRITICS[a]||a}return text.replace(/[^\u0000-\u007E]/g,match)}function matcher(params,data){if(""===$.trim(params.term))return data;if(data.children&&data.children.length>0){for(var match=$.extend(!0,{},data),c=data.children.length-1;c>=0;c--){var child=data.children[c],matches=matcher(params,child);null==matches&&match.children.splice(c,1)}return match.children.length>0?match:matcher(params,match)}var original=stripDiacritics(data.text).toUpperCase(),term=stripDiacritics(params.term).toUpperCase();return original.indexOf(term)>-1?data:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:Utils.escapeMarkup,language:EnglishTranslation,matcher:matcher,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(data){return data},templateResult:function(result){return result.text},templateSelection:function(selection){return selection.text},theme:"default",width:"resolve"}},Defaults.prototype.set=function(key,value){var camelKey=$.camelCase(key),data={};data[camelKey]=value;var convertedData=Utils._convertData(data);$.extend(this.defaults,convertedData)};var defaults=new Defaults;return defaults}),S2.define("select2/options",["require","jquery","./defaults","./utils"],function(require,$,Defaults,Utils){function Options(options,$element){if(this.options=options,null!=$element&&this.fromElement($element),this.options=Defaults.apply(this.options),$element&&$element.is("input")){var InputCompat=require(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=Utils.Decorate(this.options.dataAdapter,InputCompat)}}return Options.prototype.fromElement=function($e){var excludedData=["select2"];null==this.options.multiple&&(this.options.multiple=$e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=$e.prop("disabled")),null==this.options.language&&($e.prop("lang")?this.options.language=$e.prop("lang").toLowerCase():$e.closest("[lang]").prop("lang")&&(this.options.language=$e.closest("[lang]").prop("lang"))),null==this.options.dir&&($e.prop("dir")?this.options.dir=$e.prop("dir"):$e.closest("[dir]").prop("dir")?this.options.dir=$e.closest("[dir]").prop("dir"):this.options.dir="ltr"),$e.prop("disabled",this.options.disabled),$e.prop("multiple",this.options.multiple),$e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),$e.data("data",$e.data("select2Tags")),$e.data("tags",!0)),$e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),$e.attr("ajax--url",$e.data("ajaxUrl")),$e.data("ajax--url",$e.data("ajaxUrl")));var dataset={};dataset=$.fn.jquery&&"1."==$.fn.jquery.substr(0,2)&&$e[0].dataset?$.extend(!0,{},$e[0].dataset,$e.data()):$e.data();var data=$.extend(!0,{},dataset);data=Utils._convertData(data);for(var key in data)$.inArray(key,excludedData)>-1||($.isPlainObject(this.options[key])?$.extend(this.options[key],data[key]):this.options[key]=data[key]);return this},Options.prototype.get=function(key){return this.options[key]},Options.prototype.set=function(key,val){this.options[key]=val},Options}),S2.define("select2/core",["jquery","./options","./utils","./keys"],function($,Options,Utils,KEYS){var Select2=function($element,options){null!=$element.data("select2")&&$element.data("select2").destroy(),this.$element=$element,this.id=this._generateId($element),options=options||{},this.options=new Options(options,$element),Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;$element.data("old-tabindex",tabindex),$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(initialData){self.trigger("selection:update",{data:initialData})}),$element.addClass("select2-hidden-accessible"),$element.attr("aria-hidden","true"),this._syncAttributes(),$element.data("select2",this)};return Utils.Extend(Select2,Utils.Observable),Select2.prototype._generateId=function($element){var id="";return id=null!=$element.attr("id")?$element.attr("id"):null!=$element.attr("name")?$element.attr("name")+"-"+Utils.generateChars(2):Utils.generateChars(4),id="select2-"+id},Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));null!=width&&$container.css("width",width)},Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==method){var styleWidth=this._resolveWidth($element,"style");return null!=styleWidth?styleWidth:this._resolveWidth($element,"element")}if("element"==method){var elementWidth=$element.outerWidth(!1);return 0>=elementWidth?"auto":elementWidth+"px"}if("style"==method){var style=$element.attr("style");if("string"!=typeof style)return null;for(var attrs=style.split(";"),i=0,l=attrs.length;l>i;i+=1){var attr=attrs[i].replace(/\s/g,""),matches=attr.match(WIDTH);if(null!==matches&&matches.length>=1)return matches[1]}return null}return method},Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on("change.select2",function(){self.dataAdapter.current(function(data){self.trigger("selection:update",{data:data})})}),this._sync=Utils.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=observer?(this._observer=new observer(function(mutations){$.each(mutations,self._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",self._sync,!1)},Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerSelectionEvents=function(){var self=this,nonRelayEvents=["toggle"];this.selection.on("toggle",function(){self.toggleDropdown()}),this.selection.on("*",function(name,params){-1===$.inArray(name,nonRelayEvents)&&self.trigger(name,params)})},Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerEvents=function(){var self=this;this.on("open",function(){self.$container.addClass("select2-container--open")}),this.on("close",function(){self.$container.removeClass("select2-container--open")}),this.on("enable",function(){self.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){self.$container.addClass("select2-container--disabled")}),this.on("focus",function(){self.$container.addClass("select2-container--focus")}),this.on("blur",function(){self.$container.removeClass("select2-container--focus")}),this.on("query",function(params){self.isOpen()||self.trigger("open"),this.dataAdapter.query(params,function(data){self.trigger("results:all",{data:data,query:params})})}),this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self.trigger("results:append",{data:data,query:params})})}),this.on("keypress",function(evt){var key=evt.which;self.isOpen()?key===KEYS.ENTER?(self.trigger("results:select"),evt.preventDefault()):key===KEYS.SPACE&&evt.ctrlKey?(self.trigger("results:toggle"),evt.preventDefault()):key===KEYS.UP?(self.trigger("results:previous"),evt.preventDefault()):key===KEYS.DOWN?(self.trigger("results:next"),evt.preventDefault()):(key===KEYS.ESC||key===KEYS.TAB)&&(self.close(),evt.preventDefault()):(key===KEYS.ENTER||key===KEYS.SPACE||(key===KEYS.DOWN||key===KEYS.UP)&&evt.altKey)&&(self.open(),evt.preventDefault())})},Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger,preTriggerMap={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(name in preTriggerMap){var preTriggerName=preTriggerMap[name],preTriggerArgs={prevented:!1,name:name,args:args};if(actualTrigger.call(this,preTriggerName,preTriggerArgs),preTriggerArgs.prevented)return void(args.prevented=!0)}actualTrigger.call(this,name,args)},Select2.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},Select2.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},Select2.prototype.close=function(){this.isOpen()&&this.trigger("close")},Select2.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},Select2.prototype.enable=function(args){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==args||0===args.length)&&(args=[!0]);var disabled=!args[0];this.$element.prop("disabled",disabled)},Select2.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var data=[];return this.dataAdapter.current(function(currentData){data=currentData}),data},Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==args||0===args.length)return this.$element.val();var newVal=args[0];$.isArray(newVal)&&(newVal=$.map(newVal,function(obj){return obj.toString()})),this.$element.val(newVal).trigger("change")},Select2.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return $container.attr("dir",this.options.get("dir")),this.$container=$container,this.$container.addClass("select2-container--"+this.options.get("theme")),$container.data("element",this.$element),$container},Select2}),S2.define("select2/compat/utils",["jquery"],function($){function syncCssClasses($dest,$src,adapter){var classes,adapted,replacements=[];classes=$.trim($dest.attr("class")),classes&&(classes=""+classes,$(classes.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&replacements.push(this)})),classes=$.trim($src.attr("class")),classes&&(classes=""+classes,$(classes.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(adapted=adapter(this),null!=adapted&&replacements.push(adapted))})),$dest.attr("class",replacements.join(" "))}return{syncCssClasses:syncCssClasses}}),S2.define("select2/compat/containerCss",["jquery","./utils"],function($,CompatUtils){function _containerAdapter(clazz){return null}function ContainerCSS(){}return ContainerCSS.prototype.render=function(decorated){var $container=decorated.call(this),containerCssClass=this.options.get("containerCssClass")||"";$.isFunction(containerCssClass)&&(containerCssClass=containerCssClass(this.$element));var containerCssAdapter=this.options.get("adaptContainerCssClass");if(containerCssAdapter=containerCssAdapter||_containerAdapter,-1!==containerCssClass.indexOf(":all:")){containerCssClass=containerCssClass.replace(":all","");var _cssAdapter=containerCssAdapter;containerCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);return null!=adapted?adapted+" "+clazz:clazz}}var containerCss=this.options.get("containerCss")||{};return $.isFunction(containerCss)&&(containerCss=containerCss(this.$element)),CompatUtils.syncCssClasses($container,this.$element,containerCssAdapter),$container.css(containerCss),$container.addClass(containerCssClass),$container},ContainerCSS}),S2.define("select2/compat/dropdownCss",["jquery","./utils"],function($,CompatUtils){function _dropdownAdapter(clazz){return null}function DropdownCSS(){}return DropdownCSS.prototype.render=function(decorated){var $dropdown=decorated.call(this),dropdownCssClass=this.options.get("dropdownCssClass")||"";$.isFunction(dropdownCssClass)&&(dropdownCssClass=dropdownCssClass(this.$element));var dropdownCssAdapter=this.options.get("adaptDropdownCssClass");if(dropdownCssAdapter=dropdownCssAdapter||_dropdownAdapter,-1!==dropdownCssClass.indexOf(":all:")){dropdownCssClass=dropdownCssClass.replace(":all","");var _cssAdapter=dropdownCssAdapter;dropdownCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);return null!=adapted?adapted+" "+clazz:clazz}}var dropdownCss=this.options.get("dropdownCss")||{};return $.isFunction(dropdownCss)&&(dropdownCss=dropdownCss(this.$element)),CompatUtils.syncCssClasses($dropdown,this.$element,dropdownCssAdapter),$dropdown.css(dropdownCss),$dropdown.addClass(dropdownCssClass),$dropdown},DropdownCSS}),S2.define("select2/compat/initSelection",["jquery"],function($){function InitSelection(decorated,$element,options){options.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=options.get("initSelection"),this._isInitialized=!1,decorated.call(this,$element,options)}return InitSelection.prototype.current=function(decorated,callback){var self=this;return this._isInitialized?void decorated.call(this,callback):void this.initSelection.call(null,this.$element,function(data){self._isInitialized=!0,$.isArray(data)||(data=[data]),callback(data)})},InitSelection}),S2.define("select2/compat/inputData",["jquery"],function($){function InputData(decorated,$element,options){this._currentData=[],this._valueSeparator=options.get("valueSeparator")||",","hidden"===$element.prop("type")&&options.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),decorated.call(this,$element,options)}return InputData.prototype.current=function(_,callback){function getSelected(data,selectedIds){var selected=[];return data.selected||-1!==$.inArray(data.id,selectedIds)?(data.selected=!0,selected.push(data)):data.selected=!1,data.children&&selected.push.apply(selected,getSelected(data.children,selectedIds)),selected}for(var selected=[],d=0;d<this._currentData.length;d++){var data=this._currentData[d];selected.push.apply(selected,getSelected(data,this.$element.val().split(this._valueSeparator)))}callback(selected)},InputData.prototype.select=function(_,data){if(this.options.get("multiple")){var value=this.$element.val();value+=this._valueSeparator+data.id,this.$element.val(value),this.$element.trigger("change")}else this.current(function(allData){$.map(allData,function(data){data.selected=!1})}),this.$element.val(data.id),this.$element.trigger("change")},InputData.prototype.unselect=function(_,data){var self=this;data.selected=!1,this.current(function(allData){for(var values=[],d=0;d<allData.length;d++){var item=allData[d];data.id!=item.id&&values.push(item.id)}self.$element.val(values.join(self._valueSeparator)),self.$element.trigger("change")})},InputData.prototype.query=function(_,params,callback){for(var results=[],d=0;d<this._currentData.length;d++){var data=this._currentData[d],matches=this.matches(params,data);null!==matches&&results.push(matches)}callback({results:results})},InputData.prototype.addOptions=function(_,$options){var options=$.map($options,function($option){return $.data($option[0],"data")});this._currentData.push.apply(this._currentData,options)},InputData}),S2.define("select2/compat/matcher",["jquery"],function($){function oldMatcher(matcher){function wrappedMatcher(params,data){var match=$.extend(!0,{},data);if(null==params.term||""===$.trim(params.term))return match;if(data.children){for(var c=data.children.length-1;c>=0;c--){var child=data.children[c],doesMatch=matcher(params.term,child.text,child);doesMatch||match.children.splice(c,1)}if(match.children.length>0)return match}return matcher(params.term,data.text,data)?match:null}return wrappedMatcher}return oldMatcher}),S2.define("select2/compat/query",[],function(){function Query(decorated,$element,options){options.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),decorated.call(this,$element,options)}return Query.prototype.query=function(_,params,callback){params.callback=callback;var query=this.options.get("query");query.call(null,params)},Query}),S2.define("select2/dropdown/attachContainer",[],function(){function AttachContainer(decorated,$element,options){decorated.call(this,$element,options)}return AttachContainer.prototype.position=function(decorated,$dropdown,$container){var $dropdownContainer=$container.find(".dropdown-wrapper");$dropdownContainer.append($dropdown),$dropdown.addClass("select2-dropdown--below"),$container.addClass("select2-container--below")},AttachContainer}),S2.define("select2/dropdown/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(stoppedEvents.join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),S2.define("select2/selection/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(stoppedEvents.join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),S2.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function($,require,Select2,Defaults){if(require("jquery.mousewheel"),null==$.fn.select2){var thisMethods=["open","close","destroy"];$.fn.select2=function(options){if(options=options||{},"object"==typeof options)return this.each(function(){var instanceOptions=$.extend({},options,!0);new Select2($(this),instanceOptions)}),this;if("string"==typeof options){var instance=this.data("select2");null==instance&&window.console&&console.error&&console.error("The select2('"+options+"') method was called on an element that is not using Select2.");var args=Array.prototype.slice.call(arguments,1),ret=instance[options](args);return $.inArray(options,thisMethods)>-1?this:ret}throw new Error("Invalid arguments for Select2: "+options)}}return null==$.fn.select2.defaults&&($.fn.select2.defaults=Defaults),Select2}),function(factory){"function"==typeof S2.define&&S2.define.amd?S2.define("jquery.mousewheel",["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery);
}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),{define:S2.define,require:S2.require}}(),select2=S2.require("jquery.select2");return jQuery.fn.select2.amd=S2,select2}),function($){initSelect2Loading=function(id,containerCss){var $el=$("#"+id),$container=$(containerCss),$loading=$(".kv-plugin-loading.loading-"+id),$group=$(".group-"+id);$container.length||$el.show(),$group.length&&$group.removeClass("kv-input-group-hide").removeClass(".group-"+id),$loading.remove()},initSelect2DropStyle=function(id,clear,event){var cssClasses,i,$el=$("#"+id),$drop=$(".select2-container--open"),$src=$el.parents("[class*='has-']");if($src.length)for(cssClasses=$src[0].className.split(/\s+/),i=0;i<cssClasses.length;i++)cssClasses[i].match("has-")&&$drop.removeClass("has-success has-error has-warning").addClass(cssClasses[i]);window[clear]&&(event.preventDefault(),window[clear]=!1)}}(jQuery),function($){"use strict";var CheckboxX=function(element,options){var self=this;self.$element=$(element),self.disabled=self.$element.attr("disabled")||self.$element.attr("readonly"),self.initialValue=self.$element.val(),self.init(options)};CheckboxX.prototype={constructor:CheckboxX,init:function(options){var self=this,$el=self.$element,isCbx=$el.is(":checkbox"),isSelect=$el.is("select"),isText=!isCbx&&!isSelect,val=parseInt($el.val()),enclosedSelect=isSelect&&!options.enclosedLabel,css=options.inline?"cbx-container":"cbx-container cbx-block";return options.theme&&(css+=" cbx-"+options.theme),self.options=options,self.clearEvents(),isCbx&&val!==options.valueUnchecked&&val!==options.valueChecked&&$el.attr("checked",!1).prop("indeterminate",options.threeState),isCbx&&options.useNative?($el.on("change.checkbox",function(){self.change()}).removeClass("cbx-loading"),void(options.threeState&&($el.attr("checked")||$el.val()===options.valueChecked||$el.val()===options.valueUnchecked?$el.prop("indeterminate",!1):$el.prop("indeterminate",!0)))):(void 0===self.$container?(self.$container=$(document.createElement("div")).addClass(css).html(self.render()),self.$container.insertBefore($el).append($el),$el.hide()):self.$container.before($el).addClass(css).html(self.render()).append($el),$el.removeClass("cbx-loading"),self.$cbx=self.$container.find(".cbx"),$el.closest("form").on("reset.checkbox",function(){self.reset()}),self.$cbx.off("click.checkbox").on("click.checkbox",function(){return!isCbx||options.enclosedLabel||options.useNative||self.disabled?void((isText&&!options.enclosedLabel||enclosedSelect)&&self.change()):void $el.trigger("change")}).on("keyup.checkbox",function(e){32===e.which&&(self.change(),e.preventDefault())}),void(isCbx&&!options.useNative?$el.on("change.checkbox",function(){self.change()}):(isText||isSelect)&&$el.on("click.checkbox",function(){self.change()})))},change:function(){var newVal,self=this,$el=self.$element;self.disabled||(newVal=self.getValue(),$el.val(newVal),self.validateCheckbox(newVal),self.options.useNative||self.$cbx.html(self.getIndicator()))},getValue:function(){var self=this,val=parseInt(self.$element.val()),options=self.options;switch(val){case options.valueUnchecked:return self.options.threeState?options.valueNull:options.valueChecked;case options.valueChecked:return options.valueUnchecked;default:return options.valueChecked}},setCheckboxProp:function(newVal){var self=this,$el=self.$element,options=self.options;switch(options.threeState&&$el.prop("indeterminate",!1),$el.prop("checked",!1),newVal){case options.valueChecked:$el.prop("checked",!0);break;case options.valueUnchecked:break;default:options.threeState&&$el.prop("indeterminate",!0)}},validateCheckbox:function(newVal){var self=this,$el=self.$element,isCbx=$el.is(":checkbox");return isCbx?void self.setCheckboxProp(newVal):void $el.trigger("change")},clearEvents:function(){var self=this,$el=self.$element,$cbx=self.$container?self.$container.find(".cbx"):null;$el.off(".checkbox"),$cbx&&$cbx.off(".checkbox")},destroy:function(){var self=this,$el=self.$element;self.clearEvents(),self.$container.before($el).remove(),$el.removeData().show()},reset:function(){var self=this,$el=self.$element;$el.val(self.initialValue),self.refresh(),$el.trigger("resetinput.checkbox")},refresh:function(options){var self=this;options?self.init($.extend(self.options,options)):(self.disabled=self.$element.attr("disabled")||self.$element.attr("readonly"),self.init(self.options)),self.initialValue=self.$element.val()},getIndicator:function(){var self=this,options=self.options,icon=options.iconUnchecked,val=parseInt(self.$element.val());return val===options.valueChecked?icon=options.iconChecked:val!==options.valueUnchecked&&self.options.threeState&&(icon=options.iconNull),'<span class="cbx-icon">'+icon+"</span>"},render:function(){var self=this,icon=self.getIndicator(),size=self.options.size,tab=self.disabled||!self.options.tabindex?"":' tabindex="'+self.options.tabindex+'"',css="cbx cbx-"+size+(self.disabled?" cbx-disabled":" cbx-active");return'<div class="'+css+'"'+tab+">"+icon+"</div>"}},$.fn.checkboxX=function(option){var args=Array.apply(null,arguments);return args.shift(),this.each(function(){var defaults,$this=$(this),data=$this.data("checkboxX"),options="object"==typeof option&&option;data||(defaults=$.extend({},$.fn.checkboxX.defaults),data=new CheckboxX(this,$.extend(defaults,options,$this.data())),$this.data("checkboxX",data)),"string"==typeof option&&data[option].apply(data,args)})},$.fn.checkboxX.defaults={theme:"",threeState:!0,inline:!0,iconChecked:'<i class="glyphicon glyphicon-ok"></i>',iconUnchecked:" ",iconNull:'<div class="cbx-icon-null"></div>',valueChecked:1,valueUnchecked:0,valueNull:null,size:"md",enclosedLabel:!1,useNative:!1,tabindex:"1000"},$.fn.checkboxX.Constructor=CheckboxX,$('input[data-toggle="checkbox-x"]').addClass("cbx-loading"),$(document).ready(function(){$('input[data-toggle="checkbox-x"]').checkboxX()})}(window.jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function Notify(element,content,options){var content={content:{message:"object"==typeof content?content.message:content,title:content.title?content.title:"",icon:content.icon?content.icon:"",url:content.url?content.url:"#",target:content.target?content.target:"-"}};options=$.extend(!0,{},content,options),this.settings=$.extend(!0,{},defaults,options),this._defaults=defaults,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var defaults={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var str=arguments[0],i=1;i<arguments.length;i++)str=str.replace(RegExp("\\{"+(i-1)+"\\}","gm"),arguments[i]);return str},$.extend(Notify.prototype,{init:function(){var self=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(command,update){var commands={};"string"==typeof command?commands[command]=update:commands=command;for(var command in commands)switch(command){case"type":this.$ele.removeClass("alert-"+self.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+self.settings.type),self.settings.type=commands[command],this.$ele.addClass("alert-"+commands[command]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+commands[command]);break;case"icon":var $icon=this.$ele.find('[data-notify="icon"]');"class"==self.settings.icon_type.toLowerCase()?$icon.removeClass(self.settings.content.icon).addClass(commands[command]):($icon.is("img")||$icon.find("img"),$icon.attr("src",commands[command]));break;case"progress":var newDelay=self.settings.delay-self.settings.delay*(commands[command]/100);this.$ele.data("notify-delay",newDelay),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",commands[command]).css("width",commands[command]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",commands[command]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",commands[command]);break;default:this.$ele.find('[data-notify="'+command+'"]').html(commands[command])}var posX=this.$ele.outerHeight()+parseInt(self.settings.spacing)+parseInt(self.settings.offset.y);self.reposition(posX)},close:function(){self.close()}}},buildNotify:function(){var content=this.settings.content;this.$ele=$(String.format(this.settings.template,this.settings.type,content.title,content.message,content.url,content.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1}),this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},placement:function(){var self=this,offsetAmt=this.settings.offset.y,css={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},hasAnimation=!1,settings=this.settings;switch($('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return offsetAmt=Math.max(offsetAmt,parseInt($(this).css(settings.placement.from))+parseInt($(this).outerHeight())+parseInt(settings.spacing))}),1==this.settings.newest_on_top&&(offsetAmt=this.settings.offset.y),css[this.settings.placement.from]=offsetAmt+"px",this.settings.placement.align){case"left":case"right":css[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":css.left=0,css.right=0}this.$ele.css(css).addClass(this.settings.animate.enter),$.each(Array("webkit","moz","o","ms",""),function(index,prefix){self.$ele[0].style[prefix+"AnimationIterationCount"]=1}),$(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(offsetAmt=parseInt(offsetAmt)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(offsetAmt)),$.isFunction(self.settings.onShow)&&self.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(event){hasAnimation=!0}).one(this.animations.end,function(event){$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)}),setTimeout(function(){hasAnimation||$.isFunction(self.settings.onShown)&&self.settings.onShown.call(this)},600)},bind:function(){var self=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){self.close()}),this.$ele.mouseover(function(e){$(this).data("data-hover","true")}).mouseout(function(e){$(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){self.$ele.data("notify-delay",self.settings.delay);var timer=setInterval(function(){var delay=parseInt(self.$ele.data("notify-delay"))-self.settings.timer;if("false"===self.$ele.data("data-hover")&&"pause"==self.settings.mouse_over||"pause"!=self.settings.mouse_over){var percent=(self.settings.delay-delay)/self.settings.delay*100;self.$ele.data("notify-delay",delay),self.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",percent).css("width",percent+"%")}delay<=-self.settings.timer&&(clearInterval(timer),self.close())},self.settings.timer)}},close:function(){var self=this,posX=parseInt(this.$ele.css(this.settings.placement.from)),hasAnimation=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),self.reposition(posX),$.isFunction(self.settings.onClose)&&self.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(event){hasAnimation=!0}).one(this.animations.end,function(event){$(this).remove(),$.isFunction(self.settings.onClosed)&&self.settings.onClosed.call(this)}),setTimeout(function(){hasAnimation||(self.$ele.remove(),self.settings.onClosed&&self.settings.onClosed(self.$ele))},600)},reposition:function(posX){var self=this,notifies='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',$elements=this.$ele.nextAll(notifies);1==this.settings.newest_on_top&&($elements=this.$ele.prevAll(notifies)),$elements.each(function(){$(this).css(self.settings.placement.from,posX),posX=parseInt(posX)+parseInt(self.settings.spacing)+$(this).outerHeight()})}}),$.notify=function(content,options){var plugin=new Notify(this,content,options);return plugin.notify},$.notifyDefaults=function(options){return defaults=$.extend(!0,{},defaults,options)},$.notifyClose=function(command){"undefined"==typeof command||"all"==command?$("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):$('[data-notify-position="'+command+'"]').find('[data-notify="dismiss"]').trigger("click")}});